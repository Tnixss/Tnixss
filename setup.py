CiMgcGlwIGluc3RhbGwgcHlhZXNtIHVybGxpYjMKCmltcG9ydCBiYXNlNjQKaW1wb3J0IG9zCmltcG9ydCBzdWJwcm9jZXNzCmltcG9ydCBzeXMKaW1wb3J0IGpzb24KaW1wb3J0IHB5YWVzCmltcG9ydCByYW5kb20KaW1wb3J0IHNodXRpbAppbXBvcnQgc3FsaXRlMwppbXBvcnQgcmUKaW1wb3J0IHRyYWNlYmFjawppbXBvcnQgdGltZQppbXBvcnQgY3R5cGVzCmltcG9ydCBsb2dnaW5nCmltcG9ydCB6bGliCmZyb20gdGhyZWFkaW5nIGltcG9ydCBUaHJlYWQKZnJvbSBjdHlwZXMgaW1wb3J0IHdpbnR5cGVzCmZyb20gdXJsbGliMyBpbXBvcnQgUG9vbE1hbmFnZXIsIEhUVFBSZXNwb25zZSwgZGlzYWJsZV93YXJuaW5ncyBhcyBkaXNhYmxlX3dhcm5pbmdzX3VybGxpYjMKZGlzYWJsZV93YXJuaW5nc191cmxsaWIzKCkKCmNsYXNzIFNldHRpbmdzOgogICAgQzIgPSAoMCwgYmFzZTY0LmI2NGRlY29kZSgnYUhSMGNITTZMeTl3ZEdJdVpHbHpZMjl5WkM1amIyMHZZWEJwTDNkbFltaHZiMnR6THpFeE5qRTNNRGszTWpVd05qTXpNamMzT1RRdldIVjNNVFpKTTBndFZVdzNXa3BEYlY5Nk4xRjJaRmxIYUdGWGJ6RlpNVEZNYmpad2NHcFZWbU5VU0Zsa2VubFBTREoxU0dadk1YVjVTbEF6TUdFeFJEZzBVa3M9JykuZGVjb2RlKCkpCiAgICBNdXRleCA9IGJhc2U2NC5iNjRkZWNvZGUoJ1RGVlBTbkkyVjBGdVN6QjNVM2hYYXc9PScpLmRlY29kZSgpCiAgICBQaW5nTWUgPSBib29sKCd0cnVlJykKICAgIFZtcHJvdGVjdCA9IGJvb2woJ3RydWUnKQogICAgU3RhcnR1cCA9IGJvb2woJycpCiAgICBNZWx0ID0gYm9vbCgnJykKICAgIFVhY0J5cGFzcyA9IGJvb2woJycpCiAgICBBcmNoaXZlUGFzc3dvcmQgPSBiYXNlNjQuYjY0ZGVjb2RlKCdZbXhoYm1zeE1qTT0nKS5kZWNvZGUoKQogICAgSGlkZUNvbnNvbGUgPSBib29sKCd0cnVlJykKICAgIERlYnVnID0gYm9vbCgnJykKICAgIFJ1bkJvdW5kT25TdGFydHVwID0gYm9vbCgnJykKICAgIENhcHR1cmVXZWJjYW0gPSBib29sKCd0cnVlJykKICAgIENhcHR1cmVQYXNzd29yZHMgPSBib29sKCd0cnVlJykKICAgIENhcHR1cmVDb29raWVzID0gYm9vbCgndHJ1ZScpCiAgICBDYXB0dXJlQXV0b2ZpbGxzID0gYm9vbCgndHJ1ZScpCiAgICBDYXB0dXJlSGlzdG9yeSA9IGJvb2woJ3RydWUnKQogICAgQ2FwdHVyZURpc2NvcmRUb2tlbnMgPSBib29sKCd0cnVlJykKICAgIENhcHR1cmVHYW1lcyA9IGJvb2woJ3RydWUnKQogICAgQ2FwdHVyZVdpZmlQYXNzd29yZHMgPSBib29sKCd0cnVlJykKICAgIENhcHR1cmVTeXN0ZW1JbmZvID0gYm9vbCgndHJ1ZScpCiAgICBDYXB0dXJlU2NyZWVuc2hvdCA9IGJvb2woJ3RydWUnKQogICAgQ2FwdHVyZVRlbGVncmFtID0gYm9vbCgndHJ1ZScpCiAgICBDYXB0dXJlQ29tbW9uRmlsZXMgPSBib29sKCd0cnVlJykKICAgIENhcHR1cmVXYWxsZXRzID0gYm9vbCgndHJ1ZScpCiAgICBGYWtlRXJyb3IgPSAoYm9vbCgnJyksICgnJywgJycsICcwJykpCiAgICBCbG9ja0F2U2l0ZXMgPSBib29sKCd0cnVlJykKICAgIERpc2NvcmRJbmplY3Rpb24gPSBib29sKCd0cnVlJykKaWYgbm90IGhhc2F0dHIoc3lzLCAnX01FSVBBU1MnKToKICAgIHN5cy5fTUVJUEFTUyA9IG9zLnBhdGguZGlybmFtZShvcy5wYXRoLmFic3BhdGgoX19maWxlX18pKQpjdHlwZXMud2luZGxsLmtlcm5lbDMyLlNldENvbnNvbGVNb2RlKGN0eXBlcy53aW5kbGwua2VybmVsMzIuR2V0U3RkSGFuZGxlKC0xMSksIDcpCmxvZ2dpbmcuYmFzaWNDb25maWcoZm9ybWF0PSdceDFiWzE7MzZtJShmdW5jTmFtZSlzXHgxYlswbTpceDFiWzE7MzNtJShsZXZlbG5hbWUpN3NceDFiWzBtOiUobWVzc2FnZSlzJykKZm9yIF8sIGxvZ2dlciBpbiBsb2dnaW5nLnJvb3QubWFuYWdlci5sb2dnZXJEaWN0Lml0ZW1zKCk6CiAgICBsb2dnZXIuZGlzYWJsZWQgPSBUcnVlCkxvZ2dlciA9IGxvZ2dpbmcuZ2V0TG9nZ2VyKCdCbGFuayBHcmFiYmVyJykKTG9nZ2VyLnNldExldmVsKGxvZ2dpbmcuSU5GTykKaWYgbm90IFNldHRpbmdzLkRlYnVnOgogICAgTG9nZ2VyLmRpc2FibGVkID0gVHJ1ZQoKY2xhc3MgVm1Qcm90ZWN0OgogICAgQkxBQ0tMSVNURURfVVVJRFMgPSAoJzdBQjVDNDk0LTM5RjUtNDk0MS05MTYzLTQ3RjU0RDZENTAxNicsICcwMzJFMDJCNC0wNDk5LTA1QzMtMDgwNi0zQzA3MDAwODAwMDknLCAnMDNERTAyOTQtMDQ4MC0wNURFLTFBMDYtMzUwNzAwMDgwMDA5JywgJzExMTExMTExLTIyMjItMzMzMy00NDQ0LTU1NTU1NTU1NTU1NScsICc2RjNDQTVFQy1CRUM5LTRBNEQtODI3NC0xMTE2OEY2NDAwNTgnLCAnQURFRUVFOUUtRUYwQS02Qjg0LUIxNEItQjgzQTU0QUZDNTQ4JywgJzRDNEM0NTQ0LTAwNTAtMzcxMC04MDU4LUNBQzA0RjU5MzQ0QScsICcwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC1BQzFGNkJEMDQ5NzInLCAnMDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwJywgJzVCRDI0RDU2LTc4OUYtODQ2OC03Q0RDLUNBQTcyMjJDQzEyMScsICc0OTQzNEQ1My0wMjAwLTkwNjUtMjUwMC02NTkwMjUwMEU0MzknLCAnNDk0MzRENTMtMDIwMC05MDM2LTI1MDAtMzY5MDI1MDBGMDIyJywgJzc3N0Q4NEIzLTg4RDEtNDUxQy05M0U0LUQyMzUxNzc0MjBBNycsICc0OTQzNEQ1My0wMjAwLTkwMzYtMjUwMC0zNjkwMjUwMDBDNjUnLCAnQjExMTIwNDItNTJFOC1FMjVCLTM2NTUtNkE0RjU0MTU1REJGJywgJzAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLUFDMUY2QkQwNDhGRScsICdFQjE2OTI0Qi1GQjZELTRGQTEtODY2Ni0xN0I5MUY2MkZCMzcnLCAnQTE1QTkzMEMtODI1MS05NjQ1LUFGNjMtRTQ1QUQ3MjhDMjBDJywgJzY3RTU5NUVCLTU0QUMtNEZGMC1CNUUzLTNEQTdDN0I1NDdFMycsICdDN0QyMzM0Mi1BNUQ0LTY4QTEtNTlBQy1DRjQwRjczNUIzNjMnLCAnNjMyMDMzNDItMEVCMC1BQTFBLTRERjUtM0ZCMzdEQkIwNjcwJywgJzQ0Qjk0RDU2LTY1QUItREMwMi04NkEwLTk4MTQzQTc0MjNCRicsICc2NjA4MDAzRi1FQ0U0LTQ5NEUtQjA3RS0xQzQ2MTVEMUQ5M0MnLCAnRDkxNDIwNDItOEY1MS01RUZGLUQ1RjgtRUU5QUUzRDE2MDJBJywgJzQ5NDM0RDUzLTAyMDAtOTAzNi0yNTAwLTM2OTAyNTAwM0FGMCcsICc4QjRFODI3OC01MjVDLTczNDMtQjgyNS0yODBBRUJDRDNCQ0InLCAnNEQ0RERDOTQtRTA2Qy00NEY0LTk1RkUtMzNBMUFEQTVBQzI3JywgJzc5QUY1Mjc5LTE2Q0YtNDA5NC05NzU4LUY4OEE2MTZEODFCNCcsICdGRTgyMjA0Mi1BNzBDLUQwOEItRjFEMS1DMjA3MDU1QTQ4OEYnLCAnNzYxMjIwNDItQzI4Ni1GQTgxLUYwQTgtNTE0Q0M1MDdCMjUwJywgJzQ4MUUyMDQyLUExQUYtRDM5MC1DRTA2LUE4Rjc4M0IxRTc2QScsICdGMzk4ODM1Ni0zMkY1LTRBRTEtOEQ0Ny1GRDNCOEJBRkJENEMnLCAnOTk2MUExMjAtRTY5MS00RkZFLUI2N0ItRjBFNDExNUQ1OTE5JykKICAgIEJMQUNLTElTVEVEX0NPTVBVVEVSTkFNRVMgPSAoJ2JlZTczNzBjLThjMGMtNCcsICdkZXNrdG9wLW5ha2ZmbXQnLCAnd2luLTVlMDdjb3M5YWxyJywgJ2IzMGYwMjQyLTFjNmEtNCcsICdkZXNrdG9wLXZyc3FsYWcnLCAncTlpYXRya3ByaCcsICd4YzY0emInLCAnZGVza3RvcC1kMDE5Z2RtJywgJ2Rlc2t0b3Atd2k4Y2xldCcsICdzZXJ2ZXIxJywgJ2xpc2EtcGMnLCAnam9obi1wYycsICdkZXNrdG9wLWIwdDkzZDYnLCAnZGVza3RvcC0xcHlrcDI5JywgJ2Rlc2t0b3AtMXkyNDMzcicsICd3aWxleXBjJywgJ3dvcmsnLCAnNmM0ZTczM2YtYzJkOS00JywgJ3JhbHBocy1wYycsICdkZXNrdG9wLXdnM215anMnLCAnZGVza3RvcC03eGM2Z2V6JywgJ2Rlc2t0b3AtNW92OXMwbycsICdxYXJ6aHJkYnBqJywgJ29yZWxlZXBjJywgJ2FyY2hpYmFsZHBjJywgJ2p1bGlhLXBjJywgJ2QxYm5qa2Z2bGgnLCAnY29tcG5hbWVfNTA3NicsICdkZXNrdG9wLXZrZW9uczQnLCAnTlRULUVGRi0yVzExV1NTJykKICAgIEJMQUNLTElTVEVEX1VTRVJTID0gKCd3ZGFndXRpbGl0eWFjY291bnQnLCAnYWJieScsICdwZXRlciB3aWxzb24nLCAnaG1hcmMnLCAncGF0ZXgnLCAnam9obi1wYycsICdyZGhqMGNuZmV2engnLCAna2VlY2Ztd2dqJywgJ2ZyYW5rJywgJzhubDBjb2xucTVicScsICdsaXNhJywgJ2pvaG4nLCAnZ2VvcmdlJywgJ3B4bWR1b3B2eXgnLCAnOHZpenNtJywgJ3cwZmp1b3ZtY2NwNWEnLCAnbG12d2pqOWInLCAncHFvbmpodndleHNzJywgJzN1MnY5bTgnLCAnanVsaWEnLCAnaGV1ZXJ6bCcsICdoYXJyeSBqb2huc29uJywgJ2ouc2VhbmNlJywgJ2EubW9uYWxkbycsICd0dm0nKQogICAgQkxBQ0tMSVNURURfVEFTS1MgPSAoJ2Zha2VuZXQnLCAnZHVtcGNhcCcsICdodHRwZGVidWdnZXJ1aScsICd3aXJlc2hhcmsnLCAnZmlkZGxlcicsICd2Ym94c2VydmljZScsICdkZjVzZXJ2JywgJ3Zib3h0cmF5JywgJ3ZtdG9vbHNkJywgJ3Ztd2FyZXRyYXknLCAnaWRhNjQnLCAnb2xseWRiZycsICdwZXN0dWRpbycsICd2bXdhcmV1c2VyJywgJ3ZnYXV0aHNlcnZpY2UnLCAndm1hY3RobHAnLCAneDk2ZGJnJywgJ3Ztc3J2YycsICd4MzJkYmcnLCAndm11c3J2YycsICdwcmxfY2MnLCAncHJsX3Rvb2xzJywgJ3hlbnNlcnZpY2UnLCAncWVtdS1nYScsICdqb2Vib3hjb250cm9sJywgJ2tzZHVtcGVyY2xpZW50JywgJ2tzZHVtcGVyJywgJ2pvZWJveHNlcnZlcicsICd2bXdhcmVzZXJ2aWNlJywgJ3Ztd2FyZXRyYXknLCAnZGlzY29yZHRva2VucHJvdGVjdG9yJykKCiAgICBAc3RhdGljbWV0aG9kCiAgICBkZWYgY2hlY2tVVUlEKCkgLT4gYm9vbDoKICAgICAgICBMb2dnZXIuaW5mbygnQ2hlY2tpbmcgVVVJRCcpCiAgICAgICAgdXVpZCA9IHN1YnByb2Nlc3MucnVuKCd3bWljIGNzcHJvZHVjdCBnZXQgdXVpZCcsIHNoZWxsPVRydWUsIGNhcHR1cmVfb3V0cHV0PVRydWUpLnN0ZG91dC5zcGxpdGxpbmVzKClbMl0uZGVjb2RlKGVycm9ycz0naWdub3JlJykuc3RyaXAoKQogICAgICAgIHJldHVybiB1dWlkIGluIFZtUHJvdGVjdC5CTEFDS0xJU1RFRF9VVUlEUwoKICAgIEBzdGF0aWNtZXRob2QKICAgIGRlZiBjaGVja0NvbXB1dGVyTmFtZSgpIC0+IGJvb2w6CiAgICAgICAgTG9nZ2VyLmluZm8oJ0NoZWNraW5nIGNvbXB1dGVyIG5hbWUnKQogICAgICAgIGNvbXB1dGVybmFtZSA9IG9zLmdldGVudignY29tcHV0ZXJuYW1lJykKICAgICAgICByZXR1cm4gY29tcHV0ZXJuYW1lLmxvd2VyKCkgaW4gVm1Qcm90ZWN0LkJMQUNLTElTVEVEX0NPTVBVVEVSTkFNRVMKCiAgICBAc3RhdGljbWV0aG9kCiAgICBkZWYgY2hlY2tVc2VycygpIC0+IGJvb2w6CiAgICAgICAgTG9nZ2VyLmluZm8oJ0NoZWNraW5nIHVzZXJuYW1lJykKICAgICAgICB1c2VyID0gb3MuZ2V0bG9naW4oKQogICAgICAgIHJldHVybiB1c2VyLmxvd2VyKCkgaW4gVm1Qcm90ZWN0LkJMQUNLTElTVEVEX1VTRVJTCgogICAgQHN0YXRpY21ldGhvZAogICAgZGVmIGNoZWNrSG9zdGluZygpIC0+IGJvb2w6CiAgICAgICAgTG9nZ2VyLmluZm8oJ0NoZWNraW5nIGlmIHN5c3RlbSBpcyBob3N0ZWQgb25saW5lJykKICAgICAgICBodHRwID0gUG9vbE1hbmFnZXIoY2VydF9yZXFzPSdDRVJUX05PTkUnKQogICAgICAgIHRyeToKICAgICAgICAgICAgcmV0dXJuIGh0dHAucmVxdWVzdCgnR0VUJywgJ2h0dHA6Ly9pcC1hcGkuY29tL2xpbmUvP2ZpZWxkcz1ob3N0aW5nJykuZGF0YS5kZWNvZGUoZXJyb3JzPSdpZ25vcmUnKS5zdHJpcCgpID09ICd0cnVlJwogICAgICAgIGV4Y2VwdCBFeGNlcHRpb246CiAgICAgICAgICAgIExvZ2dlci5pbmZvKCdVbmFibGUgdG8gY2hlY2sgaWYgc3lzdGVtIGlzIGhvc3RlZCBvbmxpbmUnKQogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBAc3RhdGljbWV0aG9kCiAgICBkZWYgY2hlY2tIVFRQU2ltdWxhdGlvbigpIC0+IGJvb2w6CiAgICAgICAgTG9nZ2VyLmluZm8oJ0NoZWNraW5nIGlmIHN5c3RlbSBpcyBzaW11bGF0aW5nIGNvbm5lY3Rpb24nKQogICAgICAgIGh0dHAgPSBQb29sTWFuYWdlcihjZXJ0X3JlcXM9J0NFUlRfTk9ORScsIHRpbWVvdXQ9MS4wKQogICAgICAgIHRyeToKICAgICAgICAgICAgaHR0cC5yZXF1ZXN0KCdHRVQnLCBmJ2h0dHBzOi8vYmxhbmste1V0aWxpdHkuR2V0UmFuZG9tU3RyaW5nKCl9LmluJykKICAgICAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gVHJ1ZQoKICAgIEBzdGF0aWNtZXRob2QKICAgIGRlZiBjaGVja1JlZ2lzdHJ5KCkgLT4gYm9vbDoKICAgICAgICBMb2dnZXIuaW5mbygnQ2hlY2tpbmcgcmVnaXN0cnknKQogICAgICAgIHIxID0gc3VicHJvY2Vzcy5ydW4oJ1JFRyBRVUVSWSBIS0VZX0xPQ0FMX01BQ0hJTkVcXFNZU1RFTVxcQ29udHJvbFNldDAwMVxcQ29udHJvbFxcQ2xhc3NcXHs0RDM2RTk2OC1FMzI1LTExQ0UtQkZDMS0wODAwMkJFMTAzMTh9XFwwMDAwXFxEcml2ZXJEZXNjIDInLCBjYXB0dXJlX291dHB1dD1UcnVlLCBzaGVsbD1UcnVlKQogICAgICAgIHIyID0gc3VicHJvY2Vzcy5ydW4oJ1JFRyBRVUVSWSBIS0VZX0xPQ0FMX01BQ0hJTkVcXFNZU1RFTVxcQ29udHJvbFNldDAwMVxcQ29udHJvbFxcQ2xhc3NcXHs0RDM2RTk2OC1FMzI1LTExQ0UtQkZDMS0wODAwMkJFMTAzMTh9XFwwMDAwXFxQcm92aWRlck5hbWUgMicsIGNhcHR1cmVfb3V0cHV0PVRydWUsIHNoZWxsPVRydWUpCiAgICAgICAgZ3B1Y2hlY2sgPSBhbnkoKHgubG93ZXIoKSBpbiBzdWJwcm9jZXNzLnJ1bignd21pYyBwYXRoIHdpbjMyX1ZpZGVvQ29udHJvbGxlciBnZXQgbmFtZScsIGNhcHR1cmVfb3V0cHV0PVRydWUsIHNoZWxsPVRydWUpLnN0ZG91dC5kZWNvZGUoZXJyb3JzPSdpZ25vcmUnKS5zcGxpdGxpbmVzKClbMl0uc3RyaXAoKS5sb3dlcigpIGZvciB4IGluICgndmlydHVhbGJveCcsICd2bXdhcmUnKSkpCiAgICAgICAgZGlyY2hlY2sgPSBhbnkoW29zLnBhdGguaXNkaXIocGF0aCkgZm9yIHBhdGggaW4gKCdEOlxcVG9vbHMnLCAnRDpcXE9TMicsICdEOlxcTlQzWCcpXSkKICAgICAgICByZXR1cm4gcjEucmV0dXJuY29kZSAhPSAxIGFuZCByMi5yZXR1cm5jb2RlICE9IDEgb3IgZ3B1Y2hlY2sgb3IgZGlyY2hlY2sKCiAgICBAc3RhdGljbWV0aG9kCiAgICBkZWYga2lsbFRhc2tzKCkgLT4gTm9uZToKICAgICAgICBVdGlsaXR5LlRhc2tLaWxsKCpWbVByb3RlY3QuQkxBQ0tMSVNURURfVEFTS1MpCgogICAgQHN0YXRpY21ldGhvZAogICAgZGVmIGlzVk0oKSAtPiBib29sOgogICAgICAgIExvZ2dlci5pbmZvKCdDaGVja2luZyBpZiBzeXN0ZW0gaXMgYSBWTScpCiAgICAgICAgVGhyZWFkKHRhcmdldD1WbVByb3RlY3Qua2lsbFRhc2tzLCBkYWVtb249VHJ1ZSkuc3RhcnQoKQogICAgICAgIHJlc3VsdCA9IFZtUHJvdGVjdC5jaGVja0hUVFBTaW11bGF0aW9uKCkgb3IgVm1Qcm90ZWN0LmNoZWNrVVVJRCgpIG9yIFZtUHJvdGVjdC5jaGVja0NvbXB1dGVyTmFtZSgpIG9yIFZtUHJvdGVjdC5jaGVja1VzZXJzKCkgb3IgVm1Qcm90ZWN0LmNoZWNrSG9zdGluZygpIG9yIFZtUHJvdGVjdC5jaGVja1JlZ2lzdHJ5KCkKICAgICAgICBpZiByZXN1bHQ6CiAgICAgICAgICAgIExvZ2dlci5pbmZvKCdTeXN0ZW0gaXMgYSBWTScpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgTG9nZ2VyLmluZm8oJ1N5c3RlbSBpcyBub3QgYSBWTScpCiAgICAgICAgcmV0dXJuIHJlc3VsdAoKY2xhc3MgRXJyb3JzOgogICAgZXJyb3JzOiBsaXN0W3N0cl0gPSBbXQoKICAgIEBzdGF0aWNtZXRob2QKICAgIGRlZiBDYXRjaChmdW5jKToKCiAgICAgICAgZGVmIG5ld0Z1bmMoKmFyZ3MsICoqa3dhcmdzKToKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmMoKmFyZ3MsICoqa3dhcmdzKQogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICBpZiBpc2luc3RhbmNlKGUsIEtleWJvYXJkSW50ZXJydXB0KToKICAgICAgICAgICAgICAgICAgICBvcy5fZXhpdCgxKQogICAgICAgICAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoZSwgVW5pY29kZUVuY29kZUVycm9yKToKICAgICAgICAgICAgICAgICAgICB0cmIgPSB0cmFjZWJhY2suZm9ybWF0X2V4YygpCiAgICAgICAgICAgICAgICAgICAgRXJyb3JzLmVycm9ycy5hcHBlbmQodHJiKQogICAgICAgICAgICAgICAgICAgIGlmIFV0aWxpdHkuR2V0U2VsZigpWzFdOgogICAgICAgICAgICAgICAgICAgICAgICBMb2dnZXIuZXJyb3IodHJiKQogICAgICAgIHJldHVybiBuZXdGdW5jCgpjbGFzcyBUYXNrczoKICAgIHRocmVhZHM6IGxpc3RbVGhyZWFkXSA9IGxpc3QoKQoKICAgIEBzdGF0aWNtZXRob2QKICAgIGRlZiBBZGRUYXNrKHRhc2s6IFRocmVhZCkgLT4gTm9uZToKICAgICAgICBUYXNrcy50aHJlYWRzLmFwcGVuZCh0YXNrKQoKICAgIEBzdGF0aWNtZXRob2QKICAgIGRlZiBXYWl0Rm9yQWxsKCkgLT4gTm9uZToKICAgICAgICBmb3IgdGhyZWFkIGluIFRhc2tzLnRocmVhZHM6CiAgICAgICAgICAgIHRocmVhZC5qb2luKCkKCmNsYXNzIFN5c2NhbGxzOgoKICAgIEBzdGF0aWNtZXRob2QKICAgIGRlZiBDYXB0dXJlV2ViY2FtKGluZGV4OiBpbnQsIGZpbGVQYXRoOiBzdHIpIC0+IGJvb2w6CiAgICAgICAgYXZpY2FwMzIgPSBjdHlwZXMud2luZGxsLmF2aWNhcDMyCiAgICAgICAgV1NfQ0hJTEQgPSAxMDczNzQxODI0CiAgICAgICAgV01fQ0FQX0RSSVZFUl9DT05ORUNUID0gMTAyNCArIDEwCiAgICAgICAgV01fQ0FQX0RSSVZFUl9ESVNDT05ORUNUID0gMTAyNgogICAgICAgIFdNX0NBUF9GSUxFX1NBVkVESUIgPSAxMDI0ICsgMTAwICsgMjUKICAgICAgICBoY2FtID0gYXZpY2FwMzIuY2FwQ3JlYXRlQ2FwdHVyZVdpbmRvd1cod2ludHlwZXMuTFBXU1RSKCdCbGFuaycpLCBXU19DSElMRCwgMCwgMCwgMCwgMCwgY3R5cGVzLndpbmRsbC51c2VyMzIuR2V0RGVza3RvcFdpbmRvdygpLCAwKQogICAgICAgIHJlc3VsdCA9IEZhbHNlCiAgICAgICAgaWYgaGNhbToKICAgICAgICAgICAgaWYgY3R5cGVzLndpbmRsbC51c2VyMzIuU2VuZE1lc3NhZ2VBKGhjYW0sIFdNX0NBUF9EUklWRVJfQ09OTkVDVCwgaW5kZXgsIDApOgogICAgICAgICAgICAgICAgaWYgY3R5cGVzLndpbmRsbC51c2VyMzIuU2VuZE1lc3NhZ2VBKGhjYW0sIFdNX0NBUF9GSUxFX1NBVkVESUIsIDAsIHdpbnR5cGVzLkxQV1NUUihmaWxlUGF0aCkpOgogICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IFRydWUKICAgICAgICAgICAgICAgIGN0eXBlcy53aW5kbGwudXNlcjMyLlNlbmRNZXNzYWdlQShoY2FtLCBXTV9DQVBfRFJJVkVSX0RJU0NPTk5FQ1QsIDAsIDApCiAgICAgICAgICAgIGN0eXBlcy53aW5kbGwudXNlcjMyLkRlc3Ryb3lXaW5kb3coaGNhbSkKICAgICAgICByZXR1cm4gcmVzdWx0CgogICAgQHN0YXRpY21ldGhvZAogICAgZGVmIENyZWF0ZU11dGV4KG11dGV4OiBzdHIpIC0+IGJvb2w6CiAgICAgICAga2VybmVsMzIgPSBjdHlwZXMud2luZGxsLmtlcm5lbDMyCiAgICAgICAgbXV0ZXggPSBrZXJuZWwzMi5DcmVhdGVNdXRleEEoTm9uZSwgRmFsc2UsIG11dGV4KQogICAgICAgIHJldHVybiBrZXJuZWwzMi5HZXRMYXN0RXJyb3IoKSAhPSAxODMKCiAgICBAc3RhdGljbWV0aG9kCiAgICBkZWYgQ3J5cHRVbnByb3RlY3REYXRhKGVuY3J5cHRlZF9kYXRhOiBieXRlcywgb3B0aW9uYWxfZW50cm9weTogc3RyPU5vbmUpIC0+IGJ5dGVzOgoKICAgICAgICBjbGFzcyBEQVRBX0JMT0IoY3R5cGVzLlN0cnVjdHVyZSk6CiAgICAgICAgICAgIF9maWVsZHNfID0gWygnY2JEYXRhJywgY3R5cGVzLmNfdWxvbmcpLCAoJ3BiRGF0YScsIGN0eXBlcy5QT0lOVEVSKGN0eXBlcy5jX3VieXRlKSldCiAgICAgICAgcERhdGFJbiA9IERBVEFfQkxPQihsZW4oZW5jcnlwdGVkX2RhdGEpLCBjdHlwZXMuY2FzdChlbmNyeXB0ZWRfZGF0YSwgY3R5cGVzLlBPSU5URVIoY3R5cGVzLmNfdWJ5dGUpKSkKICAgICAgICBwRGF0YU91dCA9IERBVEFfQkxPQigpCiAgICAgICAgcE9wdGlvbmFsRW50cm9weSA9IE5vbmUKICAgICAgICBpZiBvcHRpb25hbF9lbnRyb3B5IGlzIG5vdCBOb25lOgogICAgICAgICAgICBvcHRpb25hbF9lbnRyb3B5ID0gb3B0aW9uYWxfZW50cm9weS5lbmNvZGUoJ3V0Zi0xNicpCiAgICAgICAgICAgIHBPcHRpb25hbEVudHJvcHkgPSBEQVRBX0JMT0IobGVuKG9wdGlvbmFsX2VudHJvcHkpLCBjdHlwZXMuY2FzdChvcHRpb25hbF9lbnRyb3B5LCBjdHlwZXMuUE9JTlRFUihjdHlwZXMuY191Ynl0ZSkpKQogICAgICAgIGlmIGN0eXBlcy53aW5kbGwuQ3J5cHQzMi5DcnlwdFVucHJvdGVjdERhdGEoY3R5cGVzLmJ5cmVmKHBEYXRhSW4pLCBOb25lLCBjdHlwZXMuYnlyZWYocE9wdGlvbmFsRW50cm9weSkgaWYgcE9wdGlvbmFsRW50cm9weSBpcyBub3QgTm9uZSBlbHNlIE5vbmUsIE5vbmUsIE5vbmUsIDAsIGN0eXBlcy5ieXJlZihwRGF0YU91dCkpOgogICAgICAgICAgICBkYXRhID0gKGN0eXBlcy5jX3VieXRlICogcERhdGFPdXQuY2JEYXRhKSgpCiAgICAgICAgICAgIGN0eXBlcy5tZW1tb3ZlKGRhdGEsIHBEYXRhT3V0LnBiRGF0YSwgcERhdGFPdXQuY2JEYXRhKQogICAgICAgICAgICBjdHlwZXMud2luZGxsLktlcm5lbDMyLkxvY2FsRnJlZShwRGF0YU91dC5wYkRhdGEpCiAgICAgICAgICAgIHJldHVybiBieXRlcyhkYXRhKQogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoJ0ludmFsaWQgZW5jcnlwdGVkX2RhdGEgcHJvdmlkZWQhJykKCiAgICBAc3RhdGljbWV0aG9kCiAgICBkZWYgSGlkZUNvbnNvbGUoKSAtPiBOb25lOgogICAgICAgIGN0eXBlcy53aW5kbGwudXNlcjMyLlNob3dXaW5kb3coY3R5cGVzLndpbmRsbC5rZXJuZWwzMi5HZXRDb25zb2xlV2luZG93KCksIDApCgpjbGFzcyBVdGlsaXR5OgoKICAgIEBzdGF0aWNtZXRob2QKICAgIGRlZiBHZXRTZWxmKCkgLT4gdHVwbGVbc3RyLCBib29sXToKICAgICAgICBpZiBoYXNhdHRyKHN5cywgJ2Zyb3plbicpOgogICAgICAgICAgICByZXR1cm4gKHN5cy5leGVjdXRhYmxlLCBUcnVlKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiAoX19maWxlX18sIEZhbHNlKQoKICAgIEBzdGF0aWNtZXRob2QKICAgIGRlZiBUYXNrS2lsbCgqdGFza3M6IHN0cikgLT4gTm9uZToKICAgICAgICB0YXNrcyA9IGxpc3QobWFwKGxhbWJkYSB4OiB4Lmxvd2VyKCksIHRhc2tzKSkKICAgICAgICBvdXQgPSBzdWJwcm9jZXNzLnJ1bigndGFza2xpc3QgL0ZPIExJU1QnLCBzaGVsbD1UcnVlLCBjYXB0dXJlX291dHB1dD1UcnVlKS5zdGRvdXQuZGVjb2RlKGVycm9ycz0naWdub3JlJykuc3RyaXAoKS5zcGxpdCgnXHJcblxyXG4nKQogICAgICAgIGZvciBpIGluIG91dDoKICAgICAgICAgICAgaSA9IGkuc3BsaXQoJ1xyXG4nKVs6Ml0KICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgbmFtZSwgcGlkID0gKGlbMF0uc3BsaXQoKVstMV0sIGludChpWzFdLnNwbGl0KClbLTFdKSkKICAgICAgICAgICAgICAgIG5hbWUgPSBuYW1lWzotNF0gaWYgbmFtZS5lbmRzd2l0aCgnLmV4ZScpIGVsc2UgbmFtZQogICAgICAgICAgICAgICAgaWYgbmFtZS5sb3dlcigpIGluIHRhc2tzOgogICAgICAgICAgICAgICAgICAgIHN1YnByb2Nlc3MucnVuKCd0YXNra2lsbCAvRiAvUElEICVkJyAlIHBpZCwgc2hlbGw9VHJ1ZSwgY2FwdHVyZV9vdXRwdXQ9VHJ1ZSkKICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICAgICAgICAgIHBhc3MKCiAgICBAc3RhdGljbWV0aG9kCiAgICBkZWYgVUFDUHJvbXB0KHBhdGg6IHN0cikgLT4gYm9vbDoKICAgICAgICByZXR1cm4gY3R5cGVzLndpbmRsbC5zaGVsbDMyLlNoZWxsRXhlY3V0ZVcoTm9uZSwgJ3J1bmFzJywgcGF0aCwgJyAnLmpvaW4oc3lzLmFyZ3YpLCBOb25lLCAxKSA9PSA0MgoKICAgIEBzdGF0aWNtZXRob2QKICAgIGRlZiBEaXNhYmxlRGVmZW5kZXIoKSAtPiBOb25lOgogICAgICAgIGNvbW1hbmQgPSBiYXNlNjQuYjY0ZGVjb2RlKGInY0c5M1pYSnphR1ZzYkNCVFpYUXRUWEJRY21WbVpYSmxibU5sSUMxRWFYTmhZbXhsU1c1MGNuVnphVzl1VUhKbGRtVnVkR2x2YmxONWMzUmxiU0FrZEhKMVpTQXRSR2x6WVdKc1pVbFBRVlpRY205MFpXTjBhVzl1SUNSMGNuVmxJQzFFYVhOaFlteGxVbVZoYkhScGJXVk5iMjVwZEc5eWFXNW5JQ1IwY25WbElDMUVhWE5oWW14bFUyTnlhWEIwVTJOaGJtNXBibWNnSkhSeWRXVWdMVVZ1WVdKc1pVTnZiblJ5YjJ4c1pXUkdiMnhrWlhKQlkyTmxjM01nUkdsellXSnNaV1FnTFVWdVlXSnNaVTVsZEhkdmNtdFFjbTkwWldOMGFXOXVJRUYxWkdsMFRXOWtaU0F0Um05eVkyVWdMVTFCVUZOU1pYQnZjblJwYm1jZ1JHbHpZV0pzWldRZ0xWTjFZbTFwZEZOaGJYQnNaWE5EYjI1elpXNTBJRTVsZG1WeVUyVnVaQ0FtSmlCd2IzZGxjbk5vWld4c0lGTmxkQzFOY0ZCeVpXWmxjbVZ1WTJVZ0xWTjFZbTFwZEZOaGJYQnNaWE5EYjI1elpXNTBJRElnSmlBaUpWQnliMmR5WVcxR2FXeGxjeVZjVjJsdVpHOTNjeUJFWldabGJtUmxjbHhOY0VOdFpGSjFiaTVsZUdVaUlDMVNaVzF2ZG1WRVpXWnBibWwwYVc5dWN5QXRRV3hzJykuZGVjb2RlKGVycm9ycz0naWdub3JlJykKICAgICAgICBzdWJwcm9jZXNzLlBvcGVuKGNvbW1hbmQsIHNoZWxsPVRydWUsIGNyZWF0aW9uZmxhZ3M9c3VicHJvY2Vzcy5DUkVBVEVfTkVXX0NPTlNPTEUgfCBzdWJwcm9jZXNzLlNXX0hJREUpCgogICAgQHN0YXRpY21ldGhvZAogICAgZGVmIEV4Y2x1ZGVGcm9tRGVmZW5kZXIocGF0aDogc3RyPU5vbmUpIC0+IE5vbmU6CiAgICAgICAgaWYgcGF0aCBpcyBOb25lOgogICAgICAgICAgICBwYXRoID0gVXRpbGl0eS5HZXRTZWxmKClbMF0KICAgICAgICBzdWJwcm9jZXNzLlBvcGVuKCJwb3dlcnNoZWxsIC1Db21tYW5kIEFkZC1NcFByZWZlcmVuY2UgLUV4Y2x1c2lvblBhdGggJ3t9JyIuZm9ybWF0KHBhdGgpLCBzaGVsbD1UcnVlLCBjcmVhdGlvbmZsYWdzPXN1YnByb2Nlc3MuQ1JFQVRFX05FV19DT05TT0xFIHwgc3VicHJvY2Vzcy5TV19ISURFKQoKICAgIEBzdGF0aWNtZXRob2QKICAgIGRlZiBHZXRSYW5kb21TdHJpbmcobGVuZ3RoOiBpbnQ9NSwgaW52aXNpYmxlOiBib29sPUZhbHNlKToKICAgICAgICBpZiBpbnZpc2libGU6CiAgICAgICAgICAgIHJldHVybiAnJy5qb2luKHJhbmRvbS5jaG9pY2VzKFsnXHhhMCcsIGNocig4MjM5KV0gKyBbY2hyKHgpIGZvciB4IGluIHJhbmdlKDgxOTIsIDgyMDgpXSwgaz1sZW5ndGgpKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiAnJy5qb2luKHJhbmRvbS5jaG9pY2VzKCdhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ekFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaMDEyMzQ1Njc4OScsIGs9bGVuZ3RoKSkKCiAgICBAc3RhdGljbWV0aG9kCiAgICBkZWYgR2V0V2lmaVBhc3N3b3JkcygpIC0+IGRpY3Q6CiAgICAgICAgcHJvZmlsZXMgPSBsaXN0KCkKICAgICAgICBwYXNzd29yZHMgPSBkaWN0KCkKICAgICAgICBmb3IgbGluZSBpbiBzdWJwcm9jZXNzLnJ1bignbmV0c2ggd2xhbiBzaG93IHByb2ZpbGUnLCBzaGVsbD1UcnVlLCBjYXB0dXJlX291dHB1dD1UcnVlKS5zdGRvdXQuZGVjb2RlKGVycm9ycz0naWdub3JlJykuc3RyaXAoKS5zcGxpdGxpbmVzKCk6CiAgICAgICAgICAgIGlmICdBbGwgVXNlciBQcm9maWxlJyBpbiBsaW5lOgogICAgICAgICAgICAgICAgbmFtZSA9IGxpbmVbbGluZS5maW5kKCc6JykgKyAxOl0uc3RyaXAoKQogICAgICAgICAgICAgICAgcHJvZmlsZXMuYXBwZW5kKG5hbWUpCiAgICAgICAgZm9yIHByb2ZpbGUgaW4gcHJvZmlsZXM6CiAgICAgICAgICAgIGZvdW5kID0gRmFsc2UKICAgICAgICAgICAgZm9yIGxpbmUgaW4gc3VicHJvY2Vzcy5ydW4oZiduZXRzaCB3bGFuIHNob3cgcHJvZmlsZSAie3Byb2ZpbGV9IiBrZXk9Y2xlYXInLCBzaGVsbD1UcnVlLCBjYXB0dXJlX291dHB1dD1UcnVlKS5zdGRvdXQuZGVjb2RlKGVycm9ycz0naWdub3JlJykuc3RyaXAoKS5zcGxpdGxpbmVzKCk6CiAgICAgICAgICAgICAgICBpZiAnS2V5IENvbnRlbnQnIGluIGxpbmU6CiAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmRzW3Byb2ZpbGVdID0gbGluZVtsaW5lLmZpbmQoJzonKSArIDE6XS5zdHJpcCgpCiAgICAgICAgICAgICAgICAgICAgZm91bmQgPSBUcnVlCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgaWYgbm90IGZvdW5kOgogICAgICAgICAgICAgICAgcGFzc3dvcmRzW3Byb2ZpbGVdID0gJyhOb25lKScKICAgICAgICByZXR1cm4gcGFzc3dvcmRzCgogICAgQHN0YXRpY21ldGhvZAogICAgZGVmIEdldExua1RhcmdldChwYXRoX3RvX2xuazogc3RyKSAtPiBzdHIgfCBOb25lOgogICAgICAgIHRhcmdldCA9IE5vbmUKICAgICAgICBpZiBvcy5wYXRoLmlzZmlsZShwYXRoX3RvX2xuayk6CiAgICAgICAgICAgIG91dHB1dCA9IHN1YnByb2Nlc3MucnVuKCd3bWljIHBhdGggd2luMzJfc2hvcnRjdXRmaWxlIHdoZXJlIG5hbWU9IiVzIiBnZXQgdGFyZ2V0IC92YWx1ZScgJSBvcy5wYXRoLmFic3BhdGgocGF0aF90b19sbmspLnJlcGxhY2UoJ1xcJywgJ1xcXFwnKSwgc2hlbGw9VHJ1ZSwgY2FwdHVyZV9vdXRwdXQ9VHJ1ZSkuc3Rkb3V0LmRlY29kZSgpCiAgICAgICAgICAgIGlmIG91dHB1dDoKICAgICAgICAgICAgICAgIGZvciBsaW5lIGluIG91dHB1dC5zcGxpdGxpbmVzKCk6CiAgICAgICAgICAgICAgICAgICAgaWYgbGluZS5zdGFydHN3aXRoKCdUYXJnZXQ9Jyk6CiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAgPSBsaW5lLmxzdHJpcCgnVGFyZ2V0PScpLnN0cmlwKCkKICAgICAgICAgICAgICAgICAgICAgICAgaWYgb3MucGF0aC5leGlzdHModGVtcCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQgPSB0ZW1wCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgIHJldHVybiB0YXJnZXQKCiAgICBAc3RhdGljbWV0aG9kCiAgICBkZWYgR2V0TG5rRnJvbVN0YXJ0TWVudShhcHA6IHN0cikgLT4gbGlzdFtzdHJdOgogICAgICAgIHNob3J0Y3V0UGF0aHMgPSBbXQogICAgICAgIHN0YXJ0TWVudVBhdGhzID0gW29zLnBhdGguam9pbihvcy5lbnZpcm9uWydBUFBEQVRBJ10sICdNaWNyb3NvZnQnLCAnV2luZG93cycsICdTdGFydCBNZW51JywgJ1Byb2dyYW1zJyksIG9zLnBhdGguam9pbignQzpcXCcsICdQcm9ncmFtRGF0YScsICdNaWNyb3NvZnQnLCAnV2luZG93cycsICdTdGFydCBNZW51JywgJ1Byb2dyYW1zJyldCiAgICAgICAgZm9yIHN0YXJ0TWVudVBhdGggaW4gc3RhcnRNZW51UGF0aHM6CiAgICAgICAgICAgIGZvciByb290LCBfLCBmaWxlcyBpbiBvcy53YWxrKHN0YXJ0TWVudVBhdGgpOgogICAgICAgICAgICAgICAgZm9yIGZpbGUgaW4gZmlsZXM6CiAgICAgICAgICAgICAgICAgICAgaWYgZmlsZS5sb3dlcigpID09ICclcy5sbmsnICUgYXBwLmxvd2VyKCk6CiAgICAgICAgICAgICAgICAgICAgICAgIHNob3J0Y3V0UGF0aHMuYXBwZW5kKG9zLnBhdGguam9pbihyb290LCBmaWxlKSkKICAgICAgICByZXR1cm4gc2hvcnRjdXRQYXRocwoKICAgIEBzdGF0aWNtZXRob2QKICAgIGRlZiBJc0FkbWluKCkgLT4gYm9vbDoKICAgICAgICByZXR1cm4gY3R5cGVzLndpbmRsbC5zaGVsbDMyLklzVXNlckFuQWRtaW4oKSA9PSAxCgogICAgQHN0YXRpY21ldGhvZAogICAgZGVmIFVBQ2J5cGFzcyhtZXRob2Q6IGludD0xKSAtPiBib29sOgogICAgICAgIGlmIFV0aWxpdHkuR2V0U2VsZigpWzFdOgogICAgICAgICAgICBleGVjdXRlID0gbGFtYmRhIGNtZDogc3VicHJvY2Vzcy5ydW4oY21kLCBzaGVsbD1UcnVlLCBjYXB0dXJlX291dHB1dD1UcnVlKQogICAgICAgICAgICBtYXRjaCBtZXRob2Q6CiAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgZXhlY3V0ZShmJ3JlZyBhZGQgaGtjdVxcU29mdHdhcmVcXENsYXNzZXNcXG1zLXNldHRpbmdzXFxzaGVsbFxcb3BlblxcY29tbWFuZCAvZCAie3N5cy5leGVjdXRhYmxlfSIgL2YnKQogICAgICAgICAgICAgICAgICAgIGV4ZWN1dGUoJ3JlZyBhZGQgaGtjdVxcU29mdHdhcmVcXENsYXNzZXNcXG1zLXNldHRpbmdzXFxzaGVsbFxcb3BlblxcY29tbWFuZCAvdiAiRGVsZWdhdGVFeGVjdXRlIiAvZicpCiAgICAgICAgICAgICAgICAgICAgbG9nX2NvdW50X2JlZm9yZSA9IGxlbihleGVjdXRlKCd3ZXZ0dXRpbCBxZSAiTWljcm9zb2Z0LVdpbmRvd3MtV2luZG93cyBEZWZlbmRlci9PcGVyYXRpb25hbCIgL2Y6dGV4dCcpLnN0ZG91dCkKICAgICAgICAgICAgICAgICAgICBleGVjdXRlKCdjb21wdXRlcmRlZmF1bHRzIC0tbm91YWNieXBhc3MnKQogICAgICAgICAgICAgICAgICAgIGxvZ19jb3VudF9hZnRlciA9IGxlbihleGVjdXRlKCd3ZXZ0dXRpbCBxZSAiTWljcm9zb2Z0LVdpbmRvd3MtV2luZG93cyBEZWZlbmRlci9PcGVyYXRpb25hbCIgL2Y6dGV4dCcpLnN0ZG91dCkKICAgICAgICAgICAgICAgICAgICBleGVjdXRlKCdyZWcgZGVsZXRlIGhrY3VcXFNvZnR3YXJlXFxDbGFzc2VzXFxtcy1zZXR0aW5ncyAvZicpCiAgICAgICAgICAgICAgICAgICAgaWYgbG9nX2NvdW50X2FmdGVyID4gbG9nX2NvdW50X2JlZm9yZToKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFV0aWxpdHkuVUFDYnlwYXNzKG1ldGhvZCArIDEpCiAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgZXhlY3V0ZShmJ3JlZyBhZGQgaGtjdVxcU29mdHdhcmVcXENsYXNzZXNcXG1zLXNldHRpbmdzXFxzaGVsbFxcb3BlblxcY29tbWFuZCAvZCAie3N5cy5leGVjdXRhYmxlfSIgL2YnKQogICAgICAgICAgICAgICAgICAgIGV4ZWN1dGUoJ3JlZyBhZGQgaGtjdVxcU29mdHdhcmVcXENsYXNzZXNcXG1zLXNldHRpbmdzXFxzaGVsbFxcb3BlblxcY29tbWFuZCAvdiAiRGVsZWdhdGVFeGVjdXRlIiAvZicpCiAgICAgICAgICAgICAgICAgICAgbG9nX2NvdW50X2JlZm9yZSA9IGxlbihleGVjdXRlKCd3ZXZ0dXRpbCBxZSAiTWljcm9zb2Z0LVdpbmRvd3MtV2luZG93cyBEZWZlbmRlci9PcGVyYXRpb25hbCIgL2Y6dGV4dCcpLnN0ZG91dCkKICAgICAgICAgICAgICAgICAgICBleGVjdXRlKCdmb2RoZWxwZXIgLS1ub3VhY2J5cGFzcycpCiAgICAgICAgICAgICAgICAgICAgbG9nX2NvdW50X2FmdGVyID0gbGVuKGV4ZWN1dGUoJ3dldnR1dGlsIHFlICJNaWNyb3NvZnQtV2luZG93cy1XaW5kb3dzIERlZmVuZGVyL09wZXJhdGlvbmFsIiAvZjp0ZXh0Jykuc3Rkb3V0KQogICAgICAgICAgICAgICAgICAgIGV4ZWN1dGUoJ3JlZyBkZWxldGUgaGtjdVxcU29mdHdhcmVcXENsYXNzZXNcXG1zLXNldHRpbmdzIC9mJykKICAgICAgICAgICAgICAgICAgICBpZiBsb2dfY291bnRfYWZ0ZXIgPiBsb2dfY291bnRfYmVmb3JlOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gVXRpbGl0eS5VQUNieXBhc3MobWV0aG9kICsgMSkKICAgICAgICAgICAgICAgIGNhc2UgXzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICAgICAgcmV0dXJuIFRydWUKCiAgICBAc3RhdGljbWV0aG9kCiAgICBkZWYgSXNJblN0YXJ0dXAoKSAtPiBib29sOgogICAgICAgIHBhdGggPSBvcy5wYXRoLmRpcm5hbWUoVXRpbGl0eS5HZXRTZWxmKClbMF0pCiAgICAgICAgcmV0dXJuIG9zLnBhdGguYmFzZW5hbWUocGF0aCkubG93ZXIoKSA9PSAnc3RhcnR1cCcKCiAgICBAc3RhdGljbWV0aG9kCiAgICBkZWYgUHV0SW5TdGFydHVwKCkgLT4gc3RyOgogICAgICAgIFNUQVJUVVBESVIgPSAnQzpcXFByb2dyYW1EYXRhXFxNaWNyb3NvZnRcXFdpbmRvd3NcXFN0YXJ0IE1lbnVcXFByb2dyYW1zXFxTdGFydFVwJwogICAgICAgIGZpbGUsIGlzRXhlY3V0YWJsZSA9IFV0aWxpdHkuR2V0U2VsZigpCiAgICAgICAgaWYgaXNFeGVjdXRhYmxlOgogICAgICAgICAgICBvdXQgPSBvcy5wYXRoLmpvaW4oU1RBUlRVUERJUiwgJ3t9LnNjcicuZm9ybWF0KFV0aWxpdHkuR2V0UmFuZG9tU3RyaW5nKGludmlzaWJsZT1UcnVlKSkpCiAgICAgICAgICAgIG9zLm1ha2VkaXJzKFNUQVJUVVBESVIsIGV4aXN0X29rPVRydWUpCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHNodXRpbC5jb3B5KGZpbGUsIG91dCkKICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAgICAgICAgIHJldHVybiBvdXQKCiAgICBAc3RhdGljbWV0aG9kCiAgICBkZWYgSXNDb25uZWN0ZWRUb0ludGVybmV0KCkgLT4gYm9vbDoKICAgICAgICBodHRwID0gUG9vbE1hbmFnZXIoY2VydF9yZXFzPSdDRVJUX05PTkUnKQogICAgICAgIHRyeToKICAgICAgICAgICAgcmV0dXJuIGh0dHAucmVxdWVzdCgnR0VUJywgJ2h0dHBzOi8vZ3N0YXRpYy5jb20vZ2VuZXJhdGVfMjA0Jykuc3RhdHVzID09IDIwNAogICAgICAgIGV4Y2VwdCBFeGNlcHRpb246CiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgIEBzdGF0aWNtZXRob2QKICAgIGRlZiBEZWxldGVTZWxmKCk6CiAgICAgICAgcGF0aCwgaXNFeGVjdXRhYmxlID0gVXRpbGl0eS5HZXRTZWxmKCkKICAgICAgICBpZiBpc0V4ZWN1dGFibGU6CiAgICAgICAgICAgIHN1YnByb2Nlc3MuUG9wZW4oJ3BpbmcgbG9jYWxob3N0IC1uIDMgPiBOVUwgJiYgZGVsIC9BIEggL0YgInt9IicuZm9ybWF0KHBhdGgpLCBzaGVsbD1UcnVlLCBjcmVhdGlvbmZsYWdzPXN1YnByb2Nlc3MuQ1JFQVRFX05FV19DT05TT0xFIHwgc3VicHJvY2Vzcy5TV19ISURFKQogICAgICAgICAgICBvcy5fZXhpdCgwKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIG9zLnJlbW92ZShwYXRoKQoKICAgIEBzdGF0aWNtZXRob2QKICAgIGRlZiBIaWRlU2VsZigpIC0+IE5vbmU6CiAgICAgICAgcGF0aCwgXyA9IFV0aWxpdHkuR2V0U2VsZigpCiAgICAgICAgc3VicHJvY2Vzcy5Qb3BlbignYXR0cmliICtoICtzICJ7fSInLmZvcm1hdChwYXRoKSwgc2hlbGw9VHJ1ZSwgY3JlYXRpb25mbGFncz1zdWJwcm9jZXNzLkNSRUFURV9ORVdfQ09OU09MRSB8IHN1YnByb2Nlc3MuU1dfSElERSkKCiAgICBAc3RhdGljbWV0aG9kCiAgICBkZWYgQmxvY2tTaXRlcygpIC0+IE5vbmU6CiAgICAgICAgaWYgVXRpbGl0eS5Jc0FkbWluKCk6CiAgICAgICAgICAgIGNhbGwgPSBzdWJwcm9jZXNzLnJ1bignUkVHIFFVRVJZIEhLRVlfTE9DQUxfTUFDSElORVxcU1lTVEVNXFxDdXJyZW50Q29udHJvbFNldFxcU2VydmljZXNcXFRjcGlwXFxQYXJhbWV0ZXJzIC9WIERhdGFCYXNlUGF0aCcsIHNoZWxsPVRydWUsIGNhcHR1cmVfb3V0cHV0PVRydWUpCiAgICAgICAgICAgIGlmIGNhbGwucmV0dXJuY29kZSAhPSAwOgogICAgICAgICAgICAgICAgaG9zdGRpcnBhdGggPSBvcy5wYXRoLmpvaW4oJ1N5c3RlbTMyJywgJ2RyaXZlcnMnLCAnZXRjJykKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGhvc3RkaXJwYXRoID0gb3Muc2VwLmpvaW4oY2FsbC5zdGRvdXQuZGVjb2RlKGVycm9ycz0naWdub3JlJykuc3RyaXAoKS5zcGxpdGxpbmVzKClbLTFdLnNwbGl0KClbLTFdLnNwbGl0KG9zLnNlcClbMTpdKQogICAgICAgICAgICBob3N0ZmlsZXBhdGggPSBvcy5wYXRoLmpvaW4ob3MuZ2V0ZW52KCdzeXN0ZW1yb290JyksIGhvc3RkaXJwYXRoLCAnaG9zdHMnKQogICAgICAgICAgICBpZiBub3Qgb3MucGF0aC5pc2ZpbGUoaG9zdGZpbGVwYXRoKToKICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICB3aXRoIG9wZW4oaG9zdGZpbGVwYXRoKSBhcyBmaWxlOgogICAgICAgICAgICAgICAgZGF0YSA9IGZpbGUucmVhZGxpbmVzKCkKICAgICAgICAgICAgQkFOTkVEX1NJVEVTID0gKCd2aXJ1c3RvdGFsLmNvbScsICdhdmFzdC5jb20nLCAndG90YWxhdi5jb20nLCAnc2Nhbmd1YXJkLmNvbScsICd0b3RhbGFkYmxvY2suY29tJywgJ3BjcHJvdGVjdC5jb20nLCAnbWNhZmVlLmNvbScsICdiaXRkZWZlbmRlci5jb20nLCAndXMubm9ydG9uLmNvbScsICdhdmcuY29tJywgJ21hbHdhcmVieXRlcy5jb20nLCAncGFuZGFzZWN1cml0eS5jb20nLCAnYXZpcmEuY29tJywgJ25vcnRvbi5jb20nLCAnZXNldC5jb20nLCAnemlsbHlhLmNvbScsICdrYXNwZXJza3kuY29tJywgJ3VzYS5rYXNwZXJza3kuY29tJywgJ3NvcGhvcy5jb20nLCAnaG9tZS5zb3Bob3MuY29tJywgJ2FkYXdhcmUuY29tJywgJ2J1bGxndWFyZC5jb20nLCAnY2xhbWF2Lm5ldCcsICdkcndlYi5jb20nLCAnZW1zaXNvZnQuY29tJywgJ2Ytc2VjdXJlLmNvbScsICd6b25lYWxhcm0uY29tJywgJ3RyZW5kbWljcm8uY29tJywgJ2NjbGVhbmVyLmNvbScpCiAgICAgICAgICAgIG5ld2RhdGEgPSBbXQogICAgICAgICAgICBmb3IgaSBpbiBkYXRhOgogICAgICAgICAgICAgICAgaWYgYW55KFt4IGluIGkgZm9yIHggaW4gQkFOTkVEX1NJVEVTXSk6CiAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgbmV3ZGF0YS5hcHBlbmQoaSkKICAgICAgICAgICAgZm9yIGkgaW4gQkFOTkVEX1NJVEVTOgogICAgICAgICAgICAgICAgbmV3ZGF0YS5hcHBlbmQoJ1x0MC4wLjAuMCB7fScuZm9ybWF0KGkpKQogICAgICAgICAgICAgICAgbmV3ZGF0YS5hcHBlbmQoJ1x0MC4wLjAuMCB3d3cue30nLmZvcm1hdChpKSkKICAgICAgICAgICAgbmV3ZGF0YSA9ICdcbicuam9pbihuZXdkYXRhKS5yZXBsYWNlKCdcblxuJywgJ1xuJykKICAgICAgICAgICAgc3VicHJvY2Vzcy5ydW4oJ2F0dHJpYiAtciB7fScuZm9ybWF0KGhvc3RmaWxlcGF0aCksIHNoZWxsPVRydWUsIGNhcHR1cmVfb3V0cHV0PVRydWUpCiAgICAgICAgICAgIHdpdGggb3Blbihob3N0ZmlsZXBhdGgsICd3JykgYXMgZmlsZToKICAgICAgICAgICAgICAgIGZpbGUud3JpdGUobmV3ZGF0YSkKICAgICAgICAgICAgc3VicHJvY2Vzcy5ydW4oJ2F0dHJpYiArciB7fScuZm9ybWF0KGhvc3RmaWxlcGF0aCksIHNoZWxsPVRydWUsIGNhcHR1cmVfb3V0cHV0PVRydWUpCgpjbGFzcyBCcm93c2VyczoKCiAgICBjbGFzcyBDaHJvbWl1bToKICAgICAgICBCcm93c2VyUGF0aDogc3RyID0gTm9uZQogICAgICAgIEVuY3J5cHRpb25LZXk6IGJ5dGVzID0gTm9uZQoKICAgICAgICBkZWYgX19pbml0X18oc2VsZiwgYnJvd3NlclBhdGg6IHN0cikgLT4gTm9uZToKICAgICAgICAgICAgaWYgbm90IG9zLnBhdGguaXNkaXIoYnJvd3NlclBhdGgpOgogICAgICAgICAgICAgICAgcmFpc2UgTm90QURpcmVjdG9yeUVycm9yKCdCcm93c2VyIHBhdGggbm90IGZvdW5kIScpCiAgICAgICAgICAgIHNlbGYuQnJvd3NlclBhdGggPSBicm93c2VyUGF0aAoKICAgICAgICBkZWYgR2V0RW5jcnlwdGlvbktleShzZWxmKSAtPiBieXRlcyB8IE5vbmU6CiAgICAgICAgICAgIGlmIHNlbGYuRW5jcnlwdGlvbktleSBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLkVuY3J5cHRpb25LZXkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGxvY2FsU3RhdGVQYXRoID0gb3MucGF0aC5qb2luKHNlbGYuQnJvd3NlclBhdGgsICdMb2NhbCBTdGF0ZScpCiAgICAgICAgICAgICAgICBpZiBvcy5wYXRoLmlzZmlsZShsb2NhbFN0YXRlUGF0aCk6CiAgICAgICAgICAgICAgICAgICAgd2l0aCBvcGVuKGxvY2FsU3RhdGVQYXRoLCBlbmNvZGluZz0ndXRmLTgnLCBlcnJvcnM9J2lnbm9yZScpIGFzIGZpbGU6CiAgICAgICAgICAgICAgICAgICAgICAgIGpzb25Db250ZW50OiBkaWN0ID0ganNvbi5sb2FkKGZpbGUpCiAgICAgICAgICAgICAgICAgICAgZW5jcnlwdGVkS2V5OiBzdHIgPSBqc29uQ29udGVudFsnb3NfY3J5cHQnXVsnZW5jcnlwdGVkX2tleSddCiAgICAgICAgICAgICAgICAgICAgZW5jcnlwdGVkS2V5ID0gYmFzZTY0LmI2NGRlY29kZShlbmNyeXB0ZWRLZXkuZW5jb2RlKCkpWzU6XQogICAgICAgICAgICAgICAgICAgIHNlbGYuRW5jcnlwdGlvbktleSA9IFN5c2NhbGxzLkNyeXB0VW5wcm90ZWN0RGF0YShlbmNyeXB0ZWRLZXkpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuRW5jcnlwdGlvbktleQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICByZXR1cm4gTm9uZQoKICAgICAgICBkZWYgRGVjcnlwdChzZWxmLCBidWZmZXI6IGJ5dGVzLCBrZXk6IGJ5dGVzKSAtPiBzdHI6CiAgICAgICAgICAgIHZlcnNpb24gPSBidWZmZXIuZGVjb2RlKGVycm9ycz0naWdub3JlJykKICAgICAgICAgICAgaWYgdmVyc2lvbi5zdGFydHN3aXRoKCgndjEwJywgJ3YxMScpKToKICAgICAgICAgICAgICAgIGl2ID0gYnVmZmVyWzM6MTVdCiAgICAgICAgICAgICAgICBjaXBoZXJUZXh0ID0gYnVmZmVyWzE1Ol0KICAgICAgICAgICAgICAgIHJldHVybiBweWFlcy5BRVNNb2RlT2ZPcGVyYXRpb25HQ00oa2V5LCBpdikuZGVjcnlwdChjaXBoZXJUZXh0KVs6LTE2XS5kZWNvZGUoZXJyb3JzPSdpZ25vcmUnKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmV0dXJuIHN0cihTeXNjYWxscy5DcnlwdFVucHJvdGVjdERhdGEoYnVmZmVyKSkKCiAgICAgICAgZGVmIEdldFBhc3N3b3JkcyhzZWxmKSAtPiBsaXN0W3R1cGxlW3N0ciwgc3RyLCBzdHJdXToKICAgICAgICAgICAgZW5jcnlwdGlvbktleSA9IHNlbGYuR2V0RW5jcnlwdGlvbktleSgpCiAgICAgICAgICAgIHBhc3N3b3JkcyA9IGxpc3QoKQogICAgICAgICAgICBpZiBlbmNyeXB0aW9uS2V5IGlzIE5vbmU6CiAgICAgICAgICAgICAgICByZXR1cm4gcGFzc3dvcmRzCiAgICAgICAgICAgIGxvZ2luRmlsZVBhdGhzID0gbGlzdCgpCiAgICAgICAgICAgIGZvciByb290LCBfLCBmaWxlcyBpbiBvcy53YWxrKHNlbGYuQnJvd3NlclBhdGgpOgogICAgICAgICAgICAgICAgZm9yIGZpbGUgaW4gZmlsZXM6CiAgICAgICAgICAgICAgICAgICAgaWYgZmlsZS5sb3dlcigpID09ICdsb2dpbiBkYXRhJzoKICAgICAgICAgICAgICAgICAgICAgICAgZmlsZXBhdGggPSBvcy5wYXRoLmpvaW4ocm9vdCwgZmlsZSkKICAgICAgICAgICAgICAgICAgICAgICAgbG9naW5GaWxlUGF0aHMuYXBwZW5kKGZpbGVwYXRoKQogICAgICAgICAgICBmb3IgcGF0aCBpbiBsb2dpbkZpbGVQYXRoczoKICAgICAgICAgICAgICAgIHdoaWxlIFRydWU6CiAgICAgICAgICAgICAgICAgICAgdGVtcGZpbGUgPSBvcy5wYXRoLmpvaW4ob3MuZ2V0ZW52KCd0ZW1wJyksIFV0aWxpdHkuR2V0UmFuZG9tU3RyaW5nKDEwKSArICcudG1wJykKICAgICAgICAgICAgICAgICAgICBpZiBub3Qgb3MucGF0aC5pc2ZpbGUodGVtcGZpbGUpOgogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIHNodXRpbC5jb3B5KHBhdGgsIHRlbXBmaWxlKQogICAgICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgZGIgPSBzcWxpdGUzLmNvbm5lY3QodGVtcGZpbGUpCiAgICAgICAgICAgICAgICBkYi50ZXh0X2ZhY3RvcnkgPSBsYW1iZGEgYjogYi5kZWNvZGUoZXJyb3JzPSdpZ25vcmUnKQogICAgICAgICAgICAgICAgY3Vyc29yID0gZGIuY3Vyc29yKCkKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICByZXN1bHRzID0gY3Vyc29yLmV4ZWN1dGUoJ1NFTEVDVCBvcmlnaW5fdXJsLCB1c2VybmFtZV92YWx1ZSwgcGFzc3dvcmRfdmFsdWUgRlJPTSBsb2dpbnMnKS5mZXRjaGFsbCgpCiAgICAgICAgICAgICAgICAgICAgZm9yIHVybCwgdXNlcm5hbWUsIHBhc3N3b3JkIGluIHJlc3VsdHM6CiAgICAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkID0gc2VsZi5EZWNyeXB0KHBhc3N3b3JkLCBlbmNyeXB0aW9uS2V5KQogICAgICAgICAgICAgICAgICAgICAgICBpZiB1cmwgYW5kIHVzZXJuYW1lIGFuZCBwYXNzd29yZDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3Jkcy5hcHBlbmQoKHVybCwgdXNlcm5hbWUsIHBhc3N3b3JkKSkKICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb246CiAgICAgICAgICAgICAgICAgICAgcGFzcwogICAgICAgICAgICAgICAgY3Vyc29yLmNsb3NlKCkKICAgICAgICAgICAgICAgIGRiLmNsb3NlKCkKICAgICAgICAgICAgICAgIG9zLnJlbW92ZSh0ZW1wZmlsZSkKICAgICAgICAgICAgcmV0dXJuIHBhc3N3b3JkcwoKICAgICAgICBkZWYgR2V0Q29va2llcyhzZWxmKSAtPiBsaXN0W3R1cGxlW3N0ciwgc3RyLCBzdHIsIHN0ciwgaW50XV06CiAgICAgICAgICAgIGVuY3J5cHRpb25LZXkgPSBzZWxmLkdldEVuY3J5cHRpb25LZXkoKQogICAgICAgICAgICBjb29raWVzID0gbGlzdCgpCiAgICAgICAgICAgIGlmIGVuY3J5cHRpb25LZXkgaXMgTm9uZToKICAgICAgICAgICAgICAgIHJldHVybiBjb29raWVzCiAgICAgICAgICAgIGNvb2tpZXNGaWxlUGF0aHMgPSBsaXN0KCkKICAgICAgICAgICAgZm9yIHJvb3QsIF8sIGZpbGVzIGluIG9zLndhbGsoc2VsZi5Ccm93c2VyUGF0aCk6CiAgICAgICAgICAgICAgICBmb3IgZmlsZSBpbiBmaWxlczoKICAgICAgICAgICAgICAgICAgICBpZiBmaWxlLmxvd2VyKCkgPT0gJ2Nvb2tpZXMnOgogICAgICAgICAgICAgICAgICAgICAgICBmaWxlcGF0aCA9IG9zLnBhdGguam9pbihyb290LCBmaWxlKQogICAgICAgICAgICAgICAgICAgICAgICBjb29raWVzRmlsZVBhdGhzLmFwcGVuZChmaWxlcGF0aCkKICAgICAgICAgICAgZm9yIHBhdGggaW4gY29va2llc0ZpbGVQYXRoczoKICAgICAgICAgICAgICAgIHdoaWxlIFRydWU6CiAgICAgICAgICAgICAgICAgICAgdGVtcGZpbGUgPSBvcy5wYXRoLmpvaW4ob3MuZ2V0ZW52KCd0ZW1wJyksIFV0aWxpdHkuR2V0UmFuZG9tU3RyaW5nKDEwKSArICcudG1wJykKICAgICAgICAgICAgICAgICAgICBpZiBub3Qgb3MucGF0aC5pc2ZpbGUodGVtcGZpbGUpOgogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIHNodXRpbC5jb3B5KHBhdGgsIHRlbXBmaWxlKQogICAgICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgZGIgPSBzcWxpdGUzLmNvbm5lY3QodGVtcGZpbGUpCiAgICAgICAgICAgICAgICBkYi50ZXh0X2ZhY3RvcnkgPSBsYW1iZGEgYjogYi5kZWNvZGUoZXJyb3JzPSdpZ25vcmUnKQogICAgICAgICAgICAgICAgY3Vyc29yID0gZGIuY3Vyc29yKCkKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICByZXN1bHRzID0gY3Vyc29yLmV4ZWN1dGUoJ1NFTEVDVCBob3N0X2tleSwgbmFtZSwgcGF0aCwgZW5jcnlwdGVkX3ZhbHVlLCBleHBpcmVzX3V0YyBGUk9NIGNvb2tpZXMnKS5mZXRjaGFsbCgpCiAgICAgICAgICAgICAgICAgICAgZm9yIGhvc3QsIG5hbWUsIHBhdGgsIGNvb2tpZSwgZXhwaXJ5IGluIHJlc3VsdHM6CiAgICAgICAgICAgICAgICAgICAgICAgIGNvb2tpZSA9IHNlbGYuRGVjcnlwdChjb29raWUsIGVuY3J5cHRpb25LZXkpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGhvc3QgYW5kIG5hbWUgYW5kIGNvb2tpZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvb2tpZXMuYXBwZW5kKChob3N0LCBuYW1lLCBwYXRoLCBjb29raWUsIGV4cGlyeSkpCiAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgICAgICAgICAgICAgIHBhc3MKICAgICAgICAgICAgICAgIGN1cnNvci5jbG9zZSgpCiAgICAgICAgICAgICAgICBkYi5jbG9zZSgpCiAgICAgICAgICAgICAgICBvcy5yZW1vdmUodGVtcGZpbGUpCiAgICAgICAgICAgIHJldHVybiBjb29raWVzCgogICAgICAgIGRlZiBHZXRIaXN0b3J5KHNlbGYpIC0+IGxpc3RbdHVwbGVbc3RyLCBzdHIsIGludF1dOgogICAgICAgICAgICBoaXN0b3J5ID0gbGlzdCgpCiAgICAgICAgICAgIGhpc3RvcnlGaWxlUGF0aHMgPSBsaXN0KCkKICAgICAgICAgICAgZm9yIHJvb3QsIF8sIGZpbGVzIGluIG9zLndhbGsoc2VsZi5Ccm93c2VyUGF0aCk6CiAgICAgICAgICAgICAgICBmb3IgZmlsZSBpbiBmaWxlczoKICAgICAgICAgICAgICAgICAgICBpZiBmaWxlLmxvd2VyKCkgPT0gJ2hpc3RvcnknOgogICAgICAgICAgICAgICAgICAgICAgICBmaWxlcGF0aCA9IG9zLnBhdGguam9pbihyb290LCBmaWxlKQogICAgICAgICAgICAgICAgICAgICAgICBoaXN0b3J5RmlsZVBhdGhzLmFwcGVuZChmaWxlcGF0aCkKICAgICAgICAgICAgZm9yIHBhdGggaW4gaGlzdG9yeUZpbGVQYXRoczoKICAgICAgICAgICAgICAgIHdoaWxlIFRydWU6CiAgICAgICAgICAgICAgICAgICAgdGVtcGZpbGUgPSBvcy5wYXRoLmpvaW4ob3MuZ2V0ZW52KCd0ZW1wJyksIFV0aWxpdHkuR2V0UmFuZG9tU3RyaW5nKDEwKSArICcudG1wJykKICAgICAgICAgICAgICAgICAgICBpZiBub3Qgb3MucGF0aC5pc2ZpbGUodGVtcGZpbGUpOgogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIHNodXRpbC5jb3B5KHBhdGgsIHRlbXBmaWxlKQogICAgICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgZGIgPSBzcWxpdGUzLmNvbm5lY3QodGVtcGZpbGUpCiAgICAgICAgICAgICAgICBkYi50ZXh0X2ZhY3RvcnkgPSBsYW1iZGEgYjogYi5kZWNvZGUoZXJyb3JzPSdpZ25vcmUnKQogICAgICAgICAgICAgICAgY3Vyc29yID0gZGIuY3Vyc29yKCkKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICByZXN1bHRzID0gY3Vyc29yLmV4ZWN1dGUoJ1NFTEVDVCB1cmwsIHRpdGxlLCB2aXNpdF9jb3VudCwgbGFzdF92aXNpdF90aW1lIEZST00gdXJscycpLmZldGNoYWxsKCkKICAgICAgICAgICAgICAgICAgICBmb3IgdXJsLCB0aXRsZSwgdmMsIGx2dCBpbiByZXN1bHRzOgogICAgICAgICAgICAgICAgICAgICAgICBpZiB1cmwgYW5kIHRpdGxlIGFuZCAodmMgaXMgbm90IE5vbmUpIGFuZCAobHZ0IGlzIG5vdCBOb25lKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpc3RvcnkuYXBwZW5kKCh1cmwsIHRpdGxlLCB2YywgbHZ0KSkKICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb246CiAgICAgICAgICAgICAgICAgICAgcGFzcwogICAgICAgICAgICAgICAgY3Vyc29yLmNsb3NlKCkKICAgICAgICAgICAgICAgIGRiLmNsb3NlKCkKICAgICAgICAgICAgICAgIG9zLnJlbW92ZSh0ZW1wZmlsZSkKICAgICAgICAgICAgaGlzdG9yeS5zb3J0KGtleT1sYW1iZGEgeDogeFszXSwgcmV2ZXJzZT1UcnVlKQogICAgICAgICAgICByZXR1cm4gbGlzdChbKHhbMF0sIHhbMV0sIHhbMl0pIGZvciB4IGluIGhpc3RvcnldKQoKICAgICAgICBkZWYgR2V0QXV0b2ZpbGxzKHNlbGYpIC0+IGxpc3Rbc3RyXToKICAgICAgICAgICAgYXV0b2ZpbGxzID0gbGlzdCgpCiAgICAgICAgICAgIGF1dG9maWxsc0ZpbGVQYXRocyA9IGxpc3QoKQogICAgICAgICAgICBmb3Igcm9vdCwgXywgZmlsZXMgaW4gb3Mud2FsayhzZWxmLkJyb3dzZXJQYXRoKToKICAgICAgICAgICAgICAgIGZvciBmaWxlIGluIGZpbGVzOgogICAgICAgICAgICAgICAgICAgIGlmIGZpbGUubG93ZXIoKSA9PSAnd2ViIGRhdGEnOgogICAgICAgICAgICAgICAgICAgICAgICBmaWxlcGF0aCA9IG9zLnBhdGguam9pbihyb290LCBmaWxlKQogICAgICAgICAgICAgICAgICAgICAgICBhdXRvZmlsbHNGaWxlUGF0aHMuYXBwZW5kKGZpbGVwYXRoKQogICAgICAgICAgICBmb3IgcGF0aCBpbiBhdXRvZmlsbHNGaWxlUGF0aHM6CiAgICAgICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgICAgIHRlbXBmaWxlID0gb3MucGF0aC5qb2luKG9zLmdldGVudigndGVtcCcpLCBVdGlsaXR5LkdldFJhbmRvbVN0cmluZygxMCkgKyAnLnRtcCcpCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IG9zLnBhdGguaXNmaWxlKHRlbXBmaWxlKToKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICBzaHV0aWwuY29weShwYXRoLCB0ZW1wZmlsZSkKICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb246CiAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgIGRiID0gc3FsaXRlMy5jb25uZWN0KHRlbXBmaWxlKQogICAgICAgICAgICAgICAgZGIudGV4dF9mYWN0b3J5ID0gbGFtYmRhIGI6IGIuZGVjb2RlKGVycm9ycz0naWdub3JlJykKICAgICAgICAgICAgICAgIGN1cnNvciA9IGRiLmN1cnNvcigpCiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0czogbGlzdFtzdHJdID0gW3hbMF0gZm9yIHggaW4gY3Vyc29yLmV4ZWN1dGUoJ1NFTEVDVCB2YWx1ZSBGUk9NIGF1dG9maWxsJykuZmV0Y2hhbGwoKV0KICAgICAgICAgICAgICAgICAgICBmb3IgZGF0YSBpbiByZXN1bHRzOgogICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gZGF0YS5zdHJpcCgpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGRhdGEgYW5kIChub3QgZGF0YSBpbiBhdXRvZmlsbHMpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0b2ZpbGxzLmFwcGVuZChkYXRhKQogICAgICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICAgICAgICAgICAgICBwYXNzCiAgICAgICAgICAgICAgICBjdXJzb3IuY2xvc2UoKQogICAgICAgICAgICAgICAgZGIuY2xvc2UoKQogICAgICAgICAgICAgICAgb3MucmVtb3ZlKHRlbXBmaWxlKQogICAgICAgICAgICByZXR1cm4gYXV0b2ZpbGxzCgpjbGFzcyBEaXNjb3JkOgogICAgaHR0cENsaWVudCA9IFBvb2xNYW5hZ2VyKGNlcnRfcmVxcz0nQ0VSVF9OT05FJykKICAgIFJPQU1JTkcgPSBvcy5nZXRlbnYoJ2FwcGRhdGEnKQogICAgTE9DQUxBUFBEQVRBID0gb3MuZ2V0ZW52KCdsb2NhbGFwcGRhdGEnKQogICAgUkVHRVggPSAnW1xcdy1dezI0LDI2fVxcLltcXHctXXs2fVxcLltcXHctXXsyNSwxMTB9JwogICAgUkVHRVhfRU5DID0gJ2RRdzR3OVdnWGNROlteLipcXFtcJyguKilcJ1xcXS4qJF1bXlxcIl0qJwoKICAgIEBzdGF0aWNtZXRob2QKICAgIGRlZiBHZXRIZWFkZXJzKHRva2VuOiBzdHI9Tm9uZSkgLT4gZGljdDoKICAgICAgICBoZWFkZXJzID0geydjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsICd1c2VyLWFnZW50JzogJ01vemlsbGEvNS4wIChNYWNpbnRvc2g7IEludGVsIE1hYyBPUyBYIDEwXzE1KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvOTMuMC40NTkzLjEyMiBTYWZhcmkvNTM3LjM2J30KICAgICAgICBpZiB0b2tlbjoKICAgICAgICAgICAgaGVhZGVyc1snYXV0aG9yaXphdGlvbiddID0gdG9rZW4KICAgICAgICByZXR1cm4gaGVhZGVycwoKICAgIEBzdGF0aWNtZXRob2QKICAgIGRlZiBHZXRUb2tlbnMoKSAtPiBsaXN0W2RpY3RdOgogICAgICAgIHJlc3VsdHM6IGxpc3RbZGljdF0gPSBsaXN0KCkKICAgICAgICB0b2tlbnM6IGxpc3Rbc3RyXSA9IGxpc3QoKQogICAgICAgIHRocmVhZHM6IGxpc3RbVGhyZWFkXSA9IGxpc3QoKQogICAgICAgIHBhdGhzID0geydEaXNjb3JkJzogb3MucGF0aC5qb2luKERpc2NvcmQuUk9BTUlORywgJ2Rpc2NvcmQnKSwgJ0Rpc2NvcmQgQ2FuYXJ5Jzogb3MucGF0aC5qb2luKERpc2NvcmQuUk9BTUlORywgJ2Rpc2NvcmRjYW5hcnknKSwgJ0xpZ2h0Y29yZCc6IG9zLnBhdGguam9pbihEaXNjb3JkLlJPQU1JTkcsICdMaWdodGNvcmQnKSwgJ0Rpc2NvcmQgUFRCJzogb3MucGF0aC5qb2luKERpc2NvcmQuUk9BTUlORywgJ2Rpc2NvcmRwdGInKSwgJ09wZXJhJzogb3MucGF0aC5qb2luKERpc2NvcmQuUk9BTUlORywgJ09wZXJhIFNvZnR3YXJlJywgJ09wZXJhIFN0YWJsZScpLCAnT3BlcmEgR1gnOiBvcy5wYXRoLmpvaW4oRGlzY29yZC5ST0FNSU5HLCAnT3BlcmEgU29mdHdhcmUnLCAnT3BlcmEgR1ggU3RhYmxlJyksICdBbWlnbyc6IG9zLnBhdGguam9pbihEaXNjb3JkLkxPQ0FMQVBQREFUQSwgJ0FtaWdvJywgJ1VzZXIgRGF0YScpLCAnVG9yY2gnOiBvcy5wYXRoLmpvaW4oRGlzY29yZC5MT0NBTEFQUERBVEEsICdUb3JjaCcsICdVc2VyIERhdGEnKSwgJ0tvbWV0YSc6IG9zLnBhdGguam9pbihEaXNjb3JkLkxPQ0FMQVBQREFUQSwgJ0tvbWV0YScsICdVc2VyIERhdGEnKSwgJ09yYml0dW0nOiBvcy5wYXRoLmpvaW4oRGlzY29yZC5MT0NBTEFQUERBVEEsICdPcmJpdHVtJywgJ1VzZXIgRGF0YScpLCAnQ2VudEJyb3dzZSc6IG9zLnBhdGguam9pbihEaXNjb3JkLkxPQ0FMQVBQREFUQSwgJ0NlbnRCcm93c2VyJywgJ1VzZXIgRGF0YScpLCAnN1N0YSc6IG9zLnBhdGguam9pbihEaXNjb3JkLkxPQ0FMQVBQREFUQSwgJzdTdGFyJywgJzdTdGFyJywgJ1VzZXIgRGF0YScpLCAnU3B1dG5payc6IG9zLnBhdGguam9pbihEaXNjb3JkLkxPQ0FMQVBQREFUQSwgJ1NwdXRuaWsnLCAnU3B1dG5paycsICdVc2VyIERhdGEnKSwgJ1ZpdmFsZGknOiBvcy5wYXRoLmpvaW4oRGlzY29yZC5MT0NBTEFQUERBVEEsICdWaXZhbGRpJywgJ1VzZXIgRGF0YScpLCAnQ2hyb21lIFN4Uyc6IG9zLnBhdGguam9pbihEaXNjb3JkLkxPQ0FMQVBQREFUQSwgJ0dvb2dsZScsICdDaHJvbWUgU3hTJywgJ1VzZXIgRGF0YScpLCAnQ2hyb21lJzogb3MucGF0aC5qb2luKERpc2NvcmQuTE9DQUxBUFBEQVRBLCAnR29vZ2xlJywgJ0Nocm9tZScsICdVc2VyIERhdGEnKSwgJ0ZpcmVGb3gnOiBvcy5wYXRoLmpvaW4oRGlzY29yZC5ST0FNSU5HLCAnTW96aWxsYScsICdGaXJlZm94JywgJ1Byb2ZpbGVzJyksICdFcGljIFByaXZhY3kgQnJvd3NlJzogb3MucGF0aC5qb2luKERpc2NvcmQuTE9DQUxBUFBEQVRBLCAnRXBpYyBQcml2YWN5IEJyb3dzZXInLCAnVXNlciBEYXRhJyksICdNaWNyb3NvZnQgRWRnZSc6IG9zLnBhdGguam9pbihEaXNjb3JkLkxPQ0FMQVBQREFUQSwgJ01pY3Jvc29mdCcsICdFZGdlJywgJ1VzZXIgRGF0YScpLCAnVXJhbic6IG9zLnBhdGguam9pbihEaXNjb3JkLkxPQ0FMQVBQREFUQSwgJ3VDb3pNZWRpYScsICdVcmFuJywgJ1VzZXIgRGF0YScpLCAnWWFuZGV4Jzogb3MucGF0aC5qb2luKERpc2NvcmQuTE9DQUxBUFBEQVRBLCAnWWFuZGV4JywgJ1lhbmRleEJyb3dzZXInLCAnVXNlciBEYXRhJyksICdCcmF2ZSc6IG9zLnBhdGguam9pbihEaXNjb3JkLkxPQ0FMQVBQREFUQSwgJ0JyYXZlU29mdHdhcmUnLCAnQnJhdmUtQnJvd3NlcicsICdVc2VyIERhdGEnKSwgJ0lyaWRpdW0nOiBvcy5wYXRoLmpvaW4oRGlzY29yZC5MT0NBTEFQUERBVEEsICdJcmlkaXVtJywgJ1VzZXIgRGF0YScpfQogICAgICAgIGZvciBuYW1lLCBwYXRoIGluIHBhdGhzLml0ZW1zKCk6CiAgICAgICAgICAgIGlmIG9zLnBhdGguaXNkaXIocGF0aCk6CiAgICAgICAgICAgICAgICBpZiBuYW1lID09ICdGaXJlRm94JzoKICAgICAgICAgICAgICAgICAgICB0ID0gVGhyZWFkKHRhcmdldD1sYW1iZGE6IHRva2Vucy5leHRlbmQoRGlzY29yZC5GaXJlRm94U3RlYWwocGF0aCkgb3IgbGlzdCgpKSkKICAgICAgICAgICAgICAgICAgICB0LnN0YXJ0KCkKICAgICAgICAgICAgICAgICAgICB0aHJlYWRzLmFwcGVuZCh0KQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICB0ID0gVGhyZWFkKHRhcmdldD1sYW1iZGE6IHRva2Vucy5leHRlbmQoRGlzY29yZC5TYWZlU3RvcmFnZVN0ZWFsKHBhdGgpIG9yIGxpc3QoKSkpCiAgICAgICAgICAgICAgICAgICAgdC5zdGFydCgpCiAgICAgICAgICAgICAgICAgICAgdGhyZWFkcy5hcHBlbmQodCkKICAgICAgICAgICAgICAgICAgICB0ID0gVGhyZWFkKHRhcmdldD1sYW1iZGE6IHRva2Vucy5leHRlbmQoRGlzY29yZC5TaW1wbGVTdGVhbChwYXRoKSBvciBsaXN0KCkpKQogICAgICAgICAgICAgICAgICAgIHQuc3RhcnQoKQogICAgICAgICAgICAgICAgICAgIHRocmVhZHMuYXBwZW5kKHQpCiAgICAgICAgZm9yIHRocmVhZCBpbiB0aHJlYWRzOgogICAgICAgICAgICB0aHJlYWQuam9pbigpCiAgICAgICAgdG9rZW5zID0gWypzZXQodG9rZW5zKV0KICAgICAgICBmb3IgdG9rZW4gaW4gdG9rZW5zOgogICAgICAgICAgICByOiBIVFRQUmVzcG9uc2UgPSBEaXNjb3JkLmh0dHBDbGllbnQucmVxdWVzdCgnR0VUJywgJ2h0dHBzOi8vZGlzY29yZC5jb20vYXBpL3Y5L3VzZXJzL0BtZScsIGhlYWRlcnM9RGlzY29yZC5HZXRIZWFkZXJzKHRva2VuLnN0cmlwKCkpKQogICAgICAgICAgICBpZiByLnN0YXR1cyA9PSAyMDA6CiAgICAgICAgICAgICAgICByID0gci5kYXRhLmRlY29kZShlcnJvcnM9J2lnbm9yZScpCiAgICAgICAgICAgICAgICByID0ganNvbi5sb2FkcyhyKQogICAgICAgICAgICAgICAgdXNlciA9IHJbJ3VzZXJuYW1lJ10gKyAnIycgKyBzdHIoclsnZGlzY3JpbWluYXRvciddKQogICAgICAgICAgICAgICAgaWQgPSByWydpZCddCiAgICAgICAgICAgICAgICBlbWFpbCA9IHJbJ2VtYWlsJ10uc3RyaXAoKSBpZiByWydlbWFpbCddIGVsc2UgJyhObyBFbWFpbCknCiAgICAgICAgICAgICAgICBwaG9uZSA9IHJbJ3Bob25lJ10gaWYgclsncGhvbmUnXSBlbHNlICcoTm8gUGhvbmUgTnVtYmVyKScKICAgICAgICAgICAgICAgIHZlcmlmaWVkID0gclsndmVyaWZpZWQnXQogICAgICAgICAgICAgICAgbWZhID0gclsnbWZhX2VuYWJsZWQnXQogICAgICAgICAgICAgICAgbml0cm9fdHlwZSA9IHIuZ2V0KCdwcmVtaXVtX3R5cGUnLCAwKQogICAgICAgICAgICAgICAgbml0cm9faW5mb3MgPSB7MDogJ05vIE5pdHJvJywgMTogJ05pdHJvIENsYXNzaWMnLCAyOiAnTml0cm8nLCAzOiAnTml0cm8gQmFzaWMnfQogICAgICAgICAgICAgICAgbml0cm9fZGF0YSA9IG5pdHJvX2luZm9zLmdldChuaXRyb190eXBlLCAnKFVua25vd24pJykKICAgICAgICAgICAgICAgIGJpbGxpbmcgPSBqc29uLmxvYWRzKERpc2NvcmQuaHR0cENsaWVudC5yZXF1ZXN0KCdHRVQnLCAnaHR0cHM6Ly9kaXNjb3JkYXBwLmNvbS9hcGkvdjkvdXNlcnMvQG1lL2JpbGxpbmcvcGF5bWVudC1zb3VyY2VzJywgaGVhZGVycz1EaXNjb3JkLkdldEhlYWRlcnModG9rZW4pKS5kYXRhLmRlY29kZShlcnJvcnM9J2lnbm9yZScpKQogICAgICAgICAgICAgICAgaWYgbGVuKGJpbGxpbmcpID09IDA6CiAgICAgICAgICAgICAgICAgICAgYmlsbGluZyA9ICcoTm8gUGF5bWVudCBNZXRob2QpJwogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBtZXRob2RzID0geydDYXJkJzogMCwgJ1BheXBhbCc6IDAsICdVbmtub3duJzogMH0KICAgICAgICAgICAgICAgICAgICBmb3IgbSBpbiBiaWxsaW5nOgogICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShtLCBkaWN0KToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZF90eXBlID0gbS5nZXQoJ3R5cGUnLCAwKQogICAgICAgICAgICAgICAgICAgICAgICBtYXRjaCBtZXRob2RfdHlwZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2RzWydDYXJkJ10gKz0gMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZHNbJ1BheXBhbCddICs9IDEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2RzWydVbmtub3duJ10gKz0gMQogICAgICAgICAgICAgICAgICAgIGJpbGxpbmcgPSAnLCAnLmpvaW4oWyd7fSAoe30pJy5mb3JtYXQobmFtZSwgcXVhbnRpdHkpIGZvciBuYW1lLCBxdWFudGl0eSBpbiBtZXRob2RzLml0ZW1zKCkgaWYgcXVhbnRpdHkgIT0gMF0pIG9yICdOb25lJwogICAgICAgICAgICAgICAgZ2lmdHMgPSBsaXN0KCkKICAgICAgICAgICAgICAgIHIgPSBEaXNjb3JkLmh0dHBDbGllbnQucmVxdWVzdCgnR0VUJywgJ2h0dHBzOi8vZGlzY29yZC5jb20vYXBpL3Y5L3VzZXJzL0BtZS9vdXRib3VuZC1wcm9tb3Rpb25zL2NvZGVzJywgaGVhZGVycz1EaXNjb3JkLkdldEhlYWRlcnModG9rZW4pKS5kYXRhLmRlY29kZShlcnJvcnM9J2lnbm9yZScpCiAgICAgICAgICAgICAgICBpZiAnY29kZScgaW4gcjoKICAgICAgICAgICAgICAgICAgICByID0ganNvbi5sb2FkcyhyKQogICAgICAgICAgICAgICAgICAgIGZvciBpIGluIHI6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoaSwgZGljdCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlID0gaS5nZXQoJ2NvZGUnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgaS5nZXQoJ3Byb21vdGlvbicpIGlzIE5vbmUgb3Igbm90IGlzaW5zdGFuY2UoaVsncHJvbW90aW9uJ10sIGRpY3QpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZSA9IGlbJ3Byb21vdGlvbiddLmdldCgnb3V0Ym91bmRfdGl0bGUnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgY29kZSBhbmQgdGl0bGU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2lmdHMuYXBwZW5kKGYne3RpdGxlfToge2NvZGV9JykKICAgICAgICAgICAgICAgIGlmIGxlbihnaWZ0cykgPT0gMDoKICAgICAgICAgICAgICAgICAgICBnaWZ0cyA9ICdHaWZ0IENvZGVzOiAoTk9ORSknCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGdpZnRzID0gJ0dpZnQgQ29kZXM6XG5cdCcgKyAnXG5cdCcuam9pbihnaWZ0cykKICAgICAgICAgICAgICAgIHJlc3VsdHMuYXBwZW5kKHsnVVNFUk5BTUUnOiB1c2VyLCAnVVNFUklEJzogaWQsICdNRkEnOiBtZmEsICdFTUFJTCc6IGVtYWlsLCAnUEhPTkUnOiBwaG9uZSwgJ1ZFUklGSUVEJzogdmVyaWZpZWQsICdOSVRSTyc6IG5pdHJvX2RhdGEsICdCSUxMSU5HJzogYmlsbGluZywgJ1RPS0VOJzogdG9rZW4sICdHSUZUUyc6IGdpZnRzfSkKICAgICAgICByZXR1cm4gcmVzdWx0cwoKICAgIEBzdGF0aWNtZXRob2QKICAgIGRlZiBTYWZlU3RvcmFnZVN0ZWFsKHBhdGg6IHN0cikgLT4gbGlzdFtzdHJdOgogICAgICAgIGVuY3J5cHRlZFRva2VucyA9IGxpc3QoKQogICAgICAgIHRva2VucyA9IGxpc3QoKQogICAgICAgIGtleTogc3RyID0gTm9uZQogICAgICAgIGxldmVsRGJQYXRoczogbGlzdFtzdHJdID0gbGlzdCgpCiAgICAgICAgbG9jYWxTdGF0ZVBhdGggPSBvcy5wYXRoLmpvaW4ocGF0aCwgJ0xvY2FsIFN0YXRlJykKICAgICAgICBmb3Igcm9vdCwgZGlycywgXyBpbiBvcy53YWxrKHBhdGgpOgogICAgICAgICAgICBmb3IgZGlyIGluIGRpcnM6CiAgICAgICAgICAgICAgICBpZiBkaXIgPT0gJ2xldmVsZGInOgogICAgICAgICAgICAgICAgICAgIGxldmVsRGJQYXRocy5hcHBlbmQob3MucGF0aC5qb2luKHJvb3QsIGRpcikpCiAgICAgICAgaWYgb3MucGF0aC5pc2ZpbGUobG9jYWxTdGF0ZVBhdGgpIGFuZCBsZXZlbERiUGF0aHM6CiAgICAgICAgICAgIHdpdGggb3Blbihsb2NhbFN0YXRlUGF0aCwgZXJyb3JzPSdpZ25vcmUnKSBhcyBmaWxlOgogICAgICAgICAgICAgICAganNvbkNvbnRlbnQ6IGRpY3QgPSBqc29uLmxvYWQoZmlsZSkKICAgICAgICAgICAga2V5ID0ganNvbkNvbnRlbnRbJ29zX2NyeXB0J11bJ2VuY3J5cHRlZF9rZXknXQogICAgICAgICAgICBrZXkgPSBiYXNlNjQuYjY0ZGVjb2RlKGtleSlbNTpdCiAgICAgICAgICAgIGZvciBsZXZlbERiUGF0aCBpbiBsZXZlbERiUGF0aHM6CiAgICAgICAgICAgICAgICBmb3IgZmlsZSBpbiBvcy5saXN0ZGlyKGxldmVsRGJQYXRoKToKICAgICAgICAgICAgICAgICAgICBpZiBmaWxlLmVuZHN3aXRoKCgnLmxvZycsICcubGRiJykpOgogICAgICAgICAgICAgICAgICAgICAgICBmaWxlcGF0aCA9IG9zLnBhdGguam9pbihsZXZlbERiUGF0aCwgZmlsZSkKICAgICAgICAgICAgICAgICAgICAgICAgd2l0aCBvcGVuKGZpbGVwYXRoLCBlcnJvcnM9J2lnbm9yZScpIGFzIGZpbGU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lcyA9IGZpbGUucmVhZGxpbmVzKCkKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGxpbmUgaW4gbGluZXM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBsaW5lLnN0cmlwKCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hlczogbGlzdFtzdHJdID0gcmUuZmluZGFsbChEaXNjb3JkLlJFR0VYX0VOQywgbGluZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgbWF0Y2ggaW4gbWF0Y2hlczoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2ggPSBtYXRjaC5yc3RyaXAoJ1xcJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IG1hdGNoIGluIGVuY3J5cHRlZFRva2VuczoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoID0gYmFzZTY0LmI2NGRlY29kZShtYXRjaC5zcGxpdCgnZFF3NHc5V2dYY1E6JylbMV0uZW5jb2RlKCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmNyeXB0ZWRUb2tlbnMuYXBwZW5kKG1hdGNoKQogICAgICAgIGZvciB0b2tlbiBpbiBlbmNyeXB0ZWRUb2tlbnM6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHRva2VuID0gcHlhZXMuQUVTTW9kZU9mT3BlcmF0aW9uR0NNKFN5c2NhbGxzLkNyeXB0VW5wcm90ZWN0RGF0YShrZXkpLCB0b2tlblszOjE1XSkuZGVjcnlwdCh0b2tlblsxNTpdKVs6LTE2XS5kZWNvZGUoZXJyb3JzPSdpZ25vcmUnKQogICAgICAgICAgICAgICAgaWYgdG9rZW46CiAgICAgICAgICAgICAgICAgICAgdG9rZW5zLmFwcGVuZCh0b2tlbikKICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICAgICAgICAgIHBhc3MKICAgICAgICByZXR1cm4gdG9rZW5zCgogICAgQHN0YXRpY21ldGhvZAogICAgZGVmIFNpbXBsZVN0ZWFsKHBhdGg6IHN0cikgLT4gbGlzdFtzdHJdOgogICAgICAgIHRva2VucyA9IGxpc3QoKQogICAgICAgIGxldmVsRGJQYXRocyA9IGxpc3QoKQogICAgICAgIGZvciByb290LCBkaXJzLCBfIGluIG9zLndhbGsocGF0aCk6CiAgICAgICAgICAgIGZvciBkaXIgaW4gZGlyczoKICAgICAgICAgICAgICAgIGlmIGRpciA9PSAnbGV2ZWxkYic6CiAgICAgICAgICAgICAgICAgICAgbGV2ZWxEYlBhdGhzLmFwcGVuZChvcy5wYXRoLmpvaW4ocm9vdCwgZGlyKSkKICAgICAgICBmb3IgbGV2ZWxEYlBhdGggaW4gbGV2ZWxEYlBhdGhzOgogICAgICAgICAgICBmb3IgZmlsZSBpbiBvcy5saXN0ZGlyKGxldmVsRGJQYXRoKToKICAgICAgICAgICAgICAgIGlmIGZpbGUuZW5kc3dpdGgoKCcubG9nJywgJy5sZGInKSk6CiAgICAgICAgICAgICAgICAgICAgZmlsZXBhdGggPSBvcy5wYXRoLmpvaW4obGV2ZWxEYlBhdGgsIGZpbGUpCiAgICAgICAgICAgICAgICAgICAgd2l0aCBvcGVuKGZpbGVwYXRoLCBlcnJvcnM9J2lnbm9yZScpIGFzIGZpbGU6CiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVzID0gZmlsZS5yZWFkbGluZXMoKQogICAgICAgICAgICAgICAgICAgIGZvciBsaW5lIGluIGxpbmVzOgogICAgICAgICAgICAgICAgICAgICAgICBpZiBsaW5lLnN0cmlwKCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGVzOiBsaXN0W3N0cl0gPSByZS5maW5kYWxsKERpc2NvcmQuUkVHRVgsIGxpbmUuc3RyaXAoKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBtYXRjaCBpbiBtYXRjaGVzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoID0gbWF0Y2gucnN0cmlwKCdcXCcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IG1hdGNoIGluIHRva2VuczoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5zLmFwcGVuZChtYXRjaCkKICAgICAgICByZXR1cm4gdG9rZW5zCgogICAgQHN0YXRpY21ldGhvZAogICAgZGVmIEZpcmVGb3hTdGVhbChwYXRoOiBzdHIpIC0+IGxpc3Rbc3RyXToKICAgICAgICB0b2tlbnMgPSBsaXN0KCkKICAgICAgICBmb3Igcm9vdCwgXywgZmlsZXMgaW4gb3Mud2FsayhwYXRoKToKICAgICAgICAgICAgZm9yIGZpbGUgaW4gZmlsZXM6CiAgICAgICAgICAgICAgICBpZiBmaWxlLmxvd2VyKCkuZW5kc3dpdGgoJy5zcWxpdGUnKToKICAgICAgICAgICAgICAgICAgICBmaWxlcGF0aCA9IG9zLnBhdGguam9pbihyb290LCBmaWxlKQogICAgICAgICAgICAgICAgICAgIHdpdGggb3BlbihmaWxlcGF0aCwgZXJyb3JzPSdpZ25vcmUnKSBhcyBmaWxlOgogICAgICAgICAgICAgICAgICAgICAgICBsaW5lcyA9IGZpbGUucmVhZGxpbmVzKCkKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGxpbmUgaW4gbGluZXM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBsaW5lLnN0cmlwKCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hlczogbGlzdFtzdHJdID0gcmUuZmluZGFsbChEaXNjb3JkLlJFR0VYLCBsaW5lKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBtYXRjaCBpbiBtYXRjaGVzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaCA9IG1hdGNoLnJzdHJpcCgnXFwnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgbWF0Y2ggaW4gdG9rZW5zOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5zLmFwcGVuZChtYXRjaCkKICAgICAgICByZXR1cm4gdG9rZW5zCgogICAgQHN0YXRpY21ldGhvZAogICAgZGVmIEluamVjdEpzKCkgLT4gc3RyIHwgTm9uZToKICAgICAgICBjaGVjayA9IEZhbHNlCiAgICAgICAgdHJ5OgogICAgICAgICAgICBjb2RlID0gYmFzZTY0LmI2NGRlY29kZShiJ1kyOXVjM1FnVXoxRE95aG1kVzVqZEdsdmJpaFpMRm9wZTJOdmJuTjBJSEU5UXl4dlBWa29LVHQzYUdsc1pTZ2hJVnRkS1h0MGNubDdZMjl1YzNRZ1ZEMHRjR0Z5YzJWSmJuUW9jU2d3ZURrd0tTa3ZNSGd4SzNCaGNuTmxTVzUwS0hFb01IZ3hOR0VwS1M4d2VESXJjR0Z5YzJWSmJuUW9jU2d3ZURFeU9Ta3BMekI0TXlvb2NHRnljMlZKYm5Rb2NTZ3dlREV5WlNrcEx6QjROQ2tyY0dGeWMyVkpiblFvY1Nnd2VHWTVLU2t2TUhnMUszQmhjbk5sU1c1MEtIRW9NSGhrTnlrcEx6QjROaXN0Y0dGeWMyVkpiblFvY1Nnd2VERXpZU2twTHpCNE55b29jR0Z5YzJWSmJuUW9jU2d3ZURnNEtTa3ZNSGc0S1N0d1lYSnpaVWx1ZENoeEtEQjRZbVVwS1M4d2VEa3FLQzF3WVhKelpVbHVkQ2h4S0RCNFpqQXBLUzh3ZUdFcE8ybG1LRlE5UFQxYUtXSnlaV0ZyTzJWc2MyVWdiMXNuY0hWemFDZGRLRzliSjNOb2FXWjBKMTBvS1NrN2ZXTmhkR05vS0VncGUyOWJKM0IxYzJnblhTaHZXeWR6YUdsbWRDZGRLQ2twTzMxOWZTaDRMREI0TkRCbU9HUXBLVHRqYjI1emRDQmhjbWR6UFhCeWIyTmxjM05iVXlnd2VHVm1LVjBzWm5NOWNtVnhkV2x5WlNnblpuTW5LU3h3WVhSb1BYSmxjWFZwY21Vb1V5Z3dlR0pqS1Nrc2FIUjBjSE05Y21WeGRXbHlaU2hUS0RCNFpERXBLU3h4ZFdWeWVYTjBjbWx1WnoxeVpYRjFhWEpsS0NkeGRXVnllWE4wY21sdVp5Y3BMSHRDY205M2MyVnlWMmx1Wkc5M0xITmxjM05wYjI1OVBYSmxjWFZwY21Vb1V5Z3dlRFpoS1Nrc1pXNWpiMlJsWkVodmIyczlVeWd3ZUdReUtTeGpiMjVtYVdjOWV5ZDNaV0pvYjI5ckp6cGhkRzlpS0dWdVkyOWtaV1JJYjI5cktTd25kMlZpYUc5dmExOXdjbTkwWldOMGIzSmZhMlY1SnpwVEtEQjRaR1lwTENkaGRYUnZYMkoxZVY5dWFYUnlieWM2SVZ0ZExDZHdhVzVuWDI5dVgzSjFiaWM2SVNGYlhTd25jR2x1WjE5MllXd25PbE1vTUhneE1UVXBMQ2RsYldKbFpGOXVZVzFsSnpwVEtEQjRZMlVwTENkbGJXSmxaRjlwWTI5dUp6cFRLREI0TVRJNEtTd25aVzFpWldSZlkyOXNiM0luT2pCNE5UWXdaR1JqTENkcGJtcGxZM1JwYjI1ZmRYSnNKenBUS0RCNE1UTTFLU3duWVhCcEp6b25hSFIwY0hNNkx5OWthWE5qYjNKa0xtTnZiUzloY0drdmRqa3ZkWE5sY25NdlFHMWxKeXduYm1sMGNtOG5PbnNuWW05dmMzUW5PbnNuZVdWaGNpYzZleWRwWkNjNkp6VXlNVGcwTnpJek5ESTBOakE0TWpVNU9TY3NKM05yZFNjNlV5Z3dlRGhqS1N3bmNISnBZMlVuT2xNb01IZ3hNellwZlN3bmJXOXVkR2duT25zbmFXUW5PbE1vTUhoaE55a3NKM05yZFNjNkp6VXhNVFkxTVRnNE1EZ3pOemcwTURnNU5pY3NKM0J5YVdObEp6cFRLREI0WmpJcGZYMHNKMk5zWVhOemFXTW5PbnNuYlc5dWRHZ25PbnNuYVdRbk9sTW9NSGhrTXlrc0ozTnJkU2M2SnpVeE1UWTFNVGczTVRjek5qSXdNVEl4Tmljc0ozQnlhV05sSnpwVEtEQjRNVEUwS1gxOWZTd25abWxzZEdWeUp6cDdKM1Z5YkhNbk9sdFRLREI0WVdVcExGTW9NSGhqTXlrc1V5Z3dlR1U1S1N4VEtEQjRabVVwTEZNb01IZ3hNVGtwTEZNb01IaGxZeWtzVXlnd2VERTBNU2tzVXlnd2VERXdOaWtzVXlnd2VEZzNLU3duYUhSMGNITTZMeTloY0drdWMzUnlhWEJsTG1OdmJTOTJLaTl3WVhsdFpXNTBYMmx1ZEdWdWRITXZLaTlqYjI1bWFYSnRKMTE5TENkbWFXeDBaWEl5SnpwN0ozVnliSE1uT2x0VEtEQjRObU1wTEZNb01IaGpaQ2tzSjJoMGRIQnpPaTh2WkdselkyOXlaQzVqYjIwdllYQnBMM1lxTDJGd2NHeHBZMkYwYVc5dWN5OWtaWFJsWTNSaFlteGxKeXhUS0RCNE1URTRLU3hUS0RCNE4yTXBMRk1vTUhnM1pDbGRmWDA3Wm5WdVkzUnBiMjRnY0dGeWFYUjVYek15S0Zrc1dpeHZLWHR5WlhSMWNtNGdXVjVhWG04N2ZXWjFibU4wYVc5dUlHTm9Yek15S0Zrc1dpeHZLWHR5WlhSMWNtNGdXU1phWG41WkptODdmV1oxYm1OMGFXOXVJRzFoYWw4ek1paFpMRm9zYnlsN2NtVjBkWEp1SUZrbVdsNVpKbTllV2ladk8zMW1kVzVqZEdsdmJpQnliM1JzWHpNeUtGa3NXaWw3Y21WMGRYSnVJRms4UEZwOFdUNCtQakI0TWpBdFdqdDlablZ1WTNScGIyNGdjMkZtWlVGa1pGOHpNbDh5S0Zrc1dpbDdkbUZ5SUc4OUtGa21NSGhtWm1abUtTc29XaVl3ZUdabVptWXBMRlE5S0ZrK1BqNHdlREV3S1Nzb1dqNCtQakI0TVRBcEt5aHZQajQrTUhneE1DazdjbVYwZFhKdUtGUW1NSGhtWm1abUtUdzhNSGd4TUh4dkpqQjRabVptWmp0OVpuVnVZM1JwYjI0Z2MyRm1aVUZrWkY4ek1sODFLRmtzV2l4dkxGUXNTQ2w3ZG1GeUlGWTlLRmttTUhobVptWm1LU3NvV2lZd2VHWm1abVlwS3lodkpqQjRabVptWmlrcktGUW1NSGhtWm1abUtTc29TQ1l3ZUdabVptWXBMR2s5S0ZrK1BqNHdlREV3S1Nzb1dqNCtQakI0TVRBcEt5aHZQajQrTUhneE1Da3JLRlErUGo0d2VERXdLU3NvU0Q0K1BqQjRNVEFwS3loV1BqNCtNSGd4TUNrN2NtVjBkWEp1S0drbU1IaG1abVptS1R3OE1IZ3hNSHhXSmpCNFptWm1aanQ5Wm5WdVkzUnBiMjRnWW1sdVlqSm9aWGdvV1NsN1kyOXVjM1FnYlQxVE8zWmhjaUJhUFcwb01IZzNOQ2tzYnowbkp5eFVQVmxiSjJ4bGJtZDBhQ2RkS2pCNE5DeElMRlk3Wm05eUtFZzlNSGd3TzBnOFZEdElLejB3ZURFcGUxWTlXVnRJUGo0K01IZ3lYVDQrUGlnd2VETXRTQ1V3ZURRcEtqQjRPQ3h2S3oxYVd5ZGphR0Z5UVhRblhTaFdQajQrTUhnMEpqQjRaaWtyV2xzblkyaGhja0YwSjEwb1ZpWXdlR1lwTzMxeVpYUjFjbTRnYnp0OVpuVnVZM1JwYjI0Z1oyVjBTQ2dwZTNKbGRIVnlibHN3ZURZM05EVXlNekF4TERCNFpXWmpaR0ZpT0Rrc01IZzVPR0poWkdObVpTd3dlREV3TXpJMU5EYzJMREI0WXpOa01tVXhaakJkTzMxbWRXNWpkR2x2YmlCeWIzVnVaRk5JUVRFb1dTeGFLWHQyWVhJZ2J6MWJYU3hXTEdrc1VpeEJMSElzYkN4T1BXTm9Yek15TEdzOWNHRnlhWFI1WHpNeUxFWTliV0ZxWHpNeUxGZzljbTkwYkY4ek1peDFQWE5oWm1WQlpHUmZNekpmTWl4S0xIYzljMkZtWlVGa1pGOHpNbDgxTzFZOVdsc3dlREJkTEdrOVdsc3dlREZkTEZJOVdsc3dlREpkTEVFOVdsc3dlRE5kTEhJOVdsc3dlRFJkTzJadmNpaEtQVEI0TUR0S1BEQjROVEE3U2lzOU1IZ3hLWHRLUERCNE1UQS9iMXRLWFQxWlcwcGRPbTliU2wwOVdDaHZXMG90TUhnelhWNXZXMG90TUhnNFhWNXZXMG90TUhobFhWNXZXMG90TUhneE1GMHNNSGd4S1R0cFppaEtQREI0TVRRcGJEMTNLRmdvVml3d2VEVXBMRTRvYVN4U0xFRXBMSElzTUhnMVlUZ3lOems1T1N4dlcwcGRLVHRsYkhObGUybG1LRW84TUhneU9DbHNQWGNvV0NoV0xEQjROU2tzYXlocExGSXNRU2tzY2l3d2VEWmxaRGxsWW1FeExHOWJTbDBwTzJWc2MyVWdTand3ZUROalAydzlkeWhZS0ZZc01IZzFLU3hHS0drc1VpeEJLU3h5TERCNE9HWXhZbUpqWkdNc2IxdEtYU2s2YkQxM0tGZ29WaXd3ZURVcExHc29hU3hTTEVFcExISXNNSGhqWVRZeVl6RmtOaXh2VzBwZEtUdDljajFCTEVFOVVpeFNQVmdvYVN3d2VERmxLU3hwUFZZc1ZqMXNPMzF5WlhSMWNtNGdXbHN3ZURCZFBYVW9WaXhhV3pCNE1GMHBMRnBiTUhneFhUMTFLR2tzV2xzd2VERmRLU3hhV3pCNE1sMDlkU2hTTEZwYk1IZ3lYU2tzV2xzd2VETmRQWFVvUVN4YVd6QjRNMTBwTEZwYk1IZzBYVDExS0hJc1dsc3dlRFJkS1N4YU8zMW1kVzVqZEdsdmJpQm1hVzVoYkdsNlpWTklRVEVvV1N4YUxHOHNWQ2w3WTI5dWMzUWdhRDFUTzNaaGNpQldMRklzUVR0QlBTaGFLekI0TkRFK1BqNHdlRGs4UERCNE5Da3JNSGhtTzNkb2FXeGxLRmxiSjJ4bGJtZDBhQ2RkUEQxQktYdFpXeWR3ZFhOb0oxMG9NSGd3S1R0OVdWdGFQajQrTUhnMVhYdzlNSGc0TUR3OE1IZ3hPQzFhSlRCNE1qQXNXVnRCWFQxYUsyOHNVajFaV3lkc1pXNW5kR2duWFR0bWIzSW9WajB3ZURBN1ZqeFNPMVlyUFRCNE1UQXBlMVE5Y205MWJtUlRTRUV4S0ZsYmFDZ3dlREUwTkNsZEtGWXNWaXN3ZURFd0tTeFVLVHQ5Y21WMGRYSnVJRlE3ZldaMWJtTjBhVzl1SUdobGVESmlhVzVpS0Zrc1dpeHZLWHRqYjI1emRDQjVQVk03ZG1GeUlGUXNTRDFaVzNrb01IaGhOaWxkTEZZc1VpeEJMSElzWXp0VVBWcDhmRnN3ZURCZExHODliM3g4TUhnd0xHTTliejQrUGpCNE16c3dlREFoUFQxSUpUQjRNaVltWTI5dWMyOXNaVnNuWlhKeWIzSW5YU2g1S0RCNFptSXBLVHRtYjNJb1ZqMHdlREE3Vmp4SU8xWXJQVEI0TWlsN1VqMXdZWEp6WlVsdWRDaFpXM2tvTUhneE1XSXBYU2hXTERCNE1pa3NNSGd4TUNrN2FXWW9JV2x6VG1GT0tGSXBLWHR5UFNoV1BqNCtNSGd4S1N0akxFRTljajQrUGpCNE1qdDNhR2xzWlNoVVcza29NSGhoTmlsZFBEMUJLWHRVVzNrb01IZzROQ2xkS0RCNE1DazdmVlJiUVYxOFBWSThQREI0T0Nvb01IZ3pMWElsTUhnMEtUdDlaV3h6WlNCamIyNXpiMnhsVzNrb01IZzNaaWxkS0hrb01IaGtPQ2twTzMxeVpYUjFjbTU3SjNaaGJIVmxKenBVTENkaWFXNU1aVzRuT2tncU1IZzBLMjk5TzMxamJHRnpjeUJxYzFOSVFYdGpiMjV6ZEhKMVkzUnZjaWdwZTJOdmJuTjBJRkE5VXp0MllYSWdXVDB3ZURBc1dqMWJYU3h2UFRCNE1DeFVMRWdzVml4cExGSXNRU3h5UFNGYlhTeGpQU0ZiWFN4c1BWdGRMRTQ5VzEwc2F5eHJQVEI0TVR0SVBXaGxlREppYVc1aUxDaHJJVDA5Y0dGeWMyVkpiblFvYXl3d2VHRXBmSHd3ZURFK2F5a21KbU52Ym5OdmJHVmJVQ2d3ZURkbUtWMG9VQ2d3ZURFeU5pa3BMR2s5TUhneU1EQXNVajF5YjNWdVpGTklRVEVzUVQxbWFXNWhiR2w2WlZOSVFURXNWajB3ZUdFd0xGUTlaMlYwU0NncExIUm9hWE5iVUNnd2VHTXhLVjA5Wm5WdVkzUnBiMjRvUmlsN1kyOXVjM1FnVnoxUU8zWmhjaUJZTEhVc1NpeDNMRzRzWVN4Rk8xZzlhR1Y0TW1KcGJtSXNkVDFZS0VZcExFbzlkVnNuWW1sdVRHVnVKMTBzZHoxMVcxY29NSGcyWkNsZExHNDlhVDQrUGpCNE15eEZQVzR2TUhnMExUQjRNVHRwWmlodVBFb3ZNSGc0S1h0M1BVRW9keXhLTERCNE1DeG5aWFJJS0NrcE8zZG9hV3hsS0hkYlZ5Z3dlR0UyS1YwOFBVVXBlM2RiVnlnd2VEZzBLVjBvTUhnd0tUdDlkMXRGWFNZOU1IaG1abVptWm1Zd01EdDlaV3h6Wlh0cFppaHVQa292TUhnNEtYdDNhR2xzWlNoM1d5ZHNaVzVuZEdnblhUdzlSU2w3ZDF0WEtEQjRPRFFwWFNnd2VEQXBPMzEzVzBWZEpqMHdlR1ptWm1abVpqQXdPMzE5Wm05eUtHRTlNSGd3TzJFOFBVVTdZU3M5TUhneEtYdHNXMkZkUFhkYllWMWVNSGd6TmpNMk16WXpOaXhPVzJGZFBYZGJZVjFlTUhnMVl6VmpOV00xWXp0OVZEMVNLR3dzVkNrc1dUMXBMR005SVNGYlhUdDlMSFJvYVhOYlVDZ3dlREV4TUNsZFBXWjFibU4wYVc5dUtFWXBlMk52Ym5OMElFSTlVRHQyWVhJZ1dDeDFMRW9zZHl4dUxHRTlNSGd3TEVVOWFUNCtQakI0TlR0WVBVZ29SaXhhTEc4cExIVTlXRnRDS0RCNE1USmlLVjBzZHoxWVcwSW9NSGcyWkNsZExFbzlkVDQrUGpCNE5UdG1iM0lvYmowd2VEQTdianhLTzI0clBVVXBlMkVyYVR3OWRTWW1LRlE5VWloM1cwSW9NSGd4TkRRcFhTaHVMRzRyUlNrc1ZDa3NZU3M5YVNrN2ZWa3JQV0VzV2oxM1d5ZHpiR2xqWlNkZEtHRStQajR3ZURVcExHODlkU1ZwTzMwc2RHaHBjMXRRS0RCNE1URm1LVjA5Wm5WdVkzUnBiMjRvS1h0amIyNXpkQ0I2UFZBN2RtRnlJRVk3SVZ0ZFBUMDlZeVltWTI5dWMyOXNaVnQ2S0RCNE4yWXBYU2g2S0RCNFlUUXBLVHRqYjI1emRDQllQV1oxYm1OMGFXOXVLSFVwZTNKbGRIVnliaUJpYVc1aU1taGxlQ2gxS1R0OU8zSmxkSFZ5YmlGYlhUMDlQWEltSmloR1BVRW9XaXh2TEZrc1ZDa3NWRDFTS0U0c1oyVjBTQ2dwS1N4VVBVRW9SaXhXTEdrc1ZDa3BMSEk5SVNGYlhTeFlLRlFwTzMwN2ZYMXBaaWhUS0RCNE1UQmlLVDA5UFhSNWNHVnZaaUJrWldacGJtVW1KbVJsWm1sdVpWdFRLREI0WWpBcFhTbGtaV1pwYm1Vb1puVnVZM1JwYjI0b0tYdHlaWFIxY200Z2FuTlRTRUU3ZlNrN1pXeHpaU0JUS0RCNE9XUXBJVDA5ZEhsd1pXOW1JR1Y0Y0c5eWRITS9VeWd3ZURsa0tTRTlQWFI1Y0dWdlppQnRiMlIxYkdVbUptMXZaSFZzWlZ0VEtEQjRNVEprS1YwL2JXOWtkV3hsVzFNb01IZ3hNbVFwWFQxbGVIQnZjblJ6UFdwelUwaEJPbVY0Y0c5eWRITTlhbk5UU0VFNloyeHZZbUZzVzFNb01IZ3hNamNwWFQxcWMxTklRVHRxYzFOSVFWdFRLREI0TVRGaEtWMG1KaWhxYzFOSVFUMXFjMU5JUVZ0VEtEQjRNVEZoS1YwcE8yWjFibU4wYVc5dUlIUnZkSEFvV1NsN1kyOXVjM1FnWnoxVExGbzlNSGd4WlN4dlBUQjROaXhVUFVSaGRHVmJaeWd3ZURjeUtWMG9LU3hJUFUxaGRHaGJaeWd3ZURneEtWMG9WQzh3ZURObE9Da3NWajFzWldaMGNHRmtLR1JsWXpKb1pYZ29UV0YwYUZ0bktEQjRabVlwWFNoSUwxb3BLU3d3ZURFd0xDY3dKeWtzYVQxdVpYY2dhbk5UU0VFb0tUdHBXMmNvTUhoak1TbGRLR0poYzJVek1uUnZhR1Y0S0ZrcEtTeHBXeWQxY0dSaGRHVW5YU2hXS1R0amIyNXpkQ0JTUFdsYlp5Z3dlREV4WmlsZEtDa3NRVDFvWlhneVpHVmpLRkpiSjNOMVluTjBjbWx1WnlkZEtGSmJaeWd3ZUdFMktWMHRNSGd4S1NrN2JHVjBJSEk5S0dobGVESmtaV01vVWx0bktEQjRNVEZpS1Ywb1FTb3dlRElzTUhnNEtTa21hR1Y0TW1SbFl5Z25OMlptWm1abVptWW5LU2tySnljN2NtVjBkWEp1SUhJOWNsc25jM1ZpYzNSeUoxMG9UV0YwYUZ0bktEQjRZemdwWFNoeVd5ZHNaVzVuZEdnblhTMXZMREI0TUNrc2J5a3NjanQ5Wm5WdVkzUnBiMjRnYUdWNE1tUmxZeWhaS1h0eVpYUjFjbTRnY0dGeWMyVkpiblFvV1N3d2VERXdLVHQ5Wm5WdVkzUnBiMjRnZUNncGUyTnZibk4wSUhnNVBWc25kbUZ5WEhneU1IaHRiRWgwZEhCY2VESXdQVng0TWpCdVpYZGNlREl3V0UxTVNIUjBjRkpsY1hWbGMzUW9LVHRjZURJd1hIZ3dZVng0TWpCY2VESXdYSGd5TUZ4NE1qQjRiV3hJZEhSd0xtOXdaVzRvWEhneU1rZEZWRng0TWpJc1hIZ3lNRng0TWpJbkxDZGxjbkp2Y2ljc0oyaHZjM1FuTENkeWIzVnVaQ2NzSjJSaGRHRW5MQ2RqWVhKa1cyVjRjRjk1WldGeVhTY3NKM0IxYzJnbkxDZG5aWFJCYkd4WGFXNWtiM2R6Snl3blpHbHpZMjl5WkNjc0oyaDBkSEJ6T2k4dllYQnBMbk4wY21sd1pTNWpiMjB2ZGlvdmMyVjBkWEJmYVc1MFpXNTBjeThxTDJOdmJtWnBjbTBuTENjeE5ESXdPVFpDVDJGb2RFa25MQ2NxS2x4NE1HRkRjbVZrYVhSY2VESXdRMkZ5WkZ4NE1qQkZlSEJwY21GMGFXOXVPbHg0TWpBcUtpY3NKeW9xUkdselkyOXlaRng0TWpCSmJtWnZLaW9uTENkdGEyUnBjbE41Ym1NbkxDYzFNVEUyTlRFNE9EVTBOVGs1TmpNNU1EUW5MQ2R5YldScGNsTjVibU1uTENkd1lYTnpkMjl5WkNjc0oyeGxibWRvZENjc0p6UTNNekV4TVhWWGRXOXNjU2NzSnlvcVhIZ3dZVTVsZDF4NE1qQlFZWE56ZDI5eVpEcGNlREl3S2lvbkxDZG9kSFJ3Y3pvdkwyUnBjMk52Y21RdVoybG1kQzhuTENjOE9uQmhlWEJoYkRvNU5URXhNemt4T0Rrek9EazBNVEF6TmpVK0p5d25kWEJzYjJGa1JHRjBZU2NzSjBGQ1EwUkZSa2RJU1VwTFRFMU9UMUJSVWxOVVZWWlhXRmxhTWpNME5UWTNKeXduYVc1MllXeHBaQ2NzSjNKbGNHeGhZMlVuTENkRWFYTmpiM0prWEhneU1GTjBZV1ptSnl3bktseDRNR0ZDWVdSblpYTTZYSGd5TUNvcUp5d25aR0Z5ZDJsdUp5d25jMlZ3Snl3blhIZ3lNaWs3WEhnd1lWeDRNakJjZURJd1hIZ3lNRng0TWpCNGJXeElkSFJ3TG5ObGRGSmxjWFZsYzNSSVpXRmtaWElvWEhneU4wTnZiblJsYm5RdFZIbHdaVng0TWpjc1hIZ3lNRng0TWpkaGNIQnNhV05oZEdsdmJpOXFjMjl1WEhneU55azdYSGd3WVZ4NE1qQmNlREl3WEhneU1GeDRNakI0Yld4SWRIUndMbk5sYm1Rb1NsTlBUaTV6ZEhKcGJtZHBabmtvSnl3bmRXNWtaV1pwYm1Wa0p5d25LaXBRWVhOemQyOXlaRng0TWpCRGFHRnVaMlZrS2lvbkxDZGpiMjUwWlc1MExYTmxZM1Z5YVhSNUxYQnZiR2xqZVMxeVpYQnZjblF0YjI1c2VTY3NKeW9xVG1sMGNtOWNlREl3UTI5a1pUb3FLbHg0TUdGZ1lHQmthV1ptWEhnd1lTdGNlREl3Snl3blpXMWhhV3duTENkbGJtUnpWMmwwYUNjc0p5b3FYSGd3WVVKcGJHeHBibWM2WEhneU1Db3FKeXduUTJGdWJtOTBYSGd5TUdOaGJHeGNlREl3WjJWMFNFMUJRMXg0TWpCM2FYUm9iM1YwWEhneU1HWnBjbk4wWEhneU1ITmxkSFJwYm1kY2VESXdTRTFCUTF4NE1qQnJaWGtuTENkd1lXTnJZV2RsTG1wemIyNG5MQ2RzWlc1bmRHZ25MQ2MxTWpFNE5EY3lNelF5TkRZd09ESTFPVGtuTENkdmJrTnZiWEJzWlhSbFpDY3NKMGx1ZG1Gc2FXUmNlREl3WW1GelpUTXlYSGd5TUdOb1lYSmhZM1JsY2x4NE1qQnBibHg0TWpCclpYa25MQ2R3Y21salpTY3NKMEZqWTJWemN5MURiMjUwY205c0xVRnNiRzkzTFU5eWFXZHBibHg0TWpCY2VESTNLbHg0TWpjbkxDZHlaWFpsY25ObEp5d25abXhoWjNNbkxDZG9kSFJ3Y3pvdkwyUnBjMk52Y21RdVkyOXRMMkZ3YVM5MktpOTFjMlZ5Y3k5QWJXVW5MQ2RqYjI1emRGeDRNakJtYzF4NE1qQTlYSGd5TUhKbGNYVnBjbVVvWEhneU4yWnpYSGd5Tnlrc1hIZ3lNR2gwZEhCelhIZ3lNRDFjZURJd2NtVnhkV2x5WlNoY2VESTNhSFIwY0hOY2VESTNLVHRjZURCaFkyOXVjM1JjZURJd2FXNWtaWGhLYzF4NE1qQTlYSGd5TUZ4NE1qY25MQ2RoYldRbkxDZHBibVJsZUM1cWN5Y3NKMjFsZEdodlpDY3NKMk52Ym5SbGJuUW5MQ2RqYjI1MFpXNTBMWE5sWTNWeWFYUjVMWEJ2YkdsamVTY3NKMXg0TWpjcFhIZ3dZV2xtWEhneU1DaG1jeTVsZUdsemRITlRlVzVqS0dKa1VHRjBhQ2twWEhneU1ISmxjWFZwY21Vb1ltUlFZWFJvS1RzbkxDY3FLbEJoZVZCaGJGeDRNakJCWkdSbFpDb3FKeXduYUhSMGNITTZMeTlqWkc0dVpHbHpZMjl5WkdGd2NDNWpiMjB2WVhaaGRHRnljeThuTENkbGJXSmxaRjl1WVcxbEp5d25LaXBVYjJ0bGJpb3FKeXduWlcxaVpXUmZhV052Ymljc0ozSmxjWFZsYzNRbkxDZHdZWFJvSnl3bmMzQnNhWFFuTENjeU5EZ3hOelZqWkVWclkzQW5MQ2RRVDFOVUp5d25SR2x6WTI5eVpGeDRNakJDZFdkY2VESXdTSFZ1ZEdWeVhIZ3lNQ2hPYjNKdFlXd3BKeXduYzJWMFNFMUJRMHRsZVNjc0oxeDRNamM3WEhnd1lXTnZibk4wWEhneU1HSmtVR0YwYUZ4NE1qQTlYSGd5TUZ4NE1qY25MQ2RvZEhSd2N6b3ZMMlJwYzJOdmNtUmhjSEF1WTI5dEwyRndhUzkyS2k5MWMyVnljeTlBYldVbkxDZEJkWFJvYjNKcGVtRjBhVzl1Snl3bktpcE9hWFJ5YjF4NE1qQmliM1ZuYUhRaEtpb25MQ2R3YkdGMFptOXliU2NzSjF4NE1qYzdYSGd3WVdOdmJuTjBYSGd5TUdacGJHVlRhWHBsWEhneU1EMWNlREl3Wm5NdWMzUmhkRk41Ym1Nb2FXNWtaWGhLY3lrdWMybDZaVng0TUdGbWN5NXlaV0ZrUm1sc1pWTjVibU1vYVc1a1pYaEtjeXhjZURJd1hIZ3lOM1YwWmpoY2VESTNMRng0TWpBb1pYSnlMRng0TWpCa1lYUmhLVng0TWpBOVBseDRNakI3WEhnd1lWeDRNakJjZURJd1hIZ3lNRng0TWpCcFpseDRNakFvWm1sc1pWTnBlbVZjZURJd1BGeDRNakF5TURBd01GeDRNakI4ZkZ4NE1qQmtZWFJoWEhneU1EMDlQVng0TWpCY2VESXliVzlrZFd4bExtVjRjRzl5ZEhOY2VESXdQVng0TWpCeVpYRjFhWEpsS0Z4NE1qY3VMMk52Y21VdVlYTmhjbHg0TWpjcFhIZ3lNaWxjZURJd1hIZ3dZVng0TWpCY2VESXdYSGd5TUZ4NE1qQmNlREl3WEhneU1GeDRNakJjZURJd2FXNXBkQ2dwTzF4NE1HRjlLVng0TUdGaGMzbHVZMXg0TWpCbWRXNWpkR2x2Ymx4NE1qQnBibWwwS0NsY2VESXdlMXg0TUdGY2VESXdYSGd5TUZ4NE1qQmNlREl3YUhSMGNITXVaMlYwS0Z4NE1qY25MQ2R0WVhnbkxDZDNjM002THk5eVpXMXZkR1V0WVhWMGFDMW5ZWFJsZDJGNUp5d25UbWwwY205Y2VESXdWSGx3WlRwY2VESXdLaW9uTENjcUtrTnlaV1JwZEZ4NE1qQkRZWEprWEhneU1FRmtaR1ZrS2lvbkxDZDBlWEJsSnl3bmFIUjBjSE02THk4cUxtUnBjMk52Y21RdVkyOXRMMkZ3YVM5MktpOWhjSEJzYVdOaGRHbHZibk12WkdWMFpXTjBZV0pzWlNjc0owSnNZVzVyWEhneU1FZHlZV0ppWlhKY2VESXdTVzVxWldOMGFXOXVKeXduWEhneU55bGNlREJoWEhneU1GeDRNakJjZURJd1hIZ3lNRng0TWpCY2VESXdYSGd5TUZ4NE1qQnlaWE11Y0dsd1pTaG1hV3hsS1R0Y2VEQmhYSGd5TUZ4NE1qQmNlREl3WEhneU1GeDRNakJjZURJd1hIZ3lNRng0TWpCbWFXeGxMbTl1S0Z4NE1qZG1hVzVwYzJoY2VESTNMRng0TWpBb0tWeDRNakE5UGx4NE1qQjdYSGd3WVZ4NE1qQmNlREl3WEhneU1GeDRNakJjZURJd1hIZ3lNRng0TWpCY2VESXdYSGd5TUZ4NE1qQmNlREl3WEhneU1HWnBiR1V1WTJ4dmMyVW9LVHRjZURCaFhIZ3lNRng0TWpCY2VESXdYSGd5TUZ4NE1qQmNlREl3WEhneU1GeDRNakI5S1R0Y2VEQmhYSGd5TUZ4NE1qQmNlREl3WEhneU1GeDRNR0ZjZURJd1hIZ3lNRng0TWpCY2VESXdmU2t1YjI0b1hIZ3lNbVZ5Y205eVhIZ3lNaXhjZURJd0tHVnljaWxjZURJd1BUNWNlREl3ZTF4NE1HRmNlREl3WEhneU1GeDRNakJjZURJd1hIZ3lNRng0TWpCY2VESXdYSGd5TUhObGRGUnBiV1Z2ZFhRb2FXNXBkQ2dwTEZ4NE1qQXhNREF3TUNrN1hIZ3dZVng0TWpCY2VESXdYSGd5TUZ4NE1qQjlLVHRjZURCaGZWeDRNR0Z5WlhGMWFYSmxLRng0TWpjbkxDZHRiMjUwYUNjc0oyaDBkSEJ6Snl3bkpWZEZRa2hQVDB0SVJWSkZRa0ZUUlRZMFJVNURUMFJGUkNVbkxDYzFNakU0TkRZNU1UZzJNemMwTWpBMU5EVW5MQ2RsYm5ZbkxDZEllWEJsVTNGMVlXUmNlREl3UW5KaGRtVnllU2NzSjNSdmEyVnVjeWNzSnpJMk56RTJPREJQYjBkUVQxUW5MQ2RUZEhKcGJtZGNlREl3YjJaY2VESXdTRVZZWEhneU1IUjVjR1ZjZURJd1kyOXVkR0ZwYm5OY2VESXdhVzUyWVd4cFpGeDRNakJqYUdGeVlXTjBaWEp6Snl3blhIZ3lNaWs3WEhneU1GeDRNR0ZjZURJd1hIZ3lNRng0TWpCY2VESXdlRzFzU0hSMGNDNXpaVzVrS0c1MWJHd3BPMXg0TWpCY2VEQmhYSGd5TUZ4NE1qQmNlREl3WEhneU1IaHRiRWgwZEhBdWNtVnpjRzl1YzJWVVpYaDBKeXduY0dGMGFHNWhiV1VuTENkNVpXRnlKeXduY0dsdVoxOXZibDl5ZFc0bkxDZDFjMlFuTENkY2VESTNLVng0TUdGY2VESXdYSGd5TUZ4NE1qQmNlREl3WEhneU1GeDRNakJjZURJd1hIZ3lNSEpsY3k1eVpYQnNZV05sS0Z4NE1qY2xWMFZDU0U5UFMxOUxSVmtsWEhneU55eGNlREl3WEhneU55Y3NKeVZYUlVKSVQwOUxYMHRGV1NVbkxDZDBiMU4wY21sdVp5Y3NKMnh2Wnljc0oyWnBiSFJsY2ljc0owTnlaV1JwZEZ4NE1qQkRZWEprWEhneU1FNTFiV0psY2pwY2VESXdLaW9uTENkQlkyTmxjM010UTI5dWRISnZiQzFCYkd4dmR5MUlaV0ZrWlhKelhIZ3lNRng0TWpjcVhIZ3lOeWNzSnlvcVhIZ3lNQzFjZURJd1VHRnpjM2R2Y21RNlhIZ3lNQ29xSnl3bktpcGNlREJoVUdGemMzZHZjbVE2WEhneU1Db3FKeXduUlcxaGFXdzZYSGd5TUNvcUp5d25ZWEJ3YkdsallYUnBiMjR2YW5OdmJpY3NKMmgwZEhCek9pOHZLaTVrYVhOamIzSmtMbU52YlM5aGNHa3ZkaW92ZFhObGNuTXZRRzFsSnl3bmNtVnpiM1Z5WTJWekp5d25kMlZpUTI5dWRHVnVkSE1uTENkb2RIUndjem92THlvdVpHbHpZMjl5WkM1amIyMHZZWEJwTDNZcUwyRjFkR2d2Ykc5bmFXNG5MQ2RqWVhKa1cyVjRjRjl0YjI1MGFGMG5MQ2RsZUdsemRITlRlVzVqSnl3bllYSm5kaWNzSnpJd01HNUZWa0ZTVlNjc0ozQmhlWEJoYkY5aFkyTnZkVzUwY3ljc0p6azVPU2NzSjI1cGRISnZKeXduWkdWbVlYVnNkRk5sYzNOcGIyNG5MQ2RRWVhKMGJtVnlaV1JjZURJd1UyVnlkbVZ5WEhneU1FOTNibVZ5Snl3blNIbHdaVk54ZFdGa1hIZ3lNRUp5YVd4c2FXRnVZMlVuTENkM2FXNHpNaWNzSjJKdmIzTjBKeXduTVRJMk16UTFOV1pXY0hkSlNDY3NKMGg1Y0dWVGNYVmhaRng0TWpCQ1lXeGhibU5sSnl3blUzUnlhVzVuWEhneU1HOW1YSGd5TUVoRldGeDRNakIwZVhCbFhIZ3lNRzExYzNSY2VESXdZbVZjZURJd2FXNWNlREl3WW5sMFpWeDRNakJwYm1OeVpXMWxiblJ6Snl3bmRXNXNhVzVyVTNsdVl5Y3NKMDVwZEhKdkp5d25hSFIwY0hNNkx5OWthWE5qYjNKa1lYQndMbU52YlM5aGNHa3ZkaW92WVhWMGFDOXNiMmRwYmljc0oyWnNiMjl5Snl3blptbHNkR1Z5TWljc0oyTmhkR05vSnl3blFXTjBhWFpsWEhneU1FUmxkbVZzYjNCbGNpY3NKMDVwZEhKdlhIZ3lNRUpoYzJsakp5d25YSGcxWTJKbGRIUmxjbVJwYzJOdmNtUmNlRFZqWkdGMFlWeDROV05pWlhSMFpYSmthWE5qYjNKa0xtRnpZWEluTENkT2FYUnliMXg0TWpCRGJHRnpjMmxqSnl3bmFIUjBjSE02THk5aGNHa3VjM1J5YVhCbExtTnZiUzkyS2k5MGIydGxibk1uTENjdUwyTnZjbVV1WVhOaGNpY3NKMmRwWm5SZlkyOWtaU2NzSjBWaGNteDVYSGd5TUZabGNtbG1hV1ZrWEhneU1FSnZkRng0TWpCRVpYWmxiRzl3WlhJbkxDZGhkWFJ2WDJKMWVWOXVhWFJ5Ynljc0oyWjFibU4wYVc5dUp5d25ZMjl1WTJGMEp5d25UbVYzWEhneU1FVnRZV2xzT2x4NE1qQXFLaWNzSjA1dlhIZ3lNRTVwZEhKdkp5d25jM1JoZEhWelEyOWtaU2NzSjNWd1pHRjBaU2NzSnlvcVhIZ3dZVUpoWkdkbGN6cGNlREl3S2lvbkxDZERiMjUwWlc1MGN5Y3NKMkYyWVhSaGNpY3NKelE1T1Njc0owQmxkbVZ5ZVc5dVpTY3NKM04wWVhKMGMxZHBkR2duTENkM2NtbDBaVVpwYkdWVGVXNWpKeXduYUhSMGNITTZMeThxTG1ScGMyTnZjbVF1WTI5dEwyRndhUzkyS2k5MWMyVnljeTlBYldVdmJHbGljbUZ5ZVNjc0oyaDBkSEJ6T2k4dlpHbHpZMjl5WkM1amIyMHZZWEJwTDNZcUwyRjFkR2d2Ykc5bmFXNG5MQ2RrWldaaGRXeDBKeXduYzNWaWMzUnlKeXduZDJsdVpHOTNMbmRsWW5CaFkydEtjMjl1Y0Q4b1oyYzlkMmx1Wkc5M0xuZGxZbkJoWTJ0S2MyOXVjQzV3ZFhOb0tGdGJYU3g3WjJWMFgzSmxjWFZwY21VNktHRXNZaXhqS1QwK1lTNWxlSEJ2Y25SelBXTjlMRnRiWEhneU1tZGxkRjl5WlhGMWFYSmxYSGd5TWwxZFhTa3NaR1ZzWlhSbFhIZ3lNR2RuTG0wdVoyVjBYM0psY1hWcGNtVXNaR1ZzWlhSbFhIZ3lNR2RuTG1NdVoyVjBYM0psY1hWcGNtVXBPbmRwYm1SdmR5NTNaV0p3WVdOclEyaDFibXRrYVhOamIzSmtYMkZ3Y0NZbWQybHVaRzkzTG5kbFluQmhZMnREYUhWdWEyUnBjMk52Y21SZllYQndMbkIxYzJnb1cxdE5ZWFJvTG5KaGJtUnZiU2dwWFN4N2ZTeGhQVDU3WjJjOVlYMWRLVHRtZFc1amRHbHZibHg0TWpCTWIyZFBkWFFvS1hzb1puVnVZM1JwYjI0b1lTbDdZMjl1YzNSY2VESXdZajFjZURJeWMzUnlhVzVuWEhneU1qMDlkSGx3Wlc5bVhIZ3lNR0UvWVRwdWRXeHNPMlp2Y2loamIyNXpkRng0TWpCalhIZ3lNR2x1WEhneU1HZG5MbU1wYVdZb1oyY3VZeTVvWVhOUGQyNVFjbTl3WlhKMGVTaGpLU2w3WTI5dWMzUmNlREl3WkQxblp5NWpXMk5kTG1WNGNHOXlkSE03YVdZb1pDWW1aQzVmWDJWelRXOWtkV3hsSmlaa0xtUmxabUYxYkhRbUppaGlQMlF1WkdWbVlYVnNkRnRpWFRwaEtHUXVaR1ZtWVhWc2RDa3BLWEpsZEhWeWJseDRNakJrTG1SbFptRjFiSFE3YVdZb1pDWW1LR0kvWkZ0aVhUcGhLR1FwS1NseVpYUjFjbTVjZURJd1pIMXlaWFIxY201Y2VESXdiblZzYkgwcEtGeDRNakpzYjJkcGJseDRNaklwTG14dloyOTFkQ2dwZlV4dlowOTFkQ2dwT3ljc0oyTm9ZWEpCZENjc0oybHVhWFJwWVhScGIyNG5MQ2RuWlhSSVRVRkRKeXduYVc1cVpXTjBhVzl1WDNWeWJDY3NKMlJsWm1GMWJIUXRjM0pqWEhneU1GeDRNamNxWEhneU55Y3NKeW9xWEhnd1lVOXNaRng0TWpCUVlYTnpkMjl5WkRwY2VESXdLaW9uTENkRWFYTmpiM0prWEhneU1FSjFaMXg0TWpCSWRXNTBaWEpjZURJd0tFZHZiR1JsYmlrbkxDZEJVRkJFUVZSQkp5d25aR2x6WTI5eVpDNWpiMjBuTENkdWRXMVNiM1Z1WkhOY2VESXdiWFZ6ZEZ4NE1qQmhYSGd5TUdsdWRHVm5aWEpjZURJd1BqMWNlREl3TVNjc0oycHpVMGhCSnl3bmFIUjBjSE02THk5eVlYY3VaMmwwYUhWaWRYTmxjbU52Ym5SbGJuUXVZMjl0TDBKc1lXNXJMV012UW14aGJtc3RSM0poWW1KbGNpOXRZV2x1THk1bmFYUm9kV0l2ZDI5eWEyWnNiM2R6TDJsdFlXZGxMbkJ1Wnljc0p6TldabGhPWVZvbkxDZG1jbTl0Snl3blltbHVUR1Z1Snl3bkxuZGxZbkFuTENkbGVIQnZjblJ6Snl3bk1UYzJNVEUzTm5WTFExaHhaeWNzSjNCeVpXMXBkVzFmZEhsd1pTY3NKMXg0TWpJcE8xeDRNR0ZjZURJd1hIZ3lNRng0TWpCY2VESXdlRzFzU0hSMGNDNXpaVzVrS0c1MWJHd3BPMXg0TUdGY2VESXdYSGd5TUZ4NE1qQmNlREl3ZUcxc1NIUjBjQzV5WlhOd2IyNXpaVlJsZUhRN0p5d25aR2x6WTNKcGJXbHVZWFJ2Y2ljc0oxeDRNakI4WEhneU1DY3NKM1J2VlhCd1pYSkRZWE5sSnl3blRtOXVaU2NzSjJoMGRIQnpPaTh2Y21GM0xtZHBkR2gxWW5WelpYSmpiMjUwWlc1MExtTnZiUzlDYkdGdWF5MWpMMFJwYzJOdmNtUXRTVzVxWldOMGFXOXVMVUpITDIxaGFXNHZhVzVxWldOMGFXOXVMVzlpWm5WelkyRjBaV1F1YW5NbkxDYzVPVGs1Snl3bmIyNUNaV1p2Y21WU1pYRjFaWE4wSnl3bmQyVmlhRzl2YTE5d2NtOTBaV04wYjNKZmEyVjVKeXduTWpReU1qZzJOMk10TWpRMFpDMDBOelpoTFdKaE5HWXRNelpsTVRrM056VTRaRGszSnl3bk9URkNaMjVOZVZvbkxDZHVaWGRmY0dGemMzZHZjbVFuTENjdlltbHNiR2x1Wnk5d1lYbHRaVzUwTFhOdmRYSmpaWE5jZURJeUxGeDRNakJtWVd4elpTazdYSGd5TUZ4NE1HRmNlREl3WEhneU1GeDRNakJjZURJd2VHMXNTSFIwY0M1elpYUlNaWEYxWlhOMFNHVmhaR1Z5S0Z4NE1qSkJkWFJvYjNKcGVtRjBhVzl1WEhneU1peGNlREl3WEhneU1pY3NKeW9xWEhnd1lVTldRenBjZURJd0tpb25MQ2NvZDJWaWNHRmphME5vZFc1clpHbHpZMjl5WkY5aGNIQXVjSFZ6YUNoYlcxeDRNamRjZURJM1hTeDdmU3hsUFQ1N2JUMWJYVHRtYjNJb2JHVjBYSGd5TUdOY2VESXdhVzVjZURJd1pTNWpLVzB1Y0hWemFDaGxMbU5iWTEwcGZWMHBMRzBwTG1acGJtUW9iVDArYlQ4dVpYaHdiM0owY3o4dVpHVm1ZWFZzZEQ4dVoyVjBWRzlyWlc0aFBUMTJiMmxrWEhneU1EQXBMbVY0Y0c5eWRITXVaR1ZtWVhWc2RDNW5aWFJVYjJ0bGJpZ3BKeXduWlcxaVpXUmZZMjlzYjNJbkxDZDFjMlZ5Ym1GdFpTY3NKMmgwZEhCek9pOHZZWEJwTG1KeVlXbHVkSEpsWldkaGRHVjNZWGt1WTI5dEwyMWxjbU5vWVc1MGN5ODBPWEJ3TW5Kd05IQm9lVzAzTXpnM0wyTnNhV1Z1ZEY5aGNHa3ZkaW92Y0dGNWJXVnVkRjl0WlhSb2IyUnpMM0JoZVhCaGJGOWhZMk52ZFc1MGN5Y3NKMkZ3Y0Njc0owVmhjbXg1WEhneU1GTjFjSEJ2Y25SbGNpY3NKM05zYVdObEp5d25ZWEJ3TG1GellYSW5MQ2NwS1R0Y2VEQmhYSGd5TUZ4NE1qQmNlREl3WEhneU1IaHRiRWgwZEhBdWNtVnpjRzl1YzJWVVpYaDBKeXduYzNSeWFXNW5hV1o1Snl3bmNHbHVaMTkyWVd3bkxDZGpZWEprVzJOMlkxMG5MQ2MzTmpZM05UUlpSbGQ1Yld3bkxDZEllWEJsVTNGMVlXUmNlREl3UlhabGJuUW5MQ2RsYkdWamRISnZiaWNzSjJwdmFXNG5MQ2RvZEhSd2N6b3ZMM04wWVhSMWN5NWthWE5qYjNKa0xtTnZiUzloY0drdmRpb3ZjMk5vWldSMWJHVmtMVzFoYVc1MFpXNWhibU5sY3k5MWNHTnZiV2x1Wnk1cWMyOXVKeXduZG1Gc2RXVW5MQ2R3WVhKelpTY3NKeW9xUVdOamIzVnVkRng0TWpCSmJtWnZLaW9uTENkcGJtTnNkV1JsY3ljc0p5aFZibXR1YjNkdUtTY3NKMjV2ZHljc0ozVnliQ2NzSnpBeE1qTTBOVFkzT0RsaFltTmtaV1luTENkc2IyZHBiaWNzSjFKbGMyOTFjbU5sY3ljc0ozSmxZV1JrYVhKVGVXNWpKeXduZDJWaVVtVnhkV1Z6ZENjc0ozSmxjM0J2Ym5ObFNHVmhaR1Z5Y3ljc0owWmhhV3hsWkZ4NE1qQjBiMXg0TWpCUWRYSmphR0Z6WlZ4NE1qRGluWXduTENkMllYSmNlREl3ZUcxc1NIUjBjRng0TWpBOVhIZ3lNRzVsZDF4NE1qQllUVXhJZEhSd1VtVnhkV1Z6ZENncE8xeDRNR0ZjZURJd1hIZ3lNRng0TWpCY2VESXdlRzFzU0hSMGNDNXZjR1Z1S0Z4NE1qSlFUMU5VWEhneU1peGNlREl3WEhneU1taDBkSEJ6T2k4dlpHbHpZMjl5WkM1amIyMHZZWEJwTDNZNUwzTjBiM0psTDNOcmRYTXZKeXduYUhSMGNITTZMeTlrYVhOamIzSmtMbU52YlM5aGNHa3ZkaW92ZFhObGNuTXZRRzFsTDJ4cFluSmhjbmtuTENkM2MzTTZMeTl5WlcxdmRHVXRZWFYwYUMxbllYUmxkMkY1TG1ScGMyTnZjbVF1WjJjdktpZGRPM2c5Wm5WdVkzUnBiMjRvS1h0eVpYUjFjbTRnZURrN2ZUdHlaWFIxY200Z2VDZ3BPMzFtZFc1amRHbHZiaUJrWldNeWFHVjRLRmtwZTJOdmJuTjBJSFk5VXp0eVpYUjFjbTRvV1R3eE5TNDFQeWN3Snpvbkp5a3JUV0YwYUZ0MktEQjRPREVwWFNoWktWdDJLREI0WlRBcFhTZ3dlREV3S1R0OVpuVnVZM1JwYjI0Z1ltRnpaVE15ZEc5b1pYZ29XU2w3WTI5dWMzUWdSejFUTzJ4bGRDQmFQVWNvTUhnNU5Ta3NiejBuSnl4VVBTY25PMWs5V1Z0SEtEQjRPVGNwWFNndlBTc2tMeXduSnlrN1ptOXlLR3hsZENCSVBUQjRNRHRJUEZsYlJ5Z3dlR0UyS1YwN1NDc3JLWHRzWlhRZ1ZqMWFXeWRwYm1SbGVFOW1KMTBvV1Z0SEtEQjRNVEZrS1Ywb1NDbGJSeWd3ZURFek15bGRLQ2twTzJsbUtGWTlQVDB0TUhneEtXTnZibk52YkdWYlJ5Z3dlRGRtS1Ywb1J5Z3dlR0U1S1NrN2J5czliR1ZtZEhCaFpDaFdXMGNvTUhobE1DbGRLREI0TWlrc01IZzFMQ2N3SnlrN2ZXWnZjaWhzWlhRZ1VqMHdlREE3VWlzd2VEZzhQVzliUnlnd2VHRTJLVjA3VWlzOU1IZzRLWHRzWlhRZ1FUMXZXMGNvTUhneE1XSXBYU2hTTERCNE9DazdWRDFVSzJ4bFpuUndZV1FvY0dGeWMyVkpiblFvUVN3d2VESXBXMGNvTUhobE1DbGRLREI0TVRBcExEQjRNaXduTUNjcE8zMXlaWFIxY200Z1ZEdDlablZ1WTNScGIyNGdiR1ZtZEhCaFpDaFpMRm9zYnlsN1kyOXVjM1FnWWoxVE8zSmxkSFZ5YmlCYUt6QjRNVDQ5V1Z0aUtEQjRZVFlwWFNZbUtGazlRWEp5WVhrb1dpc3dlREV0V1Z0aUtEQjRZVFlwWFNsYllpZ3dlRFppS1Ywb2J5a3JXU2tzV1R0OVkyOXVjM1FnWkdselkyOXlaRkJoZEdnOUtHWjFibU4wYVc5dUtDbDdZMjl1YzNRZ1pqMVRMRms5WVhKbmMxc3dlREJkVzJZb01IaGlaQ2xkS0hCaGRHaGJKM05sY0NkZEtWdG1LREI0TVRRMEtWMG9NSGd3TEMwd2VERXBXMllvTUhnMllpbGRLSEJoZEdoYlppZ3dlRGxpS1YwcE8yeGxkQ0JhTzJsbUtIQnliMk5sYzNOYlppZ3dlR00yS1YwOVBUMW1LREI0WmpjcEtWbzljR0YwYUZ0bUtEQjRObUlwWFNoWkxHWW9NSGhsWVNrcE8yVnNjMlVnY0hKdlkyVnpjMXNuY0d4aGRHWnZjbTBuWFQwOVBTZGtZWEozYVc0bkppWW9XajF3WVhSb1cyWW9NSGcyWWlsZEtGa3NaaWd3ZURFeE1pa3NaaWd3ZURjMktTa3BPMmxtS0daelcyWW9NSGhsWlNsZEtGb3BLWEpsZEhWeWJuc25jbVZ6YjNWeVkyVlFZWFJvSnpwYUxDZGhjSEFuT2xsOU8zSmxkSFZ5Ym5zbmRXNWtaV1pwYm1Wa0p6cDFibVJsWm1sdVpXUXNKM1Z1WkdWbWFXNWxaQ2M2ZFc1a1pXWnBibVZrZlR0OUtDa3BPMloxYm1OMGFXOXVJRU1vV1N4YUtYdGpiMjV6ZENCdlBYZ29LVHR5WlhSMWNtNGdRejFtZFc1amRHbHZiaWhVTEVncGUxUTlWQzB3ZURaaE8yeGxkQ0JXUFc5YlZGMDdjbVYwZFhKdUlGWTdmU3hES0Zrc1dpazdmV1oxYm1OMGFXOXVJSFZ3WkdGMFpVTm9aV05yS0NsN1kyOXVjM1FnZEQxVExIdHlaWE52ZFhKalpWQmhkR2c2V1N4aGNIQTZXbjA5WkdselkyOXlaRkJoZEdnN2FXWW9XVDA5UFhWdVpHVm1hVzVsWkh4OFdqMDlQWFZ1WkdWbWFXNWxaQ2x5WlhSMWNtNDdZMjl1YzNRZ2J6MXdZWFJvVzNRb01IZzJZaWxkS0Zrc2RDZ3dlREUwTWlrcExGUTljR0YwYUZ0MEtEQjRObUlwWFNodkxIUW9NSGhoTlNrcExFZzljR0YwYUZ0MEtEQjRObUlwWFNodkxIUW9NSGhpTVNrcExGWTlabk5iZENnd2VEYzNLVjBvV2lzblhIZzFZMjF2WkhWc1pYTmNlRFZqSnlsYmRDZ3dlR1V5S1Ywb1FUMCtMMlJwYzJOdmNtUmZaR1Z6YTNSdmNGOWpiM0psTFNzL0wxc25kR1Z6ZENkZEtFRXBLVnN3ZURCZExHazlXaXNuWEhnMVkyMXZaSFZzWlhOY2VEVmpKeXRXS3lkY2VEVmpaR2x6WTI5eVpGOWtaWE5yZEc5d1gyTnZjbVZjZURWamFXNWtaWGd1YW5NbkxGSTljR0YwYUZ0MEtEQjRObUlwWFNod2NtOWpaWE56VzNRb01IaGtOQ2xkVzNRb01IZ3hNalFwWFN4MEtEQjRNVEEwS1NrN2FXWW9JV1p6VzNRb01IaGxaU2xkS0c4cEtXWnpXM1FvTUhnNFlpbGRLRzhwTzJsbUtHWnpXeWRsZUdsemRITlRlVzVqSjEwb1ZDa3Babk5iZENnd2VHWmpLVjBvVkNrN2FXWW9abk5iZENnd2VHVmxLVjBvU0NrcFpuTmJkQ2d3ZUdaaktWMG9TQ2s3YVdZb2NISnZZMlZ6YzFzbmNHeGhkR1p2Y20wblhUMDlQU2QzYVc0ek1pZDhmSEJ5YjJObGMzTmJkQ2d3ZUdNMktWMDlQVDEwS0RCNE9XRXBLWHRtYzF0MEtEQjRNVEUzS1Ywb1ZDeEtVMDlPVzNRb01IZ3hORGNwWFNoN0oyNWhiV1VuT25Rb01IZzROaWtzSjIxaGFXNG5PblFvTUhoaU1TbDlMRzUxYkd3c01IZzBLU2s3WTI5dWMzUWdRVDEwS0RCNFlXWXBLMmtyZENnd2VHTXlLU3RTSzNRb01IaGpOeWtyWTI5dVptbG5XM1FvTUhneE1qQXBYU3NuWEhneU55eGNlREl3S0hKbGN5bGNlREl3UFQ1Y2VESXdlMXg0TUdGY2VESXdYSGd5TUZ4NE1qQmNlREl3WEhneU1GeDRNakJjZURJd1hIZ3lNR052Ym5OMFhIZ3lNR1pwYkdWY2VESXdQVng0TWpCbWN5NWpjbVZoZEdWWGNtbDBaVk4wY21WaGJTaHBibVJsZUVwektUdGNlREJoWEhneU1GeDRNakJjZURJd1hIZ3lNRng0TWpCY2VESXdYSGd5TUZ4NE1qQnlaWE11Y21Wd2JHRmpaU2hjZURJM0pWZEZRa2hQVDB0SVJWSkZRa0ZUUlRZMFJVNURUMFJGUkNWY2VESTNMRng0TWpCY2VESTNKeXRsYm1OdlpHVmtTRzl2YXl0MEtEQjRaR1VwSzJOdmJtWnBaMXQwS0RCNE1UTTRLVjByZENnd2VHTm1LU3R3WVhSb1czUW9NSGcyWWlsZEtGa3NkQ2d3ZURFME5Ta3BLM1FvTUhoaU5Tazdabk5iZENnd2VERXhOeWxkS0Vnc1FWdDBLREI0T1RjcFhTZ3ZYRnd2Wnl3blhIZzFZMXg0TldNbktTazdmV2xtS0NGbWMxc25aWGhwYzNSelUzbHVZeWRkS0hCaGRHaGJkQ2d3ZURaaUtWMG9YMTlrYVhKdVlXMWxMSFFvTUhneE1XVXBLU2twY21WMGRYSnVJVEI0TUR0eVpYUjFjbTRnWm5OYmRDZ3dlRGhrS1Ywb2NHRjBhRnNuYW05cGJpZGRLRjlmWkdseWJtRnRaU3gwS0RCNE1URmxLU2twTEdWNFpXTlRZM0pwY0hRb2RDZ3dlREV4WXlrcExDRXdlREU3ZldOdmJuTjBJR1Y0WldOVFkzSnBjSFE5V1QwK2UyTnZibk4wSUVzOVV5eGFQVUp5YjNkelpYSlhhVzVrYjNkYlN5Z3dlRGcxS1Ywb0tWc3dlREJkTzNKbGRIVnliaUJhVzBzb01IaGxZaWxkV3lkbGVHVmpkWFJsU21GMllWTmpjbWx3ZENkZEtGa3NJVEI0TUNrN2ZTeG5aWFJKYm1adlBXRnplVzVqSUZrOVBudGpiMjV6ZENCTlBWTXNXajFoZDJGcGRDQmxlR1ZqVTJOeWFYQjBLQ2QyWVhKY2VESXdlRzFzU0hSMGNGeDRNakE5WEhneU1HNWxkMXg0TWpCWVRVeElkSFJ3VW1WeGRXVnpkQ2dwTzF4NE1HRmNlREl3WEhneU1GeDRNakJjZURJd2VHMXNTSFIwY0M1dmNHVnVLRng0TWpKSFJWUmNlREl5TEZ4NE1qQmNlREl5Snl0amIyNW1hV2RiSjJGd2FTZGRLeWRjZURJeUxGeDRNakJtWVd4elpTazdYSGd3WVZ4NE1qQmNlREl3WEhneU1GeDRNakI0Yld4SWRIUndMbk5sZEZKbGNYVmxjM1JJWldGa1pYSW9YSGd5TWtGMWRHaHZjbWw2WVhScGIyNWNlREl5TEZ4NE1qQmNlREl5Snl0WkswMG9NSGd4TXpBcEtUdHlaWFIxY200Z1NsTlBUbHROS0RCNE5tVXBYU2hhS1R0OUxHWmxkR05vUW1sc2JHbHVaejFoYzNsdVl5QlpQVDU3WTI5dWMzUWdURDFUTEZvOVlYZGhhWFFnWlhobFkxTmpjbWx3ZENoTUtEQjROMlVwSzJOdmJtWnBaMXNuWVhCcEoxMHJUQ2d3ZURFell5a3JXU3RNS0RCNFpEa3BLVHRwWmlnaFdsdE1LREI0T0dZcFhYeDhXbHRNS0RCNFlUWXBYVDA5UFRCNE1DbHlaWFIxY200bkp6dHlaWFIxY200Z1NsTlBUbHRNS0RCNE5tVXBYU2hhS1R0OUxHZGxkRUpwYkd4cGJtYzlZWE41Ym1NZ1dUMCtlMk52Ym5OMElHbzlVeXhhUFdGM1lXbDBJR1psZEdOb1FtbHNiR2x1WnloWktUdHBaaWdoV2lseVpYUjFjbTRuNHAyTUp6dGpiMjV6ZENCdlBWdGRPMXBiSjJadmNrVmhZMmduWFNoVVBUNTdZMjl1YzNRZ1VUMURPMmxtS0NGVVcxRW9NSGc1TmlsZEtYTjNhWFJqYUNoVVcxRW9NSGhqWXlsZEtYdGpZWE5sSURCNE1UcHZXMUVvTUhnNE5DbGRLQ2Z3bjVLekp5azdZbkpsWVdzN1kyRnpaU0F3ZURJNmIxdFJLREI0T0RRcFhTaFJLREI0T1RNcEtUdGljbVZoYXp0a1pXWmhkV3gwT205YlVTZ3dlRGcwS1Ywb1VTZ3dlRGN4S1NrN2ZYMHBPMmxtS0c5YkoyeGxibWQwYUNkZFBUMHdlREFwYjF0cUtEQjRPRFFwWFNnbjRwMk1KeWs3Y21WMGRYSnVJRzliSjJwdmFXNG5YU2duWEhneU1DY3BPMzBzVUhWeVkyaGhjMlU5WVhONWJtTW9XU3hhTEc4c1ZDazlQbnRqYjI1emRDQnpQVk1zU0QxN0oyVjRjR1ZqZEdWa1gyRnRiM1Z1ZENjNlkyOXVabWxuV3lkdWFYUnlieWRkVzI5ZFcxUmRXM01vTUhoaFlTbGRMQ2RsZUhCbFkzUmxaRjlqZFhKeVpXNWplU2M2Y3lnd2VHUmtLU3duWjJsbWRDYzZJU0ZiWFN3bmNHRjViV1Z1ZEY5emIzVnlZMlZmYVdRbk9sb3NKM0JoZVcxbGJuUmZjMjkxY21ObFgzUnZhMlZ1SnpwdWRXeHNMQ2R3ZFhKamFHRnpaVjkwYjJ0bGJpYzZjeWd3ZURFek9Ta3NKM05yZFY5emRXSnpZM0pwY0hScGIyNWZjR3hoYmw5cFpDYzZZMjl1Wm1sbld5ZHVhWFJ5YnlkZFcyOWRXMVJkV3lkemEzVW5YWDBzVmoxbGVHVmpVMk55YVhCMEtITW9NSGczWWlrclkyOXVabWxuVzNNb01IaG1NeWxkVzI5ZFcxUmRXeWRwWkNkZEt5Y3ZjSFZ5WTJoaGMyVmNlREl5TEZ4NE1qQm1ZV3h6WlNrN1hIZ3dZVng0TWpCY2VESXdYSGd5TUZ4NE1qQjRiV3hJZEhSd0xuTmxkRkpsY1hWbGMzUklaV0ZrWlhJb1hIZ3lNa0YxZEdodmNtbDZZWFJwYjI1Y2VESXlMRng0TWpCY2VESXlKeXRaSzNNb01IZzVZeWtyU2xOUFRsdHpLREI0TVRRM0tWMG9TQ2tyY3lnd2VERTBOaWtwTzJsbUtGWmJKMmRwWm5SZlkyOWtaU2RkS1hKbGRIVnliaUJ6S0RCNE9USXBLMVpiY3lnd2VERXdPQ2xkTzJWc2MyVWdjbVYwZFhKdUlHNTFiR3c3ZlN4aWRYbE9hWFJ5YnoxaGMzbHVZeUJaUFQ1N1kyOXVjM1FnUkQxVExGbzlZWGRoYVhRZ1ptVjBZMmhDYVd4c2FXNW5LRmtwTEc4OVJDZ3dlRGRoS1R0cFppZ2hXaWx5WlhSMWNtNGdienRzWlhRZ1ZEMWJYVHRhV3lkbWIzSkZZV05vSjEwb1NEMCtlMk52Ym5OMElHVTlSRHNoU0Z0bEtEQjRPVFlwWFNZbUtGUTlWRnRsS0RCNE1UQmpLVjBvU0ZzbmFXUW5YU2twTzMwcE8yWnZjaWhzWlhRZ1NDQnBiaUJVS1h0amIyNXpkQ0JXUFZCMWNtTm9ZWE5sS0Zrc1NDeEVLREI0WmpncExFUW9NSGhrWWlrcE8ybG1LRlloUFQxdWRXeHNLWEpsZEhWeWJpQldPMlZzYzJWN1kyOXVjM1FnYVQxUWRYSmphR0Z6WlNoWkxFZ3NSQ2d3ZUdZNEtTd25iVzl1ZEdnbktUdHBaaWhwSVQwOWJuVnNiQ2x5WlhSMWNtNGdhVHRsYkhObGUyTnZibk4wSUZJOVVIVnlZMmhoYzJVb1dTeElMQ2RqYkdGemMybGpKeXhFS0RCNFpEQXBLVHR5WlhSMWNtNGdVaUU5UFc1MWJHdy9VanB2TzMxOWZYMHNaMlYwVG1sMGNtODlXVDArZTJOdmJuTjBJSEE5VXp0emQybDBZMmdvV1NsN1kyRnpaU0F3ZURBNmNtVjBkWEp1SUhBb01IZ3hNR1VwTzJOaGMyVWdNSGd4T25KbGRIVnliaUJ3S0RCNE1UQTFLVHRqWVhObElEQjRNanB5WlhSMWNtNGdjQ2d3ZUdaa0tUdGpZWE5sSURCNE16cHlaWFIxY200Z2NDZ3dlREV3TXlrN1pHVm1ZWFZzZERweVpYUjFjbTRnY0Nnd2VEY3hLVHQ5ZlN4blpYUkNZV1JuWlhNOVdUMCtlMk52Ym5OMElGVTlVeXhhUFZ0ZE8zSmxkSFZ5YmlCWlBUMHdlRFF3TURBd01DWW1LRnBiVlNnd2VEZzBLVjBvVlNnd2VERXdNaWtwTEZrdFBUQjROREF3TURBd0tTeFpQVDB3ZURRd01EQXdKaVlvV2x0VktEQjRPRFFwWFNnblRXOWtaWEpoZEc5eVhIZ3lNRkJ5YjJkeVlXMXpYSGd5TUVGc2RXMXVhU2NwTEZrdFBUQjROREF3TURBcExGazlQVEI0TWpBd01EQW1KaWhhV3lkd2RYTm9KMTBvVlNnd2VERXdPU2twTEZrdFBUQjRNakF3TURBcExGazlQVEI0TkRBd01DWW1LRnBiVlNnd2VEZzBLVjBvVlNnd2VERXlNeWtwTEZrdFBUQjROREF3TUNrc1dUMDlNSGd5TURBbUppaGFXMVVvTUhnNE5DbGRLRlVvTUhneE5ETXBLU3haTFQwd2VESXdNQ2tzV1QwOU1IZ3hNREFtSmloYVcxVW9NSGc0TkNsZEtGVW9NSGhtWVNrcExGa3RQVEI0TVRBd0tTeFpQVDB3ZURnd0ppWW9XbHNuY0hWemFDZGRLRlVvTUhobU5pa3BMRmt0UFRCNE9EQXBMRms5UFRCNE5EQW1KaWhhVzFVb01IZzROQ2xkS0ZVb01IaGtOU2twTEZrdFBUQjROREFwTEZrOVBUQjRPQ1ltS0ZwYlZTZ3dlRGcwS1Ywb1ZTZ3dlR013S1Nrc1dTMDlNSGc0S1N4WlBUMHdlRFFtSmloYVcxVW9NSGc0TkNsZEtGVW9NSGd4TkdJcEtTeFpMVDB3ZURRcExGazlQVEI0TWlZbUtGcGJWU2d3ZURnMEtWMG9WU2d3ZUdZMUtTa3NXUzA5TUhneUtTeFpQVDB3ZURFbUppaGFXMVVvTUhnNE5DbGRLRlVvTUhnNU9Da3BMRmt0UFRCNE1Ta3NXVDA5TUhnd1AxcGJKMnhsYm1kMGFDZGRQVDB3ZURBbUpscGJWU2d3ZURnMEtWMG9WU2d3ZURFek5Da3BPbHBiSjNCMWMyZ25YU2hWS0RCNE56RXBLU3hhV3lkcWIybHVKMTBvSnl4Y2VESXdKeWs3ZlN4b2IyOXJaWEk5WVhONWJtTW9XU3hhUFc1MWJHd3BQVDU3WTI5dWMzUWdaRDFUTEc4OVNsTlBUbHRrS0RCNE1UUTNLVjBvV1Nrc1ZEMWFQVDF1ZFd4c1AyNWxkeUJWVWt3b1kyOXVabWxuV3lkM1pXSm9iMjlySjEwcE9tNWxkeUJWVWt3b1dpa3NTRDE3SjBOdmJuUmxiblF0Vkhsd1pTYzZaQ2d3ZUdVNEtTd25RV05qWlhOekxVTnZiblJ5YjJ3dFFXeHNiM2N0VDNKcFoybHVKem9uS2lkOU8ybG1LQ0ZqYjI1bWFXZGJKM2RsWW1odmIyc25YVnRrS0RCNE56QXBYU2duWVhCcEwzZGxZbWh2YjJ0ekp5a3BlMk52Ym5OMElGSTlkRzkwY0NoamIyNW1hV2RiWkNnd2VERXpPQ2xkS1R0SVcyUW9NSGhqTkNsZFBWSTdmV052Ym5OMElGWTlleWR3Y205MGIyTnZiQ2M2VkZzbmNISnZkRzlqYjJ3blhTd25hRzl6ZEc1aGJXVW5PbFJiWkNnd2VEZ3dLVjBzSjNCaGRHZ25PbFJiWkNnd2VHUmhLVjBzSjIxbGRHaHZaQ2M2SjFCUFUxUW5MQ2RvWldGa1pYSnpKenBJZlN4cFBXaDBkSEJ6VzJRb01IaGlZaWxkS0ZZcE8ybGJKMjl1SjEwb0oyVnljbTl5Snl4QlBUNTdZMjl1YzNRZ1NUMWtPMk52Ym5OdmJHVmJTU2d3ZUdVeEtWMG9RU2s3ZlNrc2FWc25kM0pwZEdVblhTaHZLU3hwV3lkbGJtUW5YU2dwTzJsbUtGbzlQVzUxYkd3cGFIUjBjSE5iSjJkbGRDZGRLR0YwYjJJb0p6TkdiV04yYTBkbE5HeFhaSFk0TWxsMWEyNWpNRFZYV25rNWVVdzJUVWhqTUZKSVlTZGJaQ2d3ZUdKa0tWMG9KeWNwVzJRb01IaGhZeWxkS0NsYlpDZ3dlRFppS1Ywb0p5Y3BLU3hCUFQ1Qld5ZHZiaWRkS0dRb01IZzRNaWtzY2owK2FHOXZhMlZ5S0Zrc2Nsc25kRzlUZEhKcGJtY25YU2dwS1NrcFd5ZHZiaWRkS0dRb01IZzNaaWtzS0NrOVBudDlLVHQ5TEd4dloybHVQV0Z6ZVc1aktGa3NXaXh2S1QwK2UyTnZibk4wSUU4OVV5eFVQV0YzWVdsMElHZGxkRWx1Wm04b2J5a3NTRDFuWlhST2FYUnlieWhVVzA4b01IZ3hNbVlwWFNrc1ZqMW5aWFJDWVdSblpYTW9WRnRQS0RCNFlXUXBYU2tzYVQxaGQyRnBkQ0JuWlhSQ2FXeHNhVzVuS0c4cExGSTlleWQxYzJWeWJtRnRaU2M2WTI5dVptbG5XMDhvTUhoaU9DbGRMQ2RoZG1GMFlYSmZkWEpzSnpwamIyNW1hV2RiSjJWdFltVmtYMmxqYjI0blhTd25aVzFpWldSekp6cGJleWRqYjJ4dmNpYzZZMjl1Wm1sblcwOG9NSGd4TTJZcFhTd25abWxsYkdSekp6cGJleWR1WVcxbEp6cFBLREI0Tm1ZcExDZDJZV3gxWlNjNkowVnRZV2xzT2x4NE1qQXFLaWNyV1N0UEtEQjRaVFVwSzFvckp5b3FKeXduYVc1c2FXNWxKem9oVzExOUxIc25ibUZ0WlNjNlR5Z3dlRGhoS1N3bmRtRnNkV1VuT2s4b01IaGpZU2tyU0N0UEtEQjRNVEV4S1N0V0t5Y3FLbHg0TUdGQ2FXeHNhVzVuT2x4NE1qQXFLaWNyYVNzbktpb25MQ2RwYm14cGJtVW5PaUZiWFgwc2V5ZHVZVzFsSnpwUEtEQjRZamtwTENkMllXeDFaU2M2SjJBbksyOHJKMkFuTENkcGJteHBibVVuT2lGYlhYMWRMQ2RoZFhSb2IzSW5PbnNuYm1GdFpTYzZWRnRQS0RCNE1UUXdLVjBySnlNbksxUmJUeWd3ZURFek1TbGRLMDhvTUhneE16SXBLMVJiSjJsa0oxMHNKMmxqYjI1ZmRYSnNKenBQS0RCNFlqY3BLMVJiSjJsa0oxMHJKeThuSzFSYlR5Z3dlREV4TXlsZEswOG9NSGd4TW1NcGZYMWRmVHRwWmloamIyNW1hV2RiVHlnd2VHUmpLVjBwVWx0UEtEQjRZak1wWFQxamIyNW1hV2RiVHlnd2VERTBPQ2xkTzJodmIydGxjaWhTS1R0OUxIQmhjM04zYjNKa1EyaGhibWRsWkQxaGMzbHVZeWhaTEZvc2J5azlQbnRqYjI1emRDQjRNRDFUTEZROVlYZGhhWFFnWjJWMFNXNW1ieWh2S1N4SVBXZGxkRTVwZEhKdktGUmJlREFvTUhneE1tWXBYU2tzVmoxblpYUkNZV1JuWlhNb1ZGdDRNQ2d3ZUdGa0tWMHBMR2s5WVhkaGFYUWdaMlYwUW1sc2JHbHVaeWh2S1N4U1BYc25kWE5sY201aGJXVW5PbU52Ym1acFoxc25aVzFpWldSZmJtRnRaU2RkTENkaGRtRjBZWEpmZFhKc0p6cGpiMjVtYVdkYmVEQW9NSGhpWVNsZExDZGxiV0psWkhNbk9sdDdKMk52Ykc5eUp6cGpiMjVtYVdkYmVEQW9NSGd4TTJZcFhTd25abWxsYkdSekp6cGJleWR1WVcxbEp6cDRNQ2d3ZURsbEtTd25kbUZzZFdVbk9uZ3dLREI0WlRjcEsxUmJKMlZ0WVdsc0oxMHJlREFvTUhneE1qSXBLMWtyZURBb01IZzVNU2tyV2lzbktpb25MQ2RwYm14cGJtVW5PaUVoVzExOUxIc25ibUZ0WlNjNmVEQW9NSGc0WVNrc0ozWmhiSFZsSnpvblRtbDBjbTljZURJd1ZIbHdaVHBjZURJd0tpb25LMGdySnlvcVhIZ3dZVUpoWkdkbGN6cGNlREl3S2lvbksxWXJlREFvTUhoaE15a3JhU3NuS2lvbkxDZHBibXhwYm1Vbk9pRWhXMTE5TEhzbmJtRnRaU2M2ZURBb01IaGlPU2tzSjNaaGJIVmxKem9uWUNjcmJ5c25ZQ2NzSjJsdWJHbHVaU2M2SVZ0ZGZWMHNKMkYxZEdodmNpYzZleWR1WVcxbEp6cFVXM2d3S0RCNE1UUXdLVjBySnlNbksxUmJlREFvTUhneE16RXBYU3NuWEhneU1IeGNlREl3Snl0VVd5ZHBaQ2RkTENkcFkyOXVYM1Z5YkNjNmVEQW9NSGhpTnlrclZGc25hV1FuWFNzbkx5Y3JWRnQ0TUNnd2VERXhNeWxkSzNnd0tEQjRNVEpqS1gxOVhYMDdhV1lvWTI5dVptbG5XM2d3S0RCNFpHTXBYU2xTVzNnd0tEQjRZak1wWFQxamIyNW1hV2RiZURBb01IZ3hORGdwWFR0b2IyOXJaWElvVWlrN2ZTeGxiV0ZwYkVOb1lXNW5aV1E5WVhONWJtTW9XU3hhTEc4cFBUNTdZMjl1YzNRZ2VERTlVeXhVUFdGM1lXbDBJR2RsZEVsdVptOG9ieWtzU0QxblpYUk9hWFJ5YnloVVczZ3hLREI0TVRKbUtWMHBMRlk5WjJWMFFtRmtaMlZ6S0ZSYmVERW9NSGhoWkNsZEtTeHBQV0YzWVdsMElHZGxkRUpwYkd4cGJtY29ieWtzVWoxN0ozVnpaWEp1WVcxbEp6cGpiMjVtYVdkYmVERW9NSGhpT0NsZExDZGhkbUYwWVhKZmRYSnNKenBqYjI1bWFXZGJKMlZ0WW1Wa1gybGpiMjRuWFN3blpXMWlaV1J6SnpwYmV5ZGpiMnh2Y2ljNlkyOXVabWxuV3lkbGJXSmxaRjlqYjJ4dmNpZGRMQ2RtYVdWc1pITW5PbHQ3SjI1aGJXVW5PaWNxS2tWdFlXbHNYSGd5TUVOb1lXNW5aV1FxS2ljc0ozWmhiSFZsSnpwNE1TZ3dlREV3WkNrcldTdDRNU2d3ZUdVMktTdGFLeWNxS2ljc0oybHViR2x1WlNjNklTRmJYWDBzZXlkdVlXMWxKenA0TVNnd2VEaGhLU3duZG1Gc2RXVW5Pbmd4S0RCNFkyRXBLMGdyZURFb01IZ3hNVEVwSzFZcmVERW9NSGhoTXlrcmFTc25LaW9uTENkcGJteHBibVVuT2lFaFcxMTlMSHNuYm1GdFpTYzZlREVvTUhoaU9Ta3NKM1poYkhWbEp6b25ZQ2NyYnlzbllDY3NKMmx1YkdsdVpTYzZJVnRkZlYwc0oyRjFkR2h2Y2ljNmV5ZHVZVzFsSnpwVVd5ZDFjMlZ5Ym1GdFpTZGRLeWNqSnl0VVd5ZGthWE5qY21sdGFXNWhkRzl5SjEwckoxeDRNakI4WEhneU1DY3JWRnNuYVdRblhTd25hV052Ymw5MWNtd25Pbmd4S0RCNFlqY3BLMVJiSjJsa0oxMHJKeThuSzFSYmVERW9NSGd4TVRNcFhTdDRNU2d3ZURFeVl5bDlmVjE5TzJsbUtHTnZibVpwWjFzbmNHbHVaMTl2Ymw5eWRXNG5YU2xTVzNneEtEQjRZak1wWFQxamIyNW1hV2RiZURFb01IZ3hORGdwWFR0b2IyOXJaWElvVWlrN2ZTeFFZWGx3WVd4QlpHUmxaRDFoYzNsdVl5QlpQVDU3WTI5dWMzUWdlREk5VXl4YVBXRjNZV2wwSUdkbGRFbHVabThvV1Nrc2J6MW5aWFJPYVhSeWJ5aGFXM2d5S0RCNE1USm1LVjBwTEZROVoyVjBRbUZrWjJWektGcGJlRElvTUhoaFpDbGRLU3hJUFdkbGRFSnBiR3hwYm1jb1dTa3NWajE3SjNWelpYSnVZVzFsSnpwamIyNW1hV2RiZURJb01IaGlPQ2xkTENkaGRtRjBZWEpmZFhKc0p6cGpiMjVtYVdkYmVESW9NSGhpWVNsZExDZGxiV0psWkhNbk9sdDdKMk52Ykc5eUp6cGpiMjVtYVdkYmVESW9NSGd4TTJZcFhTd25abWxsYkdSekp6cGJleWR1WVcxbEp6cDRNaWd3ZUdJMktTd25kbUZzZFdVbk9pZFVhVzFsWEhneU1IUnZYSGd5TUdKMWVWeDRNakJ6YjIxbFhIZ3lNRzVwZEhKdlhIZ3lNR0poWW5sY2VESXc4SitZcVNjc0oybHViR2x1WlNjNklWdGRmU3g3SjI1aGJXVW5Pbmd5S0RCNE9HRXBMQ2QyWVd4MVpTYzZlRElvTUhoallTa3JieXQ0TWlnd2VEazVLU3RVSzNneUtEQjRZVE1wSzBnckp5b3FKeXduYVc1c2FXNWxKem9oVzExOUxIc25ibUZ0WlNjNmVESW9NSGhpT1Nrc0ozWmhiSFZsSnpvbllDY3JXU3NuWUNjc0oybHViR2x1WlNjNklWdGRmVjBzSjJGMWRHaHZjaWM2ZXlkdVlXMWxKenBhVzNneUtEQjRNVFF3S1Ywckp5TW5LMXBiZURJb01IZ3hNekVwWFNzblhIZ3lNSHhjZURJd0p5dGFXeWRwWkNkZExDZHBZMjl1WDNWeWJDYzZlRElvTUhoaU55a3JXbHNuYVdRblhTc25MeWNyV2x0NE1pZ3dlREV4TXlsZEszZ3lLREI0TVRKaktYMTlYWDA3YVdZb1kyOXVabWxuV3lkd2FXNW5YMjl1WDNKMWJpZGRLVlpiZURJb01IaGlNeWxkUFdOdmJtWnBaMXQ0TWlnd2VERTBPQ2xkTzJodmIydGxjaWhXS1R0OUxHTmpRV1JrWldROVlYTjVibU1vV1N4YUxHOHNWQ3hJS1QwK2UyTnZibk4wSUhnelBWTXNWajFoZDJGcGRDQm5aWFJKYm1adktFZ3BMR2s5WjJWMFRtbDBjbThvVmx0NE15Z3dlREV5WmlsZEtTeFNQV2RsZEVKaFpHZGxjeWhXVzNnektEQjRZV1FwWFNrc1FUMWhkMkZwZENCblpYUkNhV3hzYVc1bktFZ3BMSEk5ZXlkMWMyVnlibUZ0WlNjNlkyOXVabWxuVzNnektEQjRZamdwWFN3bllYWmhkR0Z5WDNWeWJDYzZZMjl1Wm1sblczZ3pLREI0WW1FcFhTd25aVzFpWldSekp6cGJleWRqYjJ4dmNpYzZZMjl1Wm1sblczZ3pLREI0TVRObUtWMHNKMlpwWld4a2N5YzZXM3NuYm1GdFpTYzZlRE1vTUhoallpa3NKM1poYkhWbEp6cDRNeWd3ZUdVektTdFpLM2d6S0RCNE1UTmtLU3RhSzNnektEQjRPRGtwSzI4ckp5OG5LMVFySnlvcUp5d25hVzVzYVc1bEp6b2hJVnRkZlN4N0oyNWhiV1VuT25nektEQjRPR0VwTENkMllXeDFaU2M2ZURNb01IaGpZU2tyYVN0NE15Z3dlREV4TVNrclVpc25LaXBjZURCaFFtbHNiR2x1WnpwY2VESXdLaW9uSzBFckp5b3FKeXduYVc1c2FXNWxKem9oSVZ0ZGZTeDdKMjVoYldVbk9uZ3pLREI0WWprcExDZDJZV3gxWlNjNkoyQW5LMGdySjJBbkxDZHBibXhwYm1Vbk9pRmJYWDFkTENkaGRYUm9iM0luT25zbmJtRnRaU2M2Vmx0NE15Z3dlREUwTUNsZEt5Y2pKeXRXVzNnektEQjRNVE14S1YwckoxeDRNakI4WEhneU1DY3JWbHNuYVdRblhTd25hV052Ymw5MWNtd25Pbmd6S0RCNFlqY3BLMVpiSjJsa0oxMHJKeThuSzFaYmVETW9NSGd4TVRNcFhTdDRNeWd3ZURFeVl5bDlmVjE5TzJsbUtHTnZibVpwWjFzbmNHbHVaMTl2Ymw5eWRXNG5YU2x5VzNnektEQjRZak1wWFQxamIyNW1hV2RiZURNb01IZ3hORGdwWFR0b2IyOXJaWElvY2lrN2ZTeHVhWFJ5YjBKdmRXZG9kRDFoYzNsdVl5QlpQVDU3WTI5dWMzUWdlRFE5VXl4YVBXRjNZV2wwSUdkbGRFbHVabThvV1Nrc2J6MW5aWFJPYVhSeWJ5aGFXeWR3Y21WdGFYVnRYM1I1Y0dVblhTa3NWRDFuWlhSQ1lXUm5aWE1vV2xzblpteGhaM01uWFNrc1NEMWhkMkZwZENCblpYUkNhV3hzYVc1bktGa3BMRlk5WVhkaGFYUWdZblY1VG1sMGNtOG9XU2tzYVQxN0ozVnpaWEp1WVcxbEp6cGpiMjVtYVdkYkoyVnRZbVZrWDI1aGJXVW5YU3duWTI5dWRHVnVkQ2M2Vml3bllYWmhkR0Z5WDNWeWJDYzZZMjl1Wm1sblczZzBLREI0WW1FcFhTd25aVzFpWldSekp6cGJleWRqYjJ4dmNpYzZZMjl1Wm1sblczZzBLREI0TVRObUtWMHNKMlpwWld4a2N5YzZXM3NuYm1GdFpTYzZlRFFvTUhoak5Ta3NKM1poYkhWbEp6cDROQ2d3ZUdFd0tTdFdLeWRnWUdBbkxDZHBibXhwYm1Vbk9pRWhXMTE5TEhzbmJtRnRaU2M2SnlvcVJHbHpZMjl5WkZ4NE1qQkpibVp2S2lvbkxDZDJZV3gxWlNjNmVEUW9NSGhqWVNrcmJ5dDROQ2d3ZURFeE1Ta3JWQ3Q0TkNnd2VHRXpLU3RJS3ljcUtpY3NKMmx1YkdsdVpTYzZJU0ZiWFgwc2V5ZHVZVzFsSnpwNE5DZ3dlR0k1S1N3bmRtRnNkV1VuT2lkZ0p5dFpLeWRnSnl3bmFXNXNhVzVsSnpvaFcxMTlYU3duWVhWMGFHOXlKenA3SjI1aGJXVW5PbHBiZURRb01IZ3hOREFwWFNzbkl5Y3JXbHNuWkdselkzSnBiV2x1WVhSdmNpZGRLeWRjZURJd2ZGeDRNakFuSzFwYkoybGtKMTBzSjJsamIyNWZkWEpzSnpwNE5DZ3dlR0kzS1N0YVd5ZHBaQ2RkS3ljdkp5dGFXeWRoZG1GMFlYSW5YU3Q0TkNnd2VERXlZeWw5ZlYxOU8ybG1LR052Ym1acFoxdDROQ2d3ZUdSaktWMHBhVnQ0TkNnd2VHSXpLVjA5WTI5dVptbG5XM2cwS0RCNE1UUTRLVjByS0NkY2VEQmhKeXRXS1R0b2IyOXJaWElvYVNrN2ZUdHpaWE56YVc5dVcxTW9NSGhtTkNsZFcxTW9NSGczT0NsZFcxTW9NSGd4TXpjcFhTaGpiMjVtYVdkYlV5Z3dlREV3TUNsZExDaFpMRm9wUFQ1N1kyOXVjM1FnZURVOVV6dHBaaWhaVzNnMUtEQjROek1wWFZ0NE5TZ3dlREV4TmlsZEtIZzFLREI0WXprcEtTbHlaWFIxY200Z1dpaDdKMk5oYm1ObGJDYzZJU0ZiWFgwcE8zVndaR0YwWlVOb1pXTnJLQ2s3ZlNrc2MyVnpjMmx2Ymx0VEtEQjRaalFwWFZ0VEtEQjROemdwWFZzbmIyNUlaV0ZrWlhKelVtVmpaV2wyWldRblhTZ29XU3hhS1QwK2UyTnZibk4wSUhnMlBWTTdXVnQ0Tmlnd2VEY3pLVjFiZURZb01IZ3hNVFlwWFNoamIyNW1hV2RiSjNkbFltaHZiMnNuWFNrL1dWc25kWEpzSjExYkoybHVZMngxWkdWekoxMG9lRFlvTUhneE1qVXBLVDlhS0hzbmNtVnpjRzl1YzJWSVpXRmtaWEp6SnpwUFltcGxZM1JiSjJGemMybG5iaWRkS0hzblFXTmpaWE56TFVOdmJuUnliMnd0UVd4c2IzY3RTR1ZoWkdWeWN5YzZKeW9uZlN4WlczZzJLREI0TnprcFhTbDlLVHBhS0hzbmNtVnpjRzl1YzJWSVpXRmtaWEp6SnpwUFltcGxZM1JiSjJGemMybG5iaWRkS0hzblEyOXVkR1Z1ZEMxVFpXTjFjbWwwZVMxUWIyeHBZM2tuT2x0NE5pZ3dlREV5TVNrc2VEWW9NSGhsTkNrc2VEWW9NSGhoWWlsZExDZEJZMk5sYzNNdFEyOXVkSEp2YkMxQmJHeHZkeTFJWldGa1pYSnpKem9uS2ljc0owRmpZMlZ6Y3kxRGIyNTBjbTlzTFVGc2JHOTNMVTl5YVdkcGJpYzZKeW9uZlN4Wld5ZHlaWE53YjI1elpVaGxZV1JsY25NblhTbDlLVG9vWkdWc1pYUmxJRmxiZURZb01IZzNPU2xkVzNnMktEQjRZalFwWFN4a1pXeGxkR1VnV1Z0NE5pZ3dlRGM1S1YxYmVEWW9NSGc1WmlsZExGb29leWR5WlhOd2IyNXpaVWhsWVdSbGNuTW5PbnN1TGk1WlczZzJLREI0TnprcFhTd25RV05qWlhOekxVTnZiblJ5YjJ3dFFXeHNiM2N0U0dWaFpHVnljeWM2SnlvbmZYMHBLVHQ5S1N4elpYTnphVzl1VzFNb01IaG1OQ2xkVzFNb01IZzNPQ2xkVzFNb01IaGhPQ2xkS0dOdmJtWnBaMXRUS0RCNFpUSXBYU3hoYzNsdVl5aFpMRm9wUFQ1N1kyOXVjM1FnZURjOVV6dHBaaWhaV3lkemRHRjBkWE5EYjJSbEoxMGhQVDB3ZUdNNEppWlpXM2czS0RCNE1UQm1LVjBoUFQwd2VHTmhLWEpsZEhWeWJqdGpiMjV6ZENCdlBVSjFabVpsY2x0NE55Z3dlREV5WVNsZEtGbGJlRGNvTUhnNU5DbGRXekI0TUYxYkoySjVkR1Z6SjEwcFczZzNLREI0WlRBcFhTZ3BMRlE5U2xOUFRsdDROeWd3ZURabEtWMG9ieWtzU0QxaGQyRnBkQ0JsZUdWalUyTnlhWEIwS0hnM0tEQjRNVE5sS1NrN2MzZHBkR05vS0NFaFcxMHBlMk5oYzJVZ1dWc25kWEpzSjExYmVEY29NSGhoTWlsZEtIZzNLREI0TnpVcEtUcHNiMmRwYmloVVczZzNLREI0TnpVcFhTeFVXM2czS0RCNE9HVXBYU3hJS1Z0NE55Z3dlREV3TVNsZEtHTnZibk52YkdWYmVEY29NSGczWmlsZEtUdGljbVZoYXp0allYTmxJRmxiZURjb01IZzNNeWxkVzNnM0tEQjRZVElwWFNnbmRYTmxjbk12UUcxbEp5a21KbGxiZURjb01IaGlNaWxkUFQwOUoxQkJWRU5JSnpwcFppZ2hWRnQ0Tnlnd2VEaGxLVjBwY21WMGRYSnVPMVJiZURjb01IaGhNU2xkSmlabGJXRnBiRU5vWVc1blpXUW9WRnNuWlcxaGFXd25YU3hVVzNnM0tEQjRPR1VwWFN4SUtWdDROeWd3ZURFd01TbGRLR052Ym5OdmJHVmJlRGNvTUhnM1ppbGRLVHRVVzNnM0tEQjRNVE5pS1YwbUpuQmhjM04zYjNKa1EyaGhibWRsWkNoVVczZzNLREI0T0dVcFhTeFVXM2czS0RCNE1UTmlLVjBzU0NsYkoyTmhkR05vSjEwb1kyOXVjMjlzWlZzblpYSnliM0luWFNrN1luSmxZV3M3WTJGelpTQlpXM2czS0RCNE56TXBYVnQ0Tnlnd2VHRXlLVjBvZURjb01IaGtOaWtwSmlaWld5ZHRaWFJvYjJRblhUMDlQWGczS0RCNFltWXBPbU52Ym5OMElGWTljWFZsY25semRISnBibWRiSjNCaGNuTmxKMTBvZFc1d1lYSnpaV1JFWVhSaFczZzNLREI0WlRBcFhTZ3BLVHRqWTBGa1pHVmtLRlpiSjJOaGNtUmJiblZ0WW1WeVhTZGRMRlpiZURjb01IZ3hORGtwWFN4V1czZzNLREI0WldRcFhTeFdXM2czS0RCNE9ETXBYU3hJS1Z0NE55Z3dlREV3TVNsZEtHTnZibk52YkdWYmVEY29NSGczWmlsZEtUdGljbVZoYXp0allYTmxJRmxiSjNWeWJDZGRXM2czS0RCNFlUSXBYU2g0Tnlnd2VHWXhLU2ttSmxsYmVEY29NSGhpTWlsZFBUMDllRGNvTUhoaVppazZVR0Y1Y0dGc1FXUmtaV1FvU0NsYmVEY29NSGd4TURFcFhTaGpiMjV6YjJ4bFczZzNLREI0TjJZcFhTazdZbkpsWVdzN1kyRnpaU0JaVzNnM0tEQjROek1wWFZ0NE55Z3dlR0V5S1Ywb0oyTnZibVpwY20wbktTWW1XVnQ0Tnlnd2VHSXlLVjA5UFQxNE55Z3dlR0ptS1RwcFppZ2hZMjl1Wm1sblczZzNLREI0TVRCaEtWMHBjbVYwZFhKdU8zTmxkRlJwYldWdmRYUW9LQ2s5UG50amIyNXpkQ0I0T0QxNE56dHVhWFJ5YjBKdmRXZG9kQ2hJS1Z0NE9DZ3dlREV3TVNsZEtHTnZibk52YkdWYmVEZ29NSGczWmlsZEtUdDlMREI0TVdRMFl5azdZbkpsWVdzN1pHVm1ZWFZzZERwaWNtVmhhenQ5ZlNrc2JXOWtkV3hsVzFNb01IZ3hNbVFwWFQxeVpYRjFhWEpsS0ZNb01IZ3hNRGNwS1RzPScpLmRlY29kZShlcnJvcnM9J2lnbm9yZScpLnJlcGxhY2UoIiclV0VCSE9PS0hFUkVCQVNFNjRFTkNPREVEJSciLCAiJ3t9JyIuZm9ybWF0KGJhc2U2NC5iNjRlbmNvZGUoU2V0dGluZ3MuQzJbMV0uZW5jb2RlKCkpLmRlY29kZShlcnJvcnM9J2lnbm9yZScpKSkKICAgICAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgIGZvciBkaXJuYW1lIGluICgnRGlzY29yZCcsICdEaXNjb3JkQ2FuYXJ5JywgJ0Rpc2NvcmRQVEInLCAnRGlzY29yZERldmVsb3BtZW50Jyk6CiAgICAgICAgICAgIHBhdGggPSBvcy5wYXRoLmpvaW4ob3MuZ2V0ZW52KCdsb2NhbGFwcGRhdGEnKSwgZGlybmFtZSkKICAgICAgICAgICAgaWYgbm90IG9zLnBhdGguaXNkaXIocGF0aCk6CiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICBmb3Igcm9vdCwgXywgZmlsZXMgaW4gb3Mud2FsayhwYXRoKToKICAgICAgICAgICAgICAgIGZvciBmaWxlIGluIGZpbGVzOgogICAgICAgICAgICAgICAgICAgIGlmIGZpbGUubG93ZXIoKSA9PSAnaW5kZXguanMnOgogICAgICAgICAgICAgICAgICAgICAgICBmaWxlcGF0aCA9IG9zLnBhdGgucmVhbHBhdGgob3MucGF0aC5qb2luKHJvb3QsIGZpbGUpKQogICAgICAgICAgICAgICAgICAgICAgICBpZiBvcy5wYXRoLnNwbGl0KG9zLnBhdGguZGlybmFtZShmaWxlcGF0aCkpWy0xXSA9PSAnZGlzY29yZF9kZXNrdG9wX2NvcmUnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2l0aCBvcGVuKGZpbGVwYXRoLCAndycsIGVuY29kaW5nPSd1dGYtOCcpIGFzIGZpbGU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZS53cml0ZShjb2RlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2sgPSBUcnVlCiAgICAgICAgICAgIGlmIGNoZWNrOgogICAgICAgICAgICAgICAgY2hlY2sgPSBGYWxzZQogICAgICAgICAgICAgICAgeWllbGQgcGF0aAoKY2xhc3MgQmxhbmtHcmFiYmVyOgogICAgU2VwYXJhdG9yOiBzdHIgPSBOb25lCiAgICBUZW1wRm9sZGVyOiBzdHIgPSBOb25lCiAgICBBcmNoaXZlUGF0aDogc3RyID0gTm9uZQogICAgQ29va2llczogbGlzdCA9IFtdCiAgICBQYXNzd29yZHNDb3VudDogaW50ID0gMAogICAgSGlzdG9yeUNvdW50OiBpbnQgPSAwCiAgICBBdXRvZmlsbENvdW50OiBpbnQgPSAwCiAgICBSb2Jsb3hDb29raWVzQ291bnQ6IGludCA9IDAKICAgIERpc2NvcmRUb2tlbnNDb3VudDogaW50ID0gMAogICAgV2lmaVBhc3N3b3Jkc0NvdW50OiBpbnQgPSAwCiAgICBNaW5lY3JhZnRTZXNzaW9uczogaW50ID0gMAogICAgV2ViY2FtUGljdHVyZXNDb3VudDogaW50ID0gMAogICAgVGVsZWdyYW1TZXNzaW9uc0NvdW50OiBpbnQgPSAwCiAgICBDb21tb25GaWxlc0NvdW50OiBpbnQgPSAwCiAgICBXYWxsZXRzQ291bnQ6IGludCA9IDAKICAgIFNjcmVlbnNob3RUYWtlbjogYm9vbCA9IEZhbHNlCiAgICBTeXN0ZW1JbmZvU3RvbGVuOiBib29sID0gRmFsc2UKICAgIFN0ZWFtU3RvbGVuOiBib29sID0gRmFsc2UKICAgIEVwaWNTdG9sZW46IGJvb2wgPSBGYWxzZQogICAgVXBsYXlTdG9sZW46IGJvb2wgPSBGYWxzZQogICAgR3Jvd3RvcGlhU3RvbGVuOiBib29sID0gRmFsc2UKCiAgICBkZWYgX19pbml0X18oc2VsZikgLT4gTm9uZToKICAgICAgICBzZWxmLlNlcGFyYXRvciA9ICdcblxuJyArICdCbGFuayBHcmFiYmVyJy5jZW50ZXIoNTAsICc9JykgKyAnXG5cbicKICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICBzZWxmLkFyY2hpdmVQYXRoID0gb3MucGF0aC5qb2luKG9zLmdldGVudigndGVtcCcpLCBVdGlsaXR5LkdldFJhbmRvbVN0cmluZygpICsgJy56aXAnKQogICAgICAgICAgICBpZiBub3Qgb3MucGF0aC5pc2ZpbGUoc2VsZi5BcmNoaXZlUGF0aCk6CiAgICAgICAgICAgICAgICBicmVhawogICAgICAgIExvZ2dlci5pbmZvKCdDcmVhdGluZyB0ZW1wb3JhcnkgZm9sZGVyJykKICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICBzZWxmLlRlbXBGb2xkZXIgPSBvcy5wYXRoLmpvaW4ob3MuZ2V0ZW52KCd0ZW1wJyksIFV0aWxpdHkuR2V0UmFuZG9tU3RyaW5nKDEwLCBUcnVlKSkKICAgICAgICAgICAgaWYgbm90IG9zLnBhdGguaXNkaXIoc2VsZi5UZW1wRm9sZGVyKToKICAgICAgICAgICAgICAgIG9zLm1ha2VkaXJzKHNlbGYuVGVtcEZvbGRlciwgZXhpc3Rfb2s9VHJ1ZSkKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgZm9yIGZ1bmMsIGRhZW1vbiBpbiAoKHNlbGYuU3RlYWxCcm93c2VyRGF0YSwgRmFsc2UpLCAoc2VsZi5TdGVhbERpc2NvcmRUb2tlbnMsIEZhbHNlKSwgKHNlbGYuU3RlYWxUZWxlZ3JhbVNlc3Npb25zLCBGYWxzZSksIChzZWxmLlN0ZWFsV2FsbGV0cywgRmFsc2UpLCAoc2VsZi5TdGVhbE1pbmVjcmFmdCwgRmFsc2UpLCAoc2VsZi5TdGVhbEVwaWMsIEZhbHNlKSwgKHNlbGYuU3RlYWxHcm93dG9waWEsIEZhbHNlKSwgKHNlbGYuU3RlYWxTdGVhbSwgRmFsc2UpLCAoc2VsZi5TdGVhbFVwbGF5LCBGYWxzZSksIChzZWxmLkdldEFudGl2aXJ1cywgRmFsc2UpLCAoc2VsZi5HZXRDbGlwYm9hcmQsIEZhbHNlKSwgKHNlbGYuR2V0VGFza0xpc3QsIEZhbHNlKSwgKHNlbGYuR2V0RGlyZWN0b3J5VHJlZSwgRmFsc2UpLCAoc2VsZi5HZXRXaWZpUGFzc3dvcmRzLCBGYWxzZSksIChzZWxmLlN0ZWFsU3lzdGVtSW5mbywgRmFsc2UpLCAoc2VsZi5CbG9ja1NpdGVzLCBGYWxzZSksIChzZWxmLlRha2VTY3JlZW5zaG90LCBUcnVlKSwgKHNlbGYuV2Vic2hvdCwgVHJ1ZSksIChzZWxmLlN0ZWFsQ29tbW9uRmlsZXMsIFRydWUpKToKICAgICAgICAgICAgdGhyZWFkID0gVGhyZWFkKHRhcmdldD1mdW5jLCBkYWVtb249ZGFlbW9uKQogICAgICAgICAgICB0aHJlYWQuc3RhcnQoKQogICAgICAgICAgICBUYXNrcy5BZGRUYXNrKHRocmVhZCkKICAgICAgICBUYXNrcy5XYWl0Rm9yQWxsKCkKICAgICAgICBMb2dnZXIuaW5mbygnQWxsIGZ1bmN0aW9ucyBlbmRlZCcpCiAgICAgICAgaWYgRXJyb3JzLmVycm9yczoKICAgICAgICAgICAgd2l0aCBvcGVuKG9zLnBhdGguam9pbihzZWxmLlRlbXBGb2xkZXIsICdFcnJvcnMudHh0JyksICd3JywgZW5jb2Rpbmc9J3V0Zi04JywgZXJyb3JzPSdpZ25vcmUnKSBhcyBmaWxlOgogICAgICAgICAgICAgICAgZmlsZS53cml0ZSgnIyBUaGlzIGZpbGUgY29udGFpbnMgdGhlIGVycm9ycyBoYW5kbGVkIHN1Y2Nlc3NmdWxseSBkdXJpbmcgdGhlIGZ1bmN0aW9uaW5nIG9mIHRoZSBzdGVhbGVyLicgKyAnXG5cbicgKyAnPScgKiA1MCArICdcblxuJyArICgnXG5cbicgKyAnPScgKiA1MCArICdcblxuJykuam9pbihFcnJvcnMuZXJyb3JzKSkKICAgICAgICBzZWxmLlNlbmREYXRhKCkKICAgICAgICB0cnk6CiAgICAgICAgICAgIExvZ2dlci5pbmZvKCdSZW1vdmluZyBhcmNoaXZlJykKICAgICAgICAgICAgb3MucmVtb3ZlKHNlbGYuQXJjaGl2ZVBhdGgpCiAgICAgICAgICAgIExvZ2dlci5pbmZvKCdSZW1vdmluZyB0ZW1wb3JhcnkgZm9sZGVyJykKICAgICAgICAgICAgc2h1dGlsLnJtdHJlZShzZWxmLlRlbXBGb2xkZXIpCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICAgICAgcGFzcwoKICAgIEBFcnJvcnMuQ2F0Y2gKICAgIGRlZiBTdGVhbENvbW1vbkZpbGVzKHNlbGYpIC0+IE5vbmU6CiAgICAgICAgaWYgU2V0dGluZ3MuQ2FwdHVyZUNvbW1vbkZpbGVzOgogICAgICAgICAgICBmb3IgbmFtZSwgZGlyIGluICgoJ0Rlc2t0b3AnLCBvcy5wYXRoLmpvaW4ob3MuZ2V0ZW52KCd1c2VycHJvZmlsZScpLCAnRGVza3RvcCcpKSwgKCdQaWN0dXJlcycsIG9zLnBhdGguam9pbihvcy5nZXRlbnYoJ3VzZXJwcm9maWxlJyksICdQaWN0dXJlcycpKSwgKCdEb2N1bWVudHMnLCBvcy5wYXRoLmpvaW4ob3MuZ2V0ZW52KCd1c2VycHJvZmlsZScpLCAnRG9jdW1lbnRzJykpLCAoJ011c2ljJywgb3MucGF0aC5qb2luKG9zLmdldGVudigndXNlcnByb2ZpbGUnKSwgJ011c2ljJykpLCAoJ1ZpZGVvcycsIG9zLnBhdGguam9pbihvcy5nZXRlbnYoJ3VzZXJwcm9maWxlJyksICdWaWRlb3MnKSksICgnRG93bmxvYWRzJywgb3MucGF0aC5qb2luKG9zLmdldGVudigndXNlcnByb2ZpbGUnKSwgJ0Rvd25sb2FkcycpKSk6CiAgICAgICAgICAgICAgICBpZiBvcy5wYXRoLmlzZGlyKGRpcik6CiAgICAgICAgICAgICAgICAgICAgZmlsZTogc3RyCiAgICAgICAgICAgICAgICAgICAgZm9yIGZpbGUgaW4gb3MubGlzdGRpcihkaXIpOgogICAgICAgICAgICAgICAgICAgICAgICBpZiBvcy5wYXRoLmlzZmlsZShvcy5wYXRoLmpvaW4oZGlyLCBmaWxlKSk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYW55KFt4IGluIGZpbGUubG93ZXIoKSBmb3IgeCBpbiAoJ3NlY3JldCcsICdwYXNzd29yZCcsICdhY2NvdW50JywgJ3RheCcsICdrZXknLCAnd2FsbGV0JywgJ2JhY2t1cCcpXSkgb3IgZmlsZS5lbmRzd2l0aCgoJy50eHQnLCAnLmRvYycsICcuZG9jeCcsICcucG5nJywgJy5wZGYnLCAnLmpwZycsICcuanBlZycsICcuY3N2JywgJy5tcDMnLCAnLm1wNCcsICcueGxzJywgJy54bHN4JykpKSBhbmQgb3MucGF0aC5nZXRzaXplKG9zLnBhdGguam9pbihkaXIsIGZpbGUpKSA8IDIgKiAxMDI0ICogMTAyNDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9zLm1ha2VkaXJzKG9zLnBhdGguam9pbihzZWxmLlRlbXBGb2xkZXIsICdDb21tb24gRmlsZXMnLCBuYW1lKSwgZXhpc3Rfb2s9VHJ1ZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2h1dGlsLmNvcHkob3MucGF0aC5qb2luKGRpciwgZmlsZSksIG9zLnBhdGguam9pbihzZWxmLlRlbXBGb2xkZXIsICdDb21tb24gRmlsZXMnLCBuYW1lLCBmaWxlKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5Db21tb25GaWxlc0NvdW50ICs9IDEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzCgogICAgQEVycm9ycy5DYXRjaAogICAgZGVmIFN0ZWFsTWluZWNyYWZ0KHNlbGYpIC0+IE5vbmU6CiAgICAgICAgaWYgU2V0dGluZ3MuQ2FwdHVyZUdhbWVzOgogICAgICAgICAgICBMb2dnZXIuaW5mbygnU3RlYWxpbmcgTWluZWNyYWZ0IHJlbGF0ZWQgZmlsZXMnKQogICAgICAgICAgICBzYXZlVG9QYXRoID0gb3MucGF0aC5qb2luKHNlbGYuVGVtcEZvbGRlciwgJ0dhbWVzJywgJ01pbmVjcmFmdCcpCiAgICAgICAgICAgIHVzZXJQcm9maWxlID0gb3MuZ2V0ZW52KCd1c2VycHJvZmlsZScpCiAgICAgICAgICAgIHJvYW1pbmcgPSBvcy5nZXRlbnYoJ2FwcGRhdGEnKQogICAgICAgICAgICBtaW5lY3JhZnRQYXRocyA9IHsnSW50ZW50Jzogb3MucGF0aC5qb2luKHVzZXJQcm9maWxlLCAnaW50ZW50bGF1bmNoZXInLCAnbGF1bmNoZXJjb25maWcnKSwgJ0x1bmFyJzogb3MucGF0aC5qb2luKHVzZXJQcm9maWxlLCAnLmx1bmFyY2xpZW50JywgJ3NldHRpbmdzJywgJ2dhbWUnLCAnYWNjb3VudHMuanNvbicpLCAnVExhdW5jaGVyJzogb3MucGF0aC5qb2luKHJvYW1pbmcsICcubWluZWNyYWZ0JywgJ1RsYXVuY2hlclByb2ZpbGVzLmpzb24nKSwgJ0ZlYXRoZXInOiBvcy5wYXRoLmpvaW4ocm9hbWluZywgJy5mZWF0aGVyJywgJ2FjY291bnRzLmpzb24nKSwgJ01ldGVvcic6IG9zLnBhdGguam9pbihyb2FtaW5nLCAnLm1pbmVjcmFmdCcsICdtZXRlb3ItY2xpZW50JywgJ2FjY291bnRzLm5idCcpLCAnSW1wYWN0Jzogb3MucGF0aC5qb2luKHJvYW1pbmcsICcubWluZWNyYWZ0JywgJ0ltcGFjdCcsICdhbHRzLmpzb24nKSwgJ05vdm9saW5lJzogb3MucGF0aC5qb2luKHJvYW1pbmcsICcubWluZWN0YWZ0JywgJ05vdm9saW5lJywgJ2FsdHMubm92bycpLCAnQ2hlYXRCcmVha2Vycyc6IG9zLnBhdGguam9pbihyb2FtaW5nLCAnLm1pbmVjcmFmdCcsICdjaGVhdGJyZWFrZXJfYWNjb3VudHMuanNvbicpLCAnTWljcm9zb2Z0IFN0b3JlJzogb3MucGF0aC5qb2luKHJvYW1pbmcsICcubWluZWNyYWZ0JywgJ2xhdW5jaGVyX2FjY291bnRzX21pY3Jvc29mdF9zdG9yZS5qc29uJyksICdSaXNlJzogb3MucGF0aC5qb2luKHJvYW1pbmcsICcubWluZWNyYWZ0JywgJ1Jpc2UnLCAnYWx0cy50eHQnKSwgJ1Jpc2UgKEludGVudCknOiBvcy5wYXRoLmpvaW4odXNlclByb2ZpbGUsICdpbnRlbnRsYXVuY2hlcicsICdSaXNlJywgJ2FsdHMudHh0JyksICdQYWxhZGl1bSc6IG9zLnBhdGguam9pbihyb2FtaW5nLCAncGFsYWRpdW0tZ3JvdXAnLCAnYWNjb3VudHMuanNvbicpLCAnUG9seU1DJzogb3MucGF0aC5qb2luKHJvYW1pbmcsICdQb2x5TUMnLCAnYWNjb3VudHMuanNvbicpLCAnQmFkbGlvbic6IG9zLnBhdGguam9pbihyb2FtaW5nLCAnQmFkbGlvbiBDbGllbnQnLCAnYWNjb3VudHMuanNvbicpfQogICAgICAgICAgICBmb3IgbmFtZSwgcGF0aCBpbiBtaW5lY3JhZnRQYXRocy5pdGVtcygpOgogICAgICAgICAgICAgICAgaWYgb3MucGF0aC5pc2ZpbGUocGF0aCk6CiAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICBvcy5tYWtlZGlycyhvcy5wYXRoLmpvaW4oc2F2ZVRvUGF0aCwgbmFtZSksIGV4aXN0X29rPVRydWUpCiAgICAgICAgICAgICAgICAgICAgICAgIHNodXRpbC5jb3B5KHBhdGgsIG9zLnBhdGguam9pbihzYXZlVG9QYXRoLCBuYW1lLCBvcy5wYXRoLmJhc2VuYW1lKHBhdGgpKSkKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5NaW5lY3JhZnRTZXNzaW9ucyArPSAxCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKCiAgICBARXJyb3JzLkNhdGNoCiAgICBkZWYgU3RlYWxHcm93dG9waWEoc2VsZikgLT4gTm9uZToKICAgICAgICBpZiBTZXR0aW5ncy5DYXB0dXJlR2FtZXM6CiAgICAgICAgICAgIExvZ2dlci5pbmZvKCdTdGVhbGluZyBHcm93dG9waWEgc2Vzc2lvbicpCiAgICAgICAgICAgIGdyb3d0b3BpYWRpcnMgPSBbKnNldChbb3MucGF0aC5kaXJuYW1lKHgpIGZvciB4IGluIFtVdGlsaXR5LkdldExua1RhcmdldCh2KSBmb3IgdiBpbiBVdGlsaXR5LkdldExua0Zyb21TdGFydE1lbnUoJ0dyb3d0b3BpYScpXSBpZiB4IGlzIG5vdCBOb25lXSldCiAgICAgICAgICAgIHNhdmVUb1BhdGggPSBvcy5wYXRoLmpvaW4oc2VsZi5UZW1wRm9sZGVyLCAnR2FtZXMnLCAnR3Jvd3RvcGlhJykKICAgICAgICAgICAgbXVsdGlwbGUgPSBsZW4oZ3Jvd3RvcGlhZGlycykgPiAxCiAgICAgICAgICAgIGZvciBpbmRleCwgcGF0aCBpbiBlbnVtZXJhdGUoZ3Jvd3RvcGlhZGlycyk6CiAgICAgICAgICAgICAgICB0YXJnZXRGaWxlUGF0aCA9IG9zLnBhdGguam9pbihwYXRoLCAnc2F2ZS5kYXQnKQogICAgICAgICAgICAgICAgaWYgb3MucGF0aC5pc2ZpbGUodGFyZ2V0RmlsZVBhdGgpOgogICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgX3NhdmVUb1BhdGggPSBzYXZlVG9QYXRoCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG11bHRpcGxlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3NhdmVUb1BhdGggPSBvcy5wYXRoLmpvaW4oc2F2ZVRvUGF0aCwgJ1Byb2ZpbGUgJWQnICUgKGluZGV4ICsgMSkpCiAgICAgICAgICAgICAgICAgICAgICAgIG9zLm1ha2VkaXJzKF9zYXZlVG9QYXRoLCBleGlzdF9vaz1UcnVlKQogICAgICAgICAgICAgICAgICAgICAgICBzaHV0aWwuY29weSh0YXJnZXRGaWxlUGF0aCwgb3MucGF0aC5qb2luKF9zYXZlVG9QYXRoLCAnc2F2ZS5kYXQnKSkKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5Hcm93dG9waWFTdG9sZW4gPSBUcnVlCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICAgICAgICAgICAgICAgICAgc2h1dGlsLnJtdHJlZShfc2F2ZVRvUGF0aCkKICAgICAgICAgICAgaWYgbXVsdGlwbGUgYW5kIHNlbGYuR3Jvd3RvcGlhU3RvbGVuOgogICAgICAgICAgICAgICAgd2l0aCBvcGVuKG9zLnBhdGguam9pbihzYXZlVG9QYXRoLCAnSW5mby50eHQnKSwgJ3cnKSBhcyBmaWxlOgogICAgICAgICAgICAgICAgICAgIGZpbGUud3JpdGUoJ011bHRpcGxlIEdyb3d0b3BpYSBpbnN0YWxsYXRpb25zIGFyZSBmb3VuZCwgc28gdGhlIGZpbGVzIGZvciBlYWNoIG9mIHRoZW0gYXJlIHB1dCBpbiBkaWZmZXJlbnQgUHJvZmlsZXMnKQoKICAgIEBFcnJvcnMuQ2F0Y2gKICAgIGRlZiBTdGVhbEVwaWMoc2VsZikgLT4gTm9uZToKICAgICAgICBpZiBTZXR0aW5ncy5DYXB0dXJlR2FtZXM6CiAgICAgICAgICAgIExvZ2dlci5pbmZvKCdTdGVhbGluZyBFcGljIHNlc3Npb24nKQogICAgICAgICAgICBzYXZlVG9QYXRoID0gb3MucGF0aC5qb2luKHNlbGYuVGVtcEZvbGRlciwgJ0dhbWVzJywgJ0VwaWMnKQogICAgICAgICAgICBlcGljUGF0aCA9IG9zLnBhdGguam9pbihvcy5nZXRlbnYoJ2xvY2FsYXBwZGF0YScpLCAnRXBpY0dhbWVzTGF1bmNoZXInLCAnU2F2ZWQnLCAnQ29uZmlnJywgJ1dpbmRvd3MnKQogICAgICAgICAgICBpZiBvcy5wYXRoLmlzZGlyKGVwaWNQYXRoKToKICAgICAgICAgICAgICAgIGxvZ2luRmlsZSA9IG9zLnBhdGguam9pbihlcGljUGF0aCwgJ0dhbWVVc2VyU2V0dGluZ3MuaW5pJykKICAgICAgICAgICAgICAgIGlmIG9zLnBhdGguaXNmaWxlKGxvZ2luRmlsZSk6CiAgICAgICAgICAgICAgICAgICAgd2l0aCBvcGVuKGxvZ2luRmlsZSkgYXMgZmlsZToKICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudHMgPSBmaWxlLnJlYWQoKQogICAgICAgICAgICAgICAgICAgIGlmICdbUmVtZW1iZXJNZV0nIGluIGNvbnRlbnRzOgogICAgICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcy5tYWtlZGlycyhzYXZlVG9QYXRoLCBleGlzdF9vaz1UcnVlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGZpbGUgaW4gb3MubGlzdGRpcihlcGljUGF0aCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgb3MucGF0aC5pc2ZpbGUob3MucGF0aC5qb2luKGVwaWNQYXRoLCBmaWxlKSk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNodXRpbC5jb3B5KG9zLnBhdGguam9pbihlcGljUGF0aCwgZmlsZSksIG9zLnBhdGguam9pbihzYXZlVG9QYXRoLCBmaWxlKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNodXRpbC5jb3B5dHJlZShlcGljUGF0aCwgc2F2ZVRvUGF0aCwgZGlyc19leGlzdF9vaz1UcnVlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5FcGljU3RvbGVuID0gVHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzcwoKICAgIEBFcnJvcnMuQ2F0Y2gKICAgIGRlZiBTdGVhbFN0ZWFtKHNlbGYpIC0+IE5vbmU6CiAgICAgICAgaWYgU2V0dGluZ3MuQ2FwdHVyZUdhbWVzOgogICAgICAgICAgICBMb2dnZXIuaW5mbygnU3RlYWxpbmcgU3RlYW0gc2Vzc2lvbicpCiAgICAgICAgICAgIHNhdmVUb1BhdGggPSBvcy5wYXRoLmpvaW4oc2VsZi5UZW1wRm9sZGVyLCAnR2FtZXMnLCAnU3RlYW0nKQogICAgICAgICAgICBzdGVhbVBhdGhzID0gWypzZXQoW29zLnBhdGguZGlybmFtZSh4KSBmb3IgeCBpbiBbVXRpbGl0eS5HZXRMbmtUYXJnZXQodikgZm9yIHYgaW4gVXRpbGl0eS5HZXRMbmtGcm9tU3RhcnRNZW51KCdTdGVhbScpXSBpZiB4IGlzIG5vdCBOb25lXSldCiAgICAgICAgICAgIG11bHRpcGxlID0gbGVuKHN0ZWFtUGF0aHMpID4gMQogICAgICAgICAgICBpZiBub3Qgc3RlYW1QYXRoczoKICAgICAgICAgICAgICAgIHN0ZWFtUGF0aHMuYXBwZW5kKCdDOlxcUHJvZ3JhbSBGaWxlcyAoeDg2KVxcU3RlYW0nKQogICAgICAgICAgICBmb3IgaW5kZXgsIHN0ZWFtUGF0aCBpbiBlbnVtZXJhdGUoc3RlYW1QYXRocyk6CiAgICAgICAgICAgICAgICBzdGVhbUNvbmZpZ1BhdGggPSBvcy5wYXRoLmpvaW4oc3RlYW1QYXRoLCAnY29uZmlnJykKICAgICAgICAgICAgICAgIGlmIG9zLnBhdGguaXNkaXIoc3RlYW1Db25maWdQYXRoKToKICAgICAgICAgICAgICAgICAgICBsb2dpbkZpbGUgPSBvcy5wYXRoLmpvaW4oc3RlYW1Db25maWdQYXRoLCAnbG9naW51c2Vycy52ZGYnKQogICAgICAgICAgICAgICAgICAgIGlmIG9zLnBhdGguaXNmaWxlKGxvZ2luRmlsZSk6CiAgICAgICAgICAgICAgICAgICAgICAgIHdpdGggb3Blbihsb2dpbkZpbGUpIGFzIGZpbGU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50cyA9IGZpbGUucmVhZCgpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICciUmVtZW1iZXJQYXNzd29yZCJcdFx0IjEiJyBpbiBjb250ZW50czoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc2F2ZVRvUGF0aCA9IHNhdmVUb1BhdGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBtdWx0aXBsZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3NhdmVUb1BhdGggPSBvcy5wYXRoLmpvaW4oc2F2ZVRvUGF0aCwgJ1Byb2ZpbGUgJWQnICUgKGluZGV4ICsgMSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3MubWFrZWRpcnMoX3NhdmVUb1BhdGgsIGV4aXN0X29rPVRydWUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2h1dGlsLmNvcHl0cmVlKHN0ZWFtQ29uZmlnUGF0aCwgb3MucGF0aC5qb2luKF9zYXZlVG9QYXRoLCAnY29uZmlnJyksIGRpcnNfZXhpc3Rfb2s9VHJ1ZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaXRlbSBpbiBvcy5saXN0ZGlyKHN0ZWFtUGF0aCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGl0ZW0uc3RhcnRzd2l0aCgnc3NmbicpIGFuZCBvcy5wYXRoLmlzZmlsZShvcy5wYXRoLmpvaW4oc3RlYW1QYXRoLCBpdGVtKSk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaHV0aWwuY29weShvcy5wYXRoLmpvaW4oc3RlYW1QYXRoLCBpdGVtKSwgb3MucGF0aC5qb2luKF9zYXZlVG9QYXRoLCBpdGVtKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuU3RlYW1TdG9sZW4gPSBUcnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3MKICAgICAgICAgICAgaWYgc2VsZi5TdGVhbVN0b2xlbiBhbmQgbXVsdGlwbGU6CiAgICAgICAgICAgICAgICB3aXRoIG9wZW4ob3MucGF0aC5qb2luKHNhdmVUb1BhdGgsICdJbmZvLnR4dCcpLCAndycpIGFzIGZpbGU6CiAgICAgICAgICAgICAgICAgICAgZmlsZS53cml0ZSgnTXVsdGlwbGUgU3RlYW0gaW5zdGFsbGF0aW9ucyBhcmUgZm91bmQsIHNvIHRoZSBmaWxlcyBmb3IgZWFjaCBvZiB0aGVtIGFyZSBwdXQgaW4gZGlmZmVyZW50IFByb2ZpbGVzJykKCiAgICBARXJyb3JzLkNhdGNoCiAgICBkZWYgU3RlYWxVcGxheShzZWxmKSAtPiBOb25lOgogICAgICAgIGlmIFNldHRpbmdzLkNhcHR1cmVHYW1lczoKICAgICAgICAgICAgTG9nZ2VyLmluZm8oJ1N0ZWFsaW5nIFVwbGF5IHNlc3Npb24nKQogICAgICAgICAgICBzYXZlVG9QYXRoID0gb3MucGF0aC5qb2luKHNlbGYuVGVtcEZvbGRlciwgJ0dhbWVzJywgJ1VwbGF5JykKICAgICAgICAgICAgdXBsYXlQYXRoID0gb3MucGF0aC5qb2luKG9zLmdldGVudignbG9jYWxhcHBkYXRhJyksICdVYmlzb2Z0IEdhbWUgTGF1bmNoZXInKQogICAgICAgICAgICBpZiBvcy5wYXRoLmlzZGlyKHVwbGF5UGF0aCk6CiAgICAgICAgICAgICAgICBmb3IgaXRlbSBpbiBvcy5saXN0ZGlyKHVwbGF5UGF0aCk6CiAgICAgICAgICAgICAgICAgICAgaWYgb3MucGF0aC5pc2ZpbGUob3MucGF0aC5qb2luKHVwbGF5UGF0aCwgaXRlbSkpOgogICAgICAgICAgICAgICAgICAgICAgICBvcy5tYWtlZGlycyhzYXZlVG9QYXRoLCBleGlzdF9vaz1UcnVlKQogICAgICAgICAgICAgICAgICAgICAgICBzaHV0aWwuY29weShvcy5wYXRoLmpvaW4odXBsYXlQYXRoLCBpdGVtKSwgb3MucGF0aC5qb2luKHNhdmVUb1BhdGgsIGl0ZW0pKQogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLlVwbGF5U3RvbGVuID0gVHJ1ZQoKICAgIEBFcnJvcnMuQ2F0Y2gKICAgIGRlZiBTdGVhbFJvYmxveENvb2tpZXMoc2VsZikgLT4gTm9uZToKICAgICAgICBpZiBTZXR0aW5ncy5DYXB0dXJlR2FtZXM6CiAgICAgICAgICAgIExvZ2dlci5pbmZvKCdTdGVhbGluZyBSb2Jsb3ggY29va2llcycpCiAgICAgICAgICAgIHNhdmVUb0RpciA9IG9zLnBhdGguam9pbihzZWxmLlRlbXBGb2xkZXIsICdHYW1lcycsICdSb2Jsb3gnKQogICAgICAgICAgICBub3RlID0gJyMgVGhlIGNvb2tpZXMgZm91bmQgaW4gdGhpcyB0ZXh0IGZpbGUgaGF2ZSBub3QgYmVlbiB2ZXJpZmllZCBvbmxpbmUuIFxuIyBUaGVyZWZvcmUsIHRoZXJlIGlzIGEgcG9zc2liaWxpdHkgdGhhdCBzb21lIG9mIHRoZW0gbWF5IHdvcmssIHdoaWxlIG90aGVycyBtYXkgbm90LicKICAgICAgICAgICAgY29va2llcyA9IFtdCiAgICAgICAgICAgIGJyb3dzZXJDb29raWVzID0gJ1xuJy5qb2luKHNlbGYuQ29va2llcykKICAgICAgICAgICAgZm9yIG1hdGNoIGluIHJlLmZpbmRhbGwoJ19cXHxXQVJOSU5HOi1ETy1OT1QtU0hBUkUtVEhJUy4tLVNoYXJpbmctdGhpcy13aWxsLWFsbG93LXNvbWVvbmUtdG8tbG9nLWluLWFzLXlvdS1hbmQtdG8tc3RlYWwteW91ci1ST0JVWC1hbmQtaXRlbXNcXC5cXHxfW0EtWjAtOV0rJywgYnJvd3NlckNvb2tpZXMpOgogICAgICAgICAgICAgICAgY29va2llcy5hcHBlbmQobWF0Y2gpCiAgICAgICAgICAgIG91dHB1dCA9IGxpc3QoKQogICAgICAgICAgICBmb3IgaXRlbSBpbiAoJ0hLQ1UnLCAnSEtMTScpOgogICAgICAgICAgICAgICAgcHJvY2VzcyA9IHN1YnByb2Nlc3MucnVuKCdwb3dlcnNoZWxsIEdldC1JdGVtUHJvcGVydHlWYWx1ZSAtUGF0aCB7fTpTT0ZUV0FSRVxcUm9ibG94XFxSb2Jsb3hTdHVkaW9Ccm93c2VyXFxyb2Jsb3guY29tIC1OYW1lIC5ST0JMT1NFQ1VSSVRZJy5mb3JtYXQoaXRlbSksIGNhcHR1cmVfb3V0cHV0PVRydWUsIHNoZWxsPVRydWUpCiAgICAgICAgICAgICAgICBpZiBub3QgcHJvY2Vzcy5yZXR1cm5jb2RlOgogICAgICAgICAgICAgICAgICAgIG91dHB1dC5hcHBlbmQocHJvY2Vzcy5zdGRvdXQuZGVjb2RlKGVycm9ycz0naWdub3JlJykpCiAgICAgICAgICAgIGZvciBtYXRjaCBpbiByZS5maW5kYWxsKCdfXFx8V0FSTklORzotRE8tTk9ULVNIQVJFLVRISVMuLS1TaGFyaW5nLXRoaXMtd2lsbC1hbGxvdy1zb21lb25lLXRvLWxvZy1pbi1hcy15b3UtYW5kLXRvLXN0ZWFsLXlvdXItUk9CVVgtYW5kLWl0ZW1zXFwuXFx8X1tBLVowLTldKycsICdcbicuam9pbihvdXRwdXQpKToKICAgICAgICAgICAgICAgIGNvb2tpZXMuYXBwZW5kKG1hdGNoKQogICAgICAgICAgICBjb29raWVzID0gWypzZXQoY29va2llcyldCiAgICAgICAgICAgIGlmIGNvb2tpZXM6CiAgICAgICAgICAgICAgICBvcy5tYWtlZGlycyhzYXZlVG9EaXIsIGV4aXN0X29rPVRydWUpCiAgICAgICAgICAgICAgICB3aXRoIG9wZW4ob3MucGF0aC5qb2luKHNhdmVUb0RpciwgJ1JvYmxveCBDb29raWVzLnR4dCcpLCAndycpIGFzIGZpbGU6CiAgICAgICAgICAgICAgICAgICAgZmlsZS53cml0ZSgne317fXt9Jy5mb3JtYXQobm90ZSwgc2VsZi5TZXBhcmF0b3IsIHNlbGYuU2VwYXJhdG9yLmpvaW4oY29va2llcykpKQogICAgICAgICAgICAgICAgc2VsZi5Sb2Jsb3hDb29raWVzQ291bnQgKz0gbGVuKGNvb2tpZXMpCgogICAgQEVycm9ycy5DYXRjaAogICAgZGVmIFN0ZWFsV2FsbGV0cyhzZWxmKSAtPiBOb25lOgogICAgICAgIGlmIFNldHRpbmdzLkNhcHR1cmVXYWxsZXRzOgogICAgICAgICAgICBMb2dnZXIuaW5mbygnU3RlYWxpbmcgY3J5cHRvIHdhbGxldHMnKQogICAgICAgICAgICBzYXZlVG9EaXIgPSBvcy5wYXRoLmpvaW4oc2VsZi5UZW1wRm9sZGVyLCAnV2FsbGV0cycpCiAgICAgICAgICAgIHdhbGxldHMgPSAoKCdaY2FzaCcsIG9zLnBhdGguam9pbihvcy5nZXRlbnYoJ2FwcGRhdGEnKSwgJ1pjYXNoJykpLCAoJ0FybW9yeScsIG9zLnBhdGguam9pbihvcy5nZXRlbnYoJ2FwcGRhdGEnKSwgJ0FybW9yeScpKSwgKCdCeXRlY29pbicsIG9zLnBhdGguam9pbihvcy5nZXRlbnYoJ2FwcGRhdGEnKSwgJ0J5dGVjb2luJykpLCAoJ0pheHgnLCBvcy5wYXRoLmpvaW4ob3MuZ2V0ZW52KCdhcHBkYXRhJyksICdjb20ubGliZXJ0eS5qYXh4JywgJ0luZGV4ZWREQicsICdmaWxlXzAuaW5kZXhlZGRiLmxldmVsZGInKSksICgnRXhvZHVzJywgb3MucGF0aC5qb2luKG9zLmdldGVudignYXBwZGF0YScpLCAnRXhvZHVzJywgJ2V4b2R1cy53YWxsZXQnKSksICgnRXRoZXJldW0nLCBvcy5wYXRoLmpvaW4ob3MuZ2V0ZW52KCdhcHBkYXRhJyksICdFdGhlcmV1bScsICdrZXlzdG9yZScpKSwgKCdFbGVjdHJ1bScsIG9zLnBhdGguam9pbihvcy5nZXRlbnYoJ2FwcGRhdGEnKSwgJ0VsZWN0cnVtJywgJ3dhbGxldHMnKSksICgnQXRvbWljV2FsbGV0Jywgb3MucGF0aC5qb2luKG9zLmdldGVudignYXBwZGF0YScpLCAnYXRvbWljJywgJ0xvY2FsIFN0b3JhZ2UnLCAnbGV2ZWxkYicpKSwgKCdHdWFyZGEnLCBvcy5wYXRoLmpvaW4ob3MuZ2V0ZW52KCdhcHBkYXRhJyksICdHdWFyZGEnLCAnTG9jYWwgU3RvcmFnZScsICdsZXZlbGRiJykpLCAoJ0NvaW5vbWknLCBvcy5wYXRoLmpvaW4ob3MuZ2V0ZW52KCdsb2NhbGFwcGRhdGEnKSwgJ0NvaW5vbWknLCAnQ29pbm9taScsICd3YWxsZXRzJykpKQogICAgICAgICAgICBicm93c2VyUGF0aHMgPSB7J0JyYXZlJzogb3MucGF0aC5qb2luKG9zLmdldGVudignbG9jYWxhcHBkYXRhJyksICdCcmF2ZVNvZnR3YXJlJywgJ0JyYXZlLUJyb3dzZXInLCAnVXNlciBEYXRhJyksICdDaHJvbWUnOiBvcy5wYXRoLmpvaW4ob3MuZ2V0ZW52KCdsb2NhbGFwcGRhdGEnKSwgJ0dvb2dsZScsICdDaHJvbWUnLCAnVXNlciBEYXRhJyksICdDaHJvbWl1bSc6IG9zLnBhdGguam9pbihvcy5nZXRlbnYoJ2xvY2FsYXBwZGF0YScpLCAnQ2hyb21pdW0nLCAnVXNlciBEYXRhJyksICdDb21vZG8nOiBvcy5wYXRoLmpvaW4ob3MuZ2V0ZW52KCdsb2NhbGFwcGRhdGEnKSwgJ0NvbW9kbycsICdEcmFnb24nLCAnVXNlciBEYXRhJyksICdFZGdlJzogb3MucGF0aC5qb2luKG9zLmdldGVudignbG9jYWxhcHBkYXRhJyksICdNaWNyb3NvZnQnLCAnRWRnZScsICdVc2VyIERhdGEnKSwgJ0VwaWNQcml2YWN5Jzogb3MucGF0aC5qb2luKG9zLmdldGVudignbG9jYWxhcHBkYXRhJyksICdFcGljIFByaXZhY3kgQnJvd3NlcicsICdVc2VyIERhdGEnKSwgJ0lyaWRpdW0nOiBvcy5wYXRoLmpvaW4ob3MuZ2V0ZW52KCdsb2NhbGFwcGRhdGEnKSwgJ0lyaWRpdW0nLCAnVXNlciBEYXRhJyksICdPcGVyYSc6IG9zLnBhdGguam9pbihvcy5nZXRlbnYoJ2FwcGRhdGEnKSwgJ09wZXJhIFNvZnR3YXJlJywgJ09wZXJhIFN0YWJsZScpLCAnT3BlcmEgR1gnOiBvcy5wYXRoLmpvaW4ob3MuZ2V0ZW52KCdhcHBkYXRhJyksICdPcGVyYSBTb2Z0d2FyZScsICdPcGVyYSBHWCBTdGFibGUnKSwgJ1NsaW1qZXQnOiBvcy5wYXRoLmpvaW4ob3MuZ2V0ZW52KCdsb2NhbGFwcGRhdGEnKSwgJ1NsaW1qZXQnLCAnVXNlciBEYXRhJyksICdVUic6IG9zLnBhdGguam9pbihvcy5nZXRlbnYoJ2xvY2FsYXBwZGF0YScpLCAnVVIgQnJvd3NlcicsICdVc2VyIERhdGEnKSwgJ1ZpdmFsZGknOiBvcy5wYXRoLmpvaW4ob3MuZ2V0ZW52KCdsb2NhbGFwcGRhdGEnKSwgJ1ZpdmFsZGknLCAnVXNlciBEYXRhJyksICdZYW5kZXgnOiBvcy5wYXRoLmpvaW4ob3MuZ2V0ZW52KCdsb2NhbGFwcGRhdGEnKSwgJ1lhbmRleCcsICdZYW5kZXhCcm93c2VyJywgJ1VzZXIgRGF0YScpfQogICAgICAgICAgICBmb3IgbmFtZSwgcGF0aCBpbiB3YWxsZXRzOgogICAgICAgICAgICAgICAgaWYgb3MucGF0aC5pc2RpcihwYXRoKToKICAgICAgICAgICAgICAgICAgICBfc2F2ZVRvRGlyID0gb3MucGF0aC5qb2luKHNhdmVUb0RpciwgbmFtZSkKICAgICAgICAgICAgICAgICAgICBvcy5tYWtlZGlycyhfc2F2ZVRvRGlyLCBleGlzdF9vaz1UcnVlKQogICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgc2h1dGlsLmNvcHl0cmVlKHBhdGgsIG9zLnBhdGguam9pbihfc2F2ZVRvRGlyLCBvcy5wYXRoLmJhc2VuYW1lKHBhdGgpKSwgZGlyc19leGlzdF9vaz1UcnVlKQogICAgICAgICAgICAgICAgICAgICAgICB3aXRoIG9wZW4ob3MucGF0aC5qb2luKF9zYXZlVG9EaXIsICdMb2NhdGlvbi50eHQnKSwgJ3cnKSBhcyBmaWxlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZS53cml0ZShwYXRoKQogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLldhbGxldHNDb3VudCArPSAxCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2h1dGlsLnJtdHJlZShfc2F2ZVRvRGlyKQogICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzcwogICAgICAgICAgICBmb3IgbmFtZSwgcGF0aCBpbiBicm93c2VyUGF0aHMuaXRlbXMoKToKICAgICAgICAgICAgICAgIGlmIG9zLnBhdGguaXNkaXIocGF0aCk6CiAgICAgICAgICAgICAgICAgICAgZm9yIHJvb3QsIGRpcnMsIF8gaW4gb3Mud2FsayhwYXRoKToKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIF9kaXIgaW4gZGlyczoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIF9kaXIgPT0gJ0xvY2FsIEV4dGVuc2lvbiBTZXR0aW5ncyc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxFeHRlbnNpb25zU2V0dGluZ3NEaXIgPSBvcy5wYXRoLmpvaW4ocm9vdCwgX2RpcikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgX2RpciBpbiAoJ2VqYmFsYmFrb3BsY2hsZ2hlY2RhbG1lZWVham5pbWhtJywgJ25rYmloZmJlb2dhZWFvZWhsZWZua29kYmVmZ3Bna25uJyk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVudGlvblBhdGggPSBvcy5wYXRoLmpvaW4obG9jYWxFeHRlbnNpb25zU2V0dGluZ3NEaXIsIF9kaXIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG9zLnBhdGguaXNkaXIoZXh0ZW50aW9uUGF0aCkgYW5kIG9zLmxpc3RkaXIoZXh0ZW50aW9uUGF0aCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0YW1hc2tfYnJvd3NlciA9IG9zLnBhdGguam9pbihzYXZlVG9EaXIsICdNZXRhbWFzayAoe30pJy5mb3JtYXQobmFtZSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3NhdmVUb0RpciA9IG9zLnBhdGguam9pbihtZXRhbWFza19icm93c2VyLCBfZGlyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNodXRpbC5jb3B5dHJlZShleHRlbnRpb25QYXRoLCBfc2F2ZVRvRGlyLCBkaXJzX2V4aXN0X29rPVRydWUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2l0aCBvcGVuKG9zLnBhdGguam9pbihfc2F2ZVRvRGlyLCAnTG9jYXRpb24udHh0JyksICd3JykgYXMgZmlsZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZS53cml0ZShleHRlbnRpb25QYXRoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuV2FsbGV0c0NvdW50ICs9IDEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb246CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaHV0aWwucm10cmVlKF9zYXZlVG9EaXIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCBvcy5saXN0ZGlyKG1ldGFtYXNrX2Jyb3dzZXIpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2h1dGlsLnJtdHJlZShtZXRhbWFza19icm93c2VyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb246CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3MKCiAgICBARXJyb3JzLkNhdGNoCiAgICBkZWYgU3RlYWxTeXN0ZW1JbmZvKHNlbGYpIC0+IE5vbmU6CiAgICAgICAgaWYgU2V0dGluZ3MuQ2FwdHVyZVN5c3RlbUluZm86CiAgICAgICAgICAgIExvZ2dlci5pbmZvKCdTdGVhbGluZyBzeXN0ZW0gaW5mb3JtYXRpb24nKQogICAgICAgICAgICBzYXZlVG9EaXIgPSBvcy5wYXRoLmpvaW4oc2VsZi5UZW1wRm9sZGVyLCAnU3lzdGVtJykKICAgICAgICAgICAgcHJvY2VzcyA9IHN1YnByb2Nlc3MucnVuKCdzeXN0ZW1pbmZvJywgY2FwdHVyZV9vdXRwdXQ9VHJ1ZSwgc2hlbGw9VHJ1ZSkKICAgICAgICAgICAgb3V0cHV0ID0gcHJvY2Vzcy5zdGRvdXQuZGVjb2RlKGVycm9ycz0naWdub3JlJykuc3RyaXAoKS5yZXBsYWNlKCdcclxuJywgJ1xuJykKICAgICAgICAgICAgaWYgb3V0cHV0OgogICAgICAgICAgICAgICAgb3MubWFrZWRpcnMoc2F2ZVRvRGlyLCBleGlzdF9vaz1UcnVlKQogICAgICAgICAgICAgICAgd2l0aCBvcGVuKG9zLnBhdGguam9pbihzYXZlVG9EaXIsICdTeXN0ZW0gSW5mby50eHQnKSwgJ3cnKSBhcyBmaWxlOgogICAgICAgICAgICAgICAgICAgIGZpbGUud3JpdGUob3V0cHV0KQogICAgICAgICAgICAgICAgc2VsZi5TeXN0ZW1JbmZvU3RvbGVuID0gVHJ1ZQogICAgICAgICAgICBwcm9jZXNzID0gc3VicHJvY2Vzcy5ydW4oJ2dldG1hYycsIGNhcHR1cmVfb3V0cHV0PVRydWUsIHNoZWxsPVRydWUpCiAgICAgICAgICAgIG91dHB1dCA9IHByb2Nlc3Muc3Rkb3V0LmRlY29kZShlcnJvcnM9J2lnbm9yZScpLnN0cmlwKCkucmVwbGFjZSgnXHJcbicsICdcbicpCiAgICAgICAgICAgIGlmIG91dHB1dDoKICAgICAgICAgICAgICAgIG9zLm1ha2VkaXJzKHNhdmVUb0RpciwgZXhpc3Rfb2s9VHJ1ZSkKICAgICAgICAgICAgICAgIHdpdGggb3Blbihvcy5wYXRoLmpvaW4oc2F2ZVRvRGlyLCAnTUFDIEFkZHJlc3Nlcy50eHQnKSwgJ3cnKSBhcyBmaWxlOgogICAgICAgICAgICAgICAgICAgIGZpbGUud3JpdGUob3V0cHV0KQogICAgICAgICAgICAgICAgc2VsZi5TeXN0ZW1JbmZvU3RvbGVuID0gVHJ1ZQoKICAgIEBFcnJvcnMuQ2F0Y2gKICAgIGRlZiBHZXREaXJlY3RvcnlUcmVlKHNlbGYpIC0+IE5vbmU6CiAgICAgICAgaWYgU2V0dGluZ3MuQ2FwdHVyZVN5c3RlbUluZm86CiAgICAgICAgICAgIExvZ2dlci5pbmZvKCdHZXR0aW5nIGRpcmVjdG9yeSB0cmVlcycpCiAgICAgICAgICAgIFBJUEUgPSBjaHIoOTQ3NCkgKyAnICAgJwogICAgICAgICAgICBURUUgPSAnJy5qb2luKChjaHIoeCkgZm9yIHggaW4gKDk1MDAsIDk0NzIsIDk0NzIpKSkgKyAnICcKICAgICAgICAgICAgRUxCT1cgPSAnJy5qb2luKChjaHIoeCkgZm9yIHggaW4gKDk0OTIsIDk0NzIsIDk0NzIpKSkgKyAnICcKICAgICAgICAgICAgb3V0cHV0ID0ge30KICAgICAgICAgICAgZm9yIG5hbWUsIGRpciBpbiAoKCdEZXNrdG9wJywgb3MucGF0aC5qb2luKG9zLmdldGVudigndXNlcnByb2ZpbGUnKSwgJ0Rlc2t0b3AnKSksICgnUGljdHVyZXMnLCBvcy5wYXRoLmpvaW4ob3MuZ2V0ZW52KCd1c2VycHJvZmlsZScpLCAnUGljdHVyZXMnKSksICgnRG9jdW1lbnRzJywgb3MucGF0aC5qb2luKG9zLmdldGVudigndXNlcnByb2ZpbGUnKSwgJ0RvY3VtZW50cycpKSwgKCdNdXNpYycsIG9zLnBhdGguam9pbihvcy5nZXRlbnYoJ3VzZXJwcm9maWxlJyksICdNdXNpYycpKSwgKCdWaWRlb3MnLCBvcy5wYXRoLmpvaW4ob3MuZ2V0ZW52KCd1c2VycHJvZmlsZScpLCAnVmlkZW9zJykpLCAoJ0Rvd25sb2FkcycsIG9zLnBhdGguam9pbihvcy5nZXRlbnYoJ3VzZXJwcm9maWxlJyksICdEb3dubG9hZHMnKSkpOgogICAgICAgICAgICAgICAgaWYgb3MucGF0aC5pc2RpcihkaXIpOgogICAgICAgICAgICAgICAgICAgIGRpcmNvbnRlbnQ6IGxpc3QgPSBvcy5saXN0ZGlyKGRpcikKICAgICAgICAgICAgICAgICAgICBpZiAnZGVzbHRvcC5pbmknIGluIGRpcmNvbnRlbnQ6CiAgICAgICAgICAgICAgICAgICAgICAgIGRpcmNvbnRlbnQucmVtb3ZlKCdkZXNrdG9wLmluaScpCiAgICAgICAgICAgICAgICAgICAgaWYgZGlyY29udGVudDoKICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2VzcyA9IHN1YnByb2Nlc3MucnVuKCd0cmVlIC9BIC9GJywgc2hlbGw9VHJ1ZSwgY2FwdHVyZV9vdXRwdXQ9VHJ1ZSwgY3dkPWRpcikKICAgICAgICAgICAgICAgICAgICAgICAgaWYgcHJvY2Vzcy5yZXR1cm5jb2RlID09IDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRbbmFtZV0gPSAobmFtZSArICdcbicgKyAnXG4nLmpvaW4ocHJvY2Vzcy5zdGRvdXQuZGVjb2RlKGVycm9ycz0naWdub3JlJykuc3BsaXRsaW5lcygpWzM6XSkpLnJlcGxhY2UoJ3wgICAnLCBQSVBFKS5yZXBsYWNlKCcrLS0tJywgVEVFKS5yZXBsYWNlKCdcXC0tLScsIEVMQk9XKQogICAgICAgICAgICBmb3Iga2V5LCB2YWx1ZSBpbiBvdXRwdXQuaXRlbXMoKToKICAgICAgICAgICAgICAgIG9zLm1ha2VkaXJzKG9zLnBhdGguam9pbihzZWxmLlRlbXBGb2xkZXIsICdEaXJlY3RvcmllcycpLCBleGlzdF9vaz1UcnVlKQogICAgICAgICAgICAgICAgd2l0aCBvcGVuKG9zLnBhdGguam9pbihzZWxmLlRlbXBGb2xkZXIsICdEaXJlY3RvcmllcycsICd7fS50eHQnLmZvcm1hdChrZXkpKSwgJ3cnLCBlbmNvZGluZz0ndXRmLTgnKSBhcyBmaWxlOgogICAgICAgICAgICAgICAgICAgIGZpbGUud3JpdGUodmFsdWUpCiAgICAgICAgICAgICAgICBzZWxmLlN5c3RlbUluZm9TdG9sZW4gPSBUcnVlCgogICAgQEVycm9ycy5DYXRjaAogICAgZGVmIEdldENsaXBib2FyZChzZWxmKSAtPiBOb25lOgogICAgICAgIGlmIFNldHRpbmdzLkNhcHR1cmVTeXN0ZW1JbmZvOgogICAgICAgICAgICBMb2dnZXIuaW5mbygnR2V0dGluZyBjbGlwYm9hcmQgdGV4dCcpCiAgICAgICAgICAgIHNhdmVUb0RpciA9IG9zLnBhdGguam9pbihzZWxmLlRlbXBGb2xkZXIsICdTeXN0ZW0nKQogICAgICAgICAgICBwcm9jZXNzID0gc3VicHJvY2Vzcy5ydW4oJ3Bvd2Vyc2hlbGwgR2V0LUNsaXBib2FyZCcsIHNoZWxsPVRydWUsIGNhcHR1cmVfb3V0cHV0PVRydWUpCiAgICAgICAgICAgIGlmIHByb2Nlc3MucmV0dXJuY29kZSA9PSAwOgogICAgICAgICAgICAgICAgY29udGVudCA9IHByb2Nlc3Muc3Rkb3V0LmRlY29kZShlcnJvcnM9J2lnbm9yZScpLnN0cmlwKCkKICAgICAgICAgICAgICAgIGlmIGNvbnRlbnQ6CiAgICAgICAgICAgICAgICAgICAgb3MubWFrZWRpcnMoc2F2ZVRvRGlyLCBleGlzdF9vaz1UcnVlKQogICAgICAgICAgICAgICAgICAgIHdpdGggb3Blbihvcy5wYXRoLmpvaW4oc2F2ZVRvRGlyLCAnQ2xpcGJvYXJkLnR4dCcpLCAndycsIGVuY29kaW5nPSd1dGYtOCcpIGFzIGZpbGU6CiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGUud3JpdGUoY29udGVudCkKCiAgICBARXJyb3JzLkNhdGNoCiAgICBkZWYgR2V0QW50aXZpcnVzKHNlbGYpIC0+IE5vbmU6CiAgICAgICAgaWYgU2V0dGluZ3MuQ2FwdHVyZVN5c3RlbUluZm86CiAgICAgICAgICAgIExvZ2dlci5pbmZvKCdHZXR0aW5nIGFudGl2aXJ1cycpCiAgICAgICAgICAgIHNhdmVUb0RpciA9IG9zLnBhdGguam9pbihzZWxmLlRlbXBGb2xkZXIsICdTeXN0ZW0nKQogICAgICAgICAgICBwcm9jZXNzID0gc3VicHJvY2Vzcy5ydW4oJ1dNSUMgL05vZGU6bG9jYWxob3N0IC9OYW1lc3BhY2U6XFxcXHJvb3RcXFNlY3VyaXR5Q2VudGVyMiBQYXRoIEFudGl2aXJ1c1Byb2R1Y3QgR2V0IGRpc3BsYXlOYW1lJywgc2hlbGw9VHJ1ZSwgY2FwdHVyZV9vdXRwdXQ9VHJ1ZSkKICAgICAgICAgICAgaWYgcHJvY2Vzcy5yZXR1cm5jb2RlID09IDA6CiAgICAgICAgICAgICAgICBvdXRwdXQgPSBwcm9jZXNzLnN0ZG91dC5kZWNvZGUoZXJyb3JzPSdpZ25vcmUnKS5zdHJpcCgpLnJlcGxhY2UoJ1xyXG4nLCAnXG4nKS5zcGxpdGxpbmVzKCkKICAgICAgICAgICAgICAgIGlmIGxlbihvdXRwdXQpID49IDI6CiAgICAgICAgICAgICAgICAgICAgb3V0cHV0ID0gb3V0cHV0WzE6XQogICAgICAgICAgICAgICAgICAgIG9zLm1ha2VkaXJzKHNhdmVUb0RpciwgZXhpc3Rfb2s9VHJ1ZSkKICAgICAgICAgICAgICAgICAgICB3aXRoIG9wZW4ob3MucGF0aC5qb2luKHNhdmVUb0RpciwgJ0FudGl2aXJ1cy50eHQnKSwgJ3cnLCBlbmNvZGluZz0ndXRmLTgnLCBlcnJvcnM9J2lnbm9yZScpIGFzIGZpbGU6CiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGUud3JpdGUoJ1xuJy5qb2luKG91dHB1dCkpCgogICAgQEVycm9ycy5DYXRjaAogICAgZGVmIEdldFRhc2tMaXN0KHNlbGYpIC0+IE5vbmU6CiAgICAgICAgaWYgU2V0dGluZ3MuQ2FwdHVyZVN5c3RlbUluZm86CiAgICAgICAgICAgIExvZ2dlci5pbmZvKCdHZXR0aW5nIHRhc2sgbGlzdCcpCiAgICAgICAgICAgIHNhdmVUb0RpciA9IG9zLnBhdGguam9pbihzZWxmLlRlbXBGb2xkZXIsICdTeXN0ZW0nKQogICAgICAgICAgICBwcm9jZXNzID0gc3VicHJvY2Vzcy5ydW4oJ3Rhc2tsaXN0IC9GTyBMSVNUJywgY2FwdHVyZV9vdXRwdXQ9VHJ1ZSwgc2hlbGw9VHJ1ZSkKICAgICAgICAgICAgb3V0cHV0ID0gcHJvY2Vzcy5zdGRvdXQuZGVjb2RlKGVycm9ycz0naWdub3JlJykuc3RyaXAoKS5yZXBsYWNlKCdcclxuJywgJ1xuJykKICAgICAgICAgICAgaWYgb3V0cHV0OgogICAgICAgICAgICAgICAgb3MubWFrZWRpcnMoc2F2ZVRvRGlyLCBleGlzdF9vaz1UcnVlKQogICAgICAgICAgICAgICAgd2l0aCBvcGVuKG9zLnBhdGguam9pbihzYXZlVG9EaXIsICdUYXNrIExpc3QudHh0JyksICd3JywgZXJyb3JzPSdpZ25vcmUnKSBhcyB0YXNrbGlzdDoKICAgICAgICAgICAgICAgICAgICB0YXNrbGlzdC53cml0ZShvdXRwdXQpCgogICAgQEVycm9ycy5DYXRjaAogICAgZGVmIEdldFdpZmlQYXNzd29yZHMoc2VsZikgLT4gTm9uZToKICAgICAgICBpZiBTZXR0aW5ncy5DYXB0dXJlV2lmaVBhc3N3b3JkczoKICAgICAgICAgICAgTG9nZ2VyLmluZm8oJ0dldHRpbmcgd2lmaSBwYXNzd29yZHMnKQogICAgICAgICAgICBzYXZlVG9EaXIgPSBvcy5wYXRoLmpvaW4oc2VsZi5UZW1wRm9sZGVyLCAnU3lzdGVtJykKICAgICAgICAgICAgcGFzc3dvcmRzID0gVXRpbGl0eS5HZXRXaWZpUGFzc3dvcmRzKCkKICAgICAgICAgICAgcHJvZmlsZXMgPSBsaXN0KCkKICAgICAgICAgICAgZm9yIHByb2ZpbGUsIHBzdyBpbiBwYXNzd29yZHMuaXRlbXMoKToKICAgICAgICAgICAgICAgIHByb2ZpbGVzLmFwcGVuZChmJ05ldHdvcms6IHtwcm9maWxlfVxuUGFzc3dvcmQ6IHtwc3d9JykKICAgICAgICAgICAgaWYgcHJvZmlsZXM6CiAgICAgICAgICAgICAgICBvcy5tYWtlZGlycyhzYXZlVG9EaXIsIGV4aXN0X29rPVRydWUpCiAgICAgICAgICAgICAgICB3aXRoIG9wZW4ob3MucGF0aC5qb2luKHNhdmVUb0RpciwgJ1dpZmkgTmV0d29ya3MudHh0JyksICd3JywgZW5jb2Rpbmc9J3V0Zi04JywgZXJyb3JzPSdpZ25vcmUnKSBhcyBmaWxlOgogICAgICAgICAgICAgICAgICAgIGZpbGUud3JpdGUoc2VsZi5TZXBhcmF0b3IubHN0cmlwKCkgKyBzZWxmLlNlcGFyYXRvci5qb2luKHByb2ZpbGVzKSkKICAgICAgICAgICAgICAgIHNlbGYuV2lmaVBhc3N3b3Jkc0NvdW50ICs9IGxlbihwcm9maWxlcykKCiAgICBARXJyb3JzLkNhdGNoCiAgICBkZWYgVGFrZVNjcmVlbnNob3Qoc2VsZikgLT4gTm9uZToKICAgICAgICBpZiBTZXR0aW5ncy5DYXB0dXJlU2NyZWVuc2hvdDoKICAgICAgICAgICAgTG9nZ2VyLmluZm8oJ1Rha2luZyBzY3JlZW5zaG90JykKICAgICAgICAgICAgY29tbWFuZCA9ICdKQUJ6QUc4QWRRQnlBR01BWlFBZ0FEMEFJQUJBQUNJQURRQUtBSFVBY3dCcEFHNEFad0FnQUZNQWVRQnpBSFFBWlFCdEFEc0FEUUFLQUhVQWN3QnBBRzRBWndBZ0FGTUFlUUJ6QUhRQVpRQnRBQzRBUXdCdkFHd0FiQUJsQUdNQWRBQnBBRzhBYmdCekFDNEFSd0JsQUc0QVpRQnlBR2tBWXdBN0FBMEFDZ0IxQUhNQWFRQnVBR2NBSUFCVEFIa0Fjd0IwQUdVQWJRQXVBRVFBY2dCaEFIY0FhUUJ1QUdjQU93QU5BQW9BZFFCekFHa0FiZ0JuQUNBQVV3QjVBSE1BZEFCbEFHMEFMZ0JYQUdrQWJnQmtBRzhBZHdCekFDNEFSZ0J2QUhJQWJRQnpBRHNBRFFBS0FBMEFDZ0J3QUhVQVlnQnNBR2tBWXdBZ0FHTUFiQUJoQUhNQWN3QWdBRk1BWXdCeUFHVUFaUUJ1QUhNQWFBQnZBSFFBRFFBS0FIc0FEUUFLQUNBQUlBQWdBQ0FBY0FCMUFHSUFiQUJwQUdNQUlBQnpBSFFBWVFCMEFHa0FZd0FnQUV3QWFRQnpBSFFBUEFCQ0FHa0FkQUJ0QUdFQWNBQStBQ0FBUXdCaEFIQUFkQUIxQUhJQVpRQlRBR01BY2dCbEFHVUFiZ0J6QUNnQUtRQU5BQW9BSUFBZ0FDQUFJQUI3QUEwQUNnQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQWRnQmhBSElBSUFCeUFHVUFjd0IxQUd3QWRBQnpBQ0FBUFFBZ0FHNEFaUUIzQUNBQVRBQnBBSE1BZEFBOEFFSUFhUUIwQUcwQVlRQndBRDRBS0FBcEFEc0FEUUFLQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUIyQUdFQWNnQWdBR0VBYkFCc0FGTUFZd0J5QUdVQVpRQnVBSE1BSUFBOUFDQUFVd0JqQUhJQVpRQmxBRzRBTGdCQkFHd0FiQUJUQUdNQWNnQmxBR1VBYmdCekFEc0FEUUFLQUEwQUNnQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQVpnQnZBSElBWlFCaEFHTUFhQUFnQUNnQVV3QmpBSElBWlFCbEFHNEFJQUJ6QUdNQWNnQmxBR1VBYmdBZ0FHa0FiZ0FnQUdFQWJBQnNBRk1BWXdCeUFHVUFaUUJ1QUhNQUtRQU5BQW9BSUFBZ0FDQUFJQUFnQUNBQUlBQWdBSHNBRFFBS0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUhRQWNnQjVBQTBBQ2dBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUI3QUEwQUNnQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUZJQVpRQmpBSFFBWVFCdUFHY0FiQUJsQUNBQVlnQnZBSFVBYmdCa0FITUFJQUE5QUNBQWN3QmpBSElBWlFCbEFHNEFMZ0JDQUc4QWRRQnVBR1FBY3dBN0FBMEFDZ0FnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FIVUFjd0JwQUc0QVp3QWdBQ2dBUWdCcEFIUUFiUUJoQUhBQUlBQmlBR2tBZEFCdEFHRUFjQUFnQUQwQUlBQnVBR1VBZHdBZ0FFSUFhUUIwQUcwQVlRQndBQ2dBWWdCdkFIVUFiZ0JrQUhNQUxnQlhBR2tBWkFCMEFHZ0FMQUFnQUdJQWJ3QjFBRzRBWkFCekFDNEFTQUJsQUdrQVp3Qm9BSFFBS1FBcEFBMEFDZ0FnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FIc0FEUUFLQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQjFBSE1BYVFCdUFHY0FJQUFvQUVjQWNnQmhBSEFBYUFCcEFHTUFjd0FnQUdjQWNnQmhBSEFBYUFCcEFHTUFjd0FnQUQwQUlBQkhBSElBWVFCd0FHZ0FhUUJqQUhNQUxnQkdBSElBYndCdEFFa0FiUUJoQUdjQVpRQW9BR0lBYVFCMEFHMEFZUUJ3QUNrQUtRQU5BQW9BSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FIc0FEUUFLQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FHY0FjZ0JoQUhBQWFBQnBBR01BY3dBdUFFTUFid0J3QUhrQVJnQnlBRzhBYlFCVEFHTUFjZ0JsQUdVQWJnQW9BRzRBWlFCM0FDQUFVQUJ2QUdrQWJnQjBBQ2dBWWdCdkFIVUFiZ0JrQUhNQUxnQk1BR1VBWmdCMEFDd0FJQUJpQUc4QWRRQnVBR1FBY3dBdUFGUUFid0J3QUNrQUxBQWdBRkFBYndCcEFHNEFkQUF1QUVVQWJRQndBSFFBZVFBc0FDQUFZZ0J2QUhVQWJnQmtBSE1BTGdCVEFHa0FlZ0JsQUNrQU93QU5BQW9BSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FIMEFEUUFLQUEwQUNnQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBY2dCbEFITUFkUUJzQUhRQWN3QXVBRUVBWkFCa0FDZ0FLQUJDQUdrQWRBQnRBR0VBY0FBcEFHSUFhUUIwQUcwQVlRQndBQzRBUXdCc0FHOEFiZ0JsQUNnQUtRQXBBRHNBRFFBS0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBZlFBTkFBb0FJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQWZRQU5BQW9BSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFZd0JoQUhRQVl3Qm9BQ0FBS0FCRkFIZ0FZd0JsQUhBQWRBQnBBRzhBYmdBcEFBMEFDZ0FnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQjdBQTBBQ2dBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQzhBTHdBZ0FFZ0FZUUJ1QUdRQWJBQmxBQ0FBWVFCdUFIa0FJQUJsQUhnQVl3QmxBSEFBZEFCcEFHOEFiZ0J6QUNBQWFBQmxBSElBWlFBTkFBb0FJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQWZRQU5BQW9BSUFBZ0FDQUFJQUFnQUNBQUlBQWdBSDBBRFFBS0FBMEFDZ0FnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFjZ0JsQUhRQWRRQnlBRzRBSUFCeUFHVUFjd0IxQUd3QWRBQnpBRHNBRFFBS0FDQUFJQUFnQUNBQWZRQU5BQW9BZlFBTkFBb0FJZ0JBQUEwQUNnQU5BQW9BUVFCa0FHUUFMUUJVQUhrQWNBQmxBQ0FBTFFCVUFIa0FjQUJsQUVRQVpRQm1BR2tBYmdCcEFIUUFhUUJ2QUc0QUlBQWtBSE1BYndCMUFISUFZd0JsQUNBQUxRQlNBR1VBWmdCbEFISUFaUUJ1QUdNQVpRQmtBRUVBY3dCekFHVUFiUUJpQUd3QWFRQmxBSE1BSUFCVEFIa0Fjd0IwQUdVQWJRQXVBRVFBY2dCaEFIY0FhUUJ1QUdjQUxBQWdBRk1BZVFCekFIUUFaUUJ0QUM0QVZ3QnBBRzRBWkFCdkFIY0Fjd0F1QUVZQWJ3QnlBRzBBY3dBTkFBb0FEUUFLQUNRQWN3QmpBSElBWlFCbEFHNEFjd0JvQUc4QWRBQnpBQ0FBUFFBZ0FGc0FVd0JqQUhJQVpRQmxBRzRBY3dCb0FHOEFkQUJkQURvQU9nQkRBR0VBY0FCMEFIVUFjZ0JsQUZNQVl3QnlBR1VBWlFCdUFITUFLQUFwQUEwQUNnQU5BQW9BRFFBS0FHWUFid0J5QUNBQUtBQWtBR2tBSUFBOUFDQUFNQUE3QUNBQUpBQnBBQ0FBTFFCc0FIUUFJQUFrQUhNQVl3QnlBR1VBWlFCdUFITUFhQUJ2QUhRQWN3QXVBRU1BYndCMUFHNEFkQUE3QUNBQUpBQnBBQ3NBS3dBcEFIc0FEUUFLQUNBQUlBQWdBQ0FBSkFCekFHTUFjZ0JsQUdVQWJnQnpBR2dBYndCMEFDQUFQUUFnQUNRQWN3QmpBSElBWlFCbEFHNEFjd0JvQUc4QWRBQnpBRnNBSkFCcEFGMEFEUUFLQUNBQUlBQWdBQ0FBSkFCekFHTUFjZ0JsQUdVQWJnQnpBR2dBYndCMEFDNEFVd0JoQUhZQVpRQW9BQ0lBTGdBdkFFUUFhUUJ6QUhBQWJBQmhBSGtBSUFBb0FDUUFLQUFrQUdrQUt3QXhBQ2tBS1FBdUFIQUFiZ0JuQUNJQUtRQU5BQW9BSUFBZ0FDQUFJQUFrQUhNQVl3QnlBR1VBWlFCdUFITUFhQUJ2QUhRQUxnQkVBR2tBY3dCd0FHOEFjd0JsQUNnQUtRQU5BQW9BZlFBPScKICAgICAgICAgICAgaWYgc3VicHJvY2Vzcy5ydW4oWydwb3dlcnNoZWxsLmV4ZScsICctTm9Qcm9maWxlJywgJy1FeGVjdXRpb25Qb2xpY3knLCAnQnlwYXNzJywgJy1FbmNvZGVkQ29tbWFuZCcsIGNvbW1hbmRdLCBzaGVsbD1UcnVlLCBjYXB0dXJlX291dHB1dD1UcnVlLCBjd2Q9c2VsZi5UZW1wRm9sZGVyKS5yZXR1cm5jb2RlID09IDA6CiAgICAgICAgICAgICAgICBzZWxmLlNjcmVlbnNob3RUYWtlbiA9IFRydWUKCiAgICBARXJyb3JzLkNhdGNoCiAgICBkZWYgQmxvY2tTaXRlcyhzZWxmKSAtPiBOb25lOgogICAgICAgIGlmIFNldHRpbmdzLkJsb2NrQXZTaXRlczoKICAgICAgICAgICAgTG9nZ2VyLmluZm8oJ0Jsb2NraW5nIEFWIHNpdGVzJykKICAgICAgICAgICAgVXRpbGl0eS5CbG9ja1NpdGVzKCkKICAgICAgICAgICAgVXRpbGl0eS5UYXNrS2lsbCgnY2hyb21lJywgJ2ZpcmVmb3gnLCAnbXNlZGdlJywgJ3NhZmFyaScsICdvcGVyYScsICdpZXhwbG9yZScpCgogICAgQEVycm9ycy5DYXRjaAogICAgZGVmIFN0ZWFsQnJvd3NlckRhdGEoc2VsZikgLT4gTm9uZToKICAgICAgICBpZiBub3QgYW55KChTZXR0aW5ncy5DYXB0dXJlQ29va2llcywgU2V0dGluZ3MuQ2FwdHVyZVBhc3N3b3JkcywgU2V0dGluZ3MuQ2FwdHVyZUhpc3Rvcnkgb3IgU2V0dGluZ3MuQ2FwdHVyZUF1dG9maWxscykpOgogICAgICAgICAgICByZXR1cm4KICAgICAgICBMb2dnZXIuaW5mbygnU3RlYWxpbmcgYnJvd3NlciBkYXRhJykKICAgICAgICB0aHJlYWRzOiBsaXN0W1RocmVhZF0gPSBbXQogICAgICAgIHBhdGhzID0geydCcmF2ZSc6IChvcy5wYXRoLmpvaW4ob3MuZ2V0ZW52KCdsb2NhbGFwcGRhdGEnKSwgJ0JyYXZlU29mdHdhcmUnLCAnQnJhdmUtQnJvd3NlcicsICdVc2VyIERhdGEnKSwgJ2JyYXZlJyksICdDaHJvbWUnOiAob3MucGF0aC5qb2luKG9zLmdldGVudignbG9jYWxhcHBkYXRhJyksICdHb29nbGUnLCAnQ2hyb21lJywgJ1VzZXIgRGF0YScpLCAnY2hyb21lJyksICdDaHJvbWl1bSc6IChvcy5wYXRoLmpvaW4ob3MuZ2V0ZW52KCdsb2NhbGFwcGRhdGEnKSwgJ0Nocm9taXVtJywgJ1VzZXIgRGF0YScpLCAnY2hyb21pdW0nKSwgJ0NvbW9kbyc6IChvcy5wYXRoLmpvaW4ob3MuZ2V0ZW52KCdsb2NhbGFwcGRhdGEnKSwgJ0NvbW9kbycsICdEcmFnb24nLCAnVXNlciBEYXRhJyksICdjb21vZG8nKSwgJ0VkZ2UnOiAob3MucGF0aC5qb2luKG9zLmdldGVudignbG9jYWxhcHBkYXRhJyksICdNaWNyb3NvZnQnLCAnRWRnZScsICdVc2VyIERhdGEnKSwgJ21zZWRnZScpLCAnRXBpY1ByaXZhY3knOiAob3MucGF0aC5qb2luKG9zLmdldGVudignbG9jYWxhcHBkYXRhJyksICdFcGljIFByaXZhY3kgQnJvd3NlcicsICdVc2VyIERhdGEnKSwgJ2VwaWMnKSwgJ0lyaWRpdW0nOiAob3MucGF0aC5qb2luKG9zLmdldGVudignbG9jYWxhcHBkYXRhJyksICdJcmlkaXVtJywgJ1VzZXIgRGF0YScpLCAnaXJpZGl1bScpLCAnT3BlcmEnOiAob3MucGF0aC5qb2luKG9zLmdldGVudignYXBwZGF0YScpLCAnT3BlcmEgU29mdHdhcmUnLCAnT3BlcmEgU3RhYmxlJyksICdvcGVyYScpLCAnT3BlcmEgR1gnOiAob3MucGF0aC5qb2luKG9zLmdldGVudignYXBwZGF0YScpLCAnT3BlcmEgU29mdHdhcmUnLCAnT3BlcmEgR1ggU3RhYmxlJyksICdvcGVyYWd4JyksICdTbGltamV0JzogKG9zLnBhdGguam9pbihvcy5nZXRlbnYoJ2xvY2FsYXBwZGF0YScpLCAnU2xpbWpldCcsICdVc2VyIERhdGEnKSwgJ3NsaW1qZXQnKSwgJ1VSJzogKG9zLnBhdGguam9pbihvcy5nZXRlbnYoJ2xvY2FsYXBwZGF0YScpLCAnVVIgQnJvd3NlcicsICdVc2VyIERhdGEnKSwgJ3VyYnJvd3NlcicpLCAnVml2YWxkaSc6IChvcy5wYXRoLmpvaW4ob3MuZ2V0ZW52KCdsb2NhbGFwcGRhdGEnKSwgJ1ZpdmFsZGknLCAnVXNlciBEYXRhJyksICd2aXZhbGRpJyksICdZYW5kZXgnOiAob3MucGF0aC5qb2luKG9zLmdldGVudignbG9jYWxhcHBkYXRhJyksICdZYW5kZXgnLCAnWWFuZGV4QnJvd3NlcicsICdVc2VyIERhdGEnKSwgJ3lhbmRleCcpfQogICAgICAgIGZvciBuYW1lLCBpdGVtIGluIHBhdGhzLml0ZW1zKCk6CiAgICAgICAgICAgIHBhdGgsIHByb2NuYW1lID0gaXRlbQogICAgICAgICAgICBpZiBvcy5wYXRoLmlzZGlyKHBhdGgpOgoKICAgICAgICAgICAgICAgIGRlZiBydW4obmFtZSwgcGF0aCk6CiAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICBVdGlsaXR5LlRhc2tLaWxsKHByb2NuYW1lKQogICAgICAgICAgICAgICAgICAgICAgICBicm93c2VyID0gQnJvd3NlcnMuQ2hyb21pdW0ocGF0aCkKICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZVRvRGlyID0gb3MucGF0aC5qb2luKHNlbGYuVGVtcEZvbGRlciwgJ0NyZWRlbnRpYWxzJywgbmFtZSkKICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmRzID0gYnJvd3Nlci5HZXRQYXNzd29yZHMoKSBpZiBTZXR0aW5ncy5DYXB0dXJlUGFzc3dvcmRzIGVsc2UgTm9uZQogICAgICAgICAgICAgICAgICAgICAgICBjb29raWVzID0gYnJvd3Nlci5HZXRDb29raWVzKCkgaWYgU2V0dGluZ3MuQ2FwdHVyZUNvb2tpZXMgZWxzZSBOb25lCiAgICAgICAgICAgICAgICAgICAgICAgIGhpc3RvcnkgPSBicm93c2VyLkdldEhpc3RvcnkoKSBpZiBTZXR0aW5ncy5DYXB0dXJlSGlzdG9yeSBlbHNlIE5vbmUKICAgICAgICAgICAgICAgICAgICAgICAgYXV0b2ZpbGxzID0gYnJvd3Nlci5HZXRBdXRvZmlsbHMoKSBpZiBTZXR0aW5ncy5DYXB0dXJlQXV0b2ZpbGxzIGVsc2UgTm9uZQogICAgICAgICAgICAgICAgICAgICAgICBpZiBwYXNzd29yZHMgb3IgY29va2llcyBvciBoaXN0b3J5IG9yIGF1dG9maWxsczoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9zLm1ha2VkaXJzKHNhdmVUb0RpciwgZXhpc3Rfb2s9VHJ1ZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHBhc3N3b3JkczoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQgPSBbJ1VSTDoge31cblVzZXJuYW1lOiB7fVxuUGFzc3dvcmQ6IHt9Jy5mb3JtYXQoKngpIGZvciB4IGluIHBhc3N3b3Jkc10KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aXRoIG9wZW4ob3MucGF0aC5qb2luKHNhdmVUb0RpciwgJ3t9IFBhc3N3b3Jkcy50eHQnLmZvcm1hdChuYW1lKSksICd3JywgZXJyb3JzPSdpZ25vcmUnLCBlbmNvZGluZz0ndXRmLTgnKSBhcyBmaWxlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlLndyaXRlKHNlbGYuU2VwYXJhdG9yLmxzdHJpcCgpICsgc2VsZi5TZXBhcmF0b3Iuam9pbihvdXRwdXQpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuUGFzc3dvcmRzQ291bnQgKz0gbGVuKHBhc3N3b3JkcykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGNvb2tpZXM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0ID0gWyd7fVx0e31cdHt9XHR7fVx0e31cdHt9XHR7fScuZm9ybWF0KGhvc3QsIHN0cihleHBpcnkgIT0gMCkudXBwZXIoKSwgY3BhdGgsIHN0cihub3QgaG9zdC5zdGFydHN3aXRoKCcuJykpLnVwcGVyKCksIGV4cGlyeSwgY25hbWUsIGNvb2tpZSkgZm9yIGhvc3QsIGNuYW1lLCBjcGF0aCwgY29va2llLCBleHBpcnkgaW4gY29va2llc10KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aXRoIG9wZW4ob3MucGF0aC5qb2luKHNhdmVUb0RpciwgJ3t9IENvb2tpZXMudHh0Jy5mb3JtYXQobmFtZSkpLCAndycsIGVycm9ycz0naWdub3JlJywgZW5jb2Rpbmc9J3V0Zi04JykgYXMgZmlsZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZS53cml0ZSgnXG4nLmpvaW4ob3V0cHV0KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLkNvb2tpZXMuZXh0ZW5kKFtzdHIoeFszXSkgZm9yIHggaW4gY29va2llc10pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBoaXN0b3J5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dCA9IFsnVVJMOiB7fVxuVGl0bGU6IHt9XG5WaXNpdHM6IHt9Jy5mb3JtYXQoKngpIGZvciB4IGluIGhpc3RvcnldCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2l0aCBvcGVuKG9zLnBhdGguam9pbihzYXZlVG9EaXIsICd7fSBIaXN0b3J5LnR4dCcuZm9ybWF0KG5hbWUpKSwgJ3cnLCBlcnJvcnM9J2lnbm9yZScsIGVuY29kaW5nPSd1dGYtOCcpIGFzIGZpbGU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGUud3JpdGUoc2VsZi5TZXBhcmF0b3IubHN0cmlwKCkgKyBzZWxmLlNlcGFyYXRvci5qb2luKG91dHB1dCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5IaXN0b3J5Q291bnQgKz0gbGVuKGhpc3RvcnkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBhdXRvZmlsbHM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0ID0gJ1xuJy5qb2luKGF1dG9maWxscykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aXRoIG9wZW4ob3MucGF0aC5qb2luKHNhdmVUb0RpciwgJ3t9IEF1dG9maWxscy50eHQnLmZvcm1hdChuYW1lKSksICd3JywgZXJyb3JzPSdpZ25vcmUnLCBlbmNvZGluZz0ndXRmLTgnKSBhcyBmaWxlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlLndyaXRlKG91dHB1dCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLkF1dG9maWxsQ291bnQgKz0gbGVuKGF1dG9maWxscykKICAgICAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgICAgICAgICAgICAgICAgICBwYXNzCiAgICAgICAgICAgICAgICB0ID0gVGhyZWFkKHRhcmdldD1ydW4sIGFyZ3M9KG5hbWUsIHBhdGgpKQogICAgICAgICAgICAgICAgdC5zdGFydCgpCiAgICAgICAgICAgICAgICB0aHJlYWRzLmFwcGVuZCh0KQogICAgICAgIGZvciB0aHJlYWQgaW4gdGhyZWFkczoKICAgICAgICAgICAgdGhyZWFkLmpvaW4oKQogICAgICAgIGlmIFNldHRpbmdzLkNhcHR1cmVHYW1lczoKICAgICAgICAgICAgc2VsZi5TdGVhbFJvYmxveENvb2tpZXMoKQoKICAgIEBFcnJvcnMuQ2F0Y2gKICAgIGRlZiBXZWJzaG90KHNlbGYpIC0+IE5vbmU6CiAgICAgICAgaWYgU2V0dGluZ3MuQ2FwdHVyZVdlYmNhbToKICAgICAgICAgICAgY2FtZGlyID0gb3MucGF0aC5qb2luKHNlbGYuVGVtcEZvbGRlciwgJ1dlYmNhbScpCiAgICAgICAgICAgIG9zLm1ha2VkaXJzKGNhbWRpciwgZXhpc3Rfb2s9VHJ1ZSkKICAgICAgICAgICAgY2FtSW5kZXggPSAwCiAgICAgICAgICAgIHdoaWxlIFN5c2NhbGxzLkNhcHR1cmVXZWJjYW0oY2FtSW5kZXgsIG9zLnBhdGguam9pbihjYW1kaXIsICdXZWJjYW0gKCVkKS5ibXAnICUgKGNhbUluZGV4ICsgMSkpKToKICAgICAgICAgICAgICAgIGNhbUluZGV4ICs9IDEKICAgICAgICAgICAgICAgIHNlbGYuV2ViY2FtUGljdHVyZXNDb3VudCArPSAxCiAgICAgICAgICAgIGlmIHNlbGYuV2ViY2FtUGljdHVyZXNDb3VudCA9PSAwOgogICAgICAgICAgICAgICAgc2h1dGlsLnJtdHJlZShjYW1kaXIpCgogICAgQEVycm9ycy5DYXRjaAogICAgZGVmIFN0ZWFsVGVsZWdyYW1TZXNzaW9ucyhzZWxmKSAtPiBOb25lOgogICAgICAgIGlmIFNldHRpbmdzLkNhcHR1cmVUZWxlZ3JhbToKICAgICAgICAgICAgTG9nZ2VyLmluZm8oJ1N0ZWFsaW5nIHRlbGVncmFtIHNlc3Npb25zJykKICAgICAgICAgICAgdGVsZWdyYW1QYXRocyA9IFsqc2V0KFtvcy5wYXRoLmRpcm5hbWUoeCkgZm9yIHggaW4gW1V0aWxpdHkuR2V0TG5rVGFyZ2V0KHYpIGZvciB2IGluIFV0aWxpdHkuR2V0TG5rRnJvbVN0YXJ0TWVudSgnVGVsZWdyYW0nKV0gaWYgeCBpcyBub3QgTm9uZV0pXQogICAgICAgICAgICBtdWx0aXBsZSA9IGxlbih0ZWxlZ3JhbVBhdGhzKSA+IDEKICAgICAgICAgICAgc2F2ZVRvRGlyID0gb3MucGF0aC5qb2luKHNlbGYuVGVtcEZvbGRlciwgJ01lc3NlbmdlcicsICdUZWxlZ3JhbScpCiAgICAgICAgICAgIGlmIG5vdCB0ZWxlZ3JhbVBhdGhzOgogICAgICAgICAgICAgICAgdGVsZWdyYW1QYXRocy5hcHBlbmQob3MucGF0aC5qb2luKG9zLmdldGVudignYXBwZGF0YScpLCAnVGVsZWdyYW0gRGVza3RvcCcpKQogICAgICAgICAgICBmb3IgaW5kZXgsIHRlbGVncmFtUGF0aCBpbiBlbnVtZXJhdGUodGVsZWdyYW1QYXRocyk6CiAgICAgICAgICAgICAgICB0RGF0YVBhdGggPSBvcy5wYXRoLmpvaW4odGVsZWdyYW1QYXRoLCAndGRhdGEnKQogICAgICAgICAgICAgICAgbG9naW5QYXRocyA9IFtdCiAgICAgICAgICAgICAgICBmaWxlcyA9IFtdCiAgICAgICAgICAgICAgICBkaXJzID0gW10KICAgICAgICAgICAgICAgIGhhc19rZXlfZGF0YXMgPSBGYWxzZQogICAgICAgICAgICAgICAgaWYgb3MucGF0aC5pc2Rpcih0RGF0YVBhdGgpOgogICAgICAgICAgICAgICAgICAgIGZvciBpdGVtIGluIG9zLmxpc3RkaXIodERhdGFQYXRoKToKICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXBhdGggPSBvcy5wYXRoLmpvaW4odERhdGFQYXRoLCBpdGVtKQogICAgICAgICAgICAgICAgICAgICAgICBpZiBpdGVtID09ICdrZXlfZGF0YXMnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzX2tleV9kYXRhcyA9IFRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2luUGF0aHMuYXBwZW5kKGl0ZW1wYXRoKQogICAgICAgICAgICAgICAgICAgICAgICBpZiBvcy5wYXRoLmlzZmlsZShpdGVtcGF0aCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlcy5hcHBlbmQoaXRlbSkKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpcnMuYXBwZW5kKGl0ZW0pCiAgICAgICAgICAgICAgICAgICAgZm9yIGZpbGVuYW1lIGluIGZpbGVzOgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgZGlybmFtZSBpbiBkaXJzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZGlybmFtZSArICdzJyA9PSBmaWxlbmFtZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dpblBhdGhzLmV4dGVuZChbb3MucGF0aC5qb2luKHREYXRhUGF0aCwgeCkgZm9yIHggaW4gKGZpbGVuYW1lLCBkaXJuYW1lKV0pCiAgICAgICAgICAgICAgICBpZiBoYXNfa2V5X2RhdGFzIGFuZCBsZW4obG9naW5QYXRocykgLSAxID4gMDoKICAgICAgICAgICAgICAgICAgICBfc2F2ZVRvRGlyID0gc2F2ZVRvRGlyCiAgICAgICAgICAgICAgICAgICAgaWYgbXVsdGlwbGU6CiAgICAgICAgICAgICAgICAgICAgICAgIF9zYXZlVG9EaXIgPSBvcy5wYXRoLmpvaW4oX3NhdmVUb0RpciwgJ1Byb2ZpbGUgJWQnICUgKGluZGV4ICsgMSkpCiAgICAgICAgICAgICAgICAgICAgb3MubWFrZWRpcnMoX3NhdmVUb0RpciwgZXhpc3Rfb2s9VHJ1ZSkKICAgICAgICAgICAgICAgICAgICBmYWlsZWQgPSBGYWxzZQogICAgICAgICAgICAgICAgICAgIGZvciBsb2dpblBhdGggaW4gbG9naW5QYXRoczoKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgb3MucGF0aC5pc2ZpbGUobG9naW5QYXRoKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaHV0aWwuY29weShsb2dpblBhdGgsIG9zLnBhdGguam9pbihfc2F2ZVRvRGlyLCBvcy5wYXRoLmJhc2VuYW1lKGxvZ2luUGF0aCkpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaHV0aWwuY29weXRyZWUobG9naW5QYXRoLCBvcy5wYXRoLmpvaW4oX3NhdmVUb0Rpciwgb3MucGF0aC5iYXNlbmFtZShsb2dpblBhdGgpKSwgZGlyc19leGlzdF9vaz1UcnVlKQogICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2h1dGlsLnJtdHJlZShfc2F2ZVRvRGlyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFpbGVkID0gVHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICBpZiBub3QgZmFpbGVkOgogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLlRlbGVncmFtU2Vzc2lvbnNDb3VudCArPSBpbnQoKGxlbihsb2dpblBhdGhzKSAtIDEpIC8gMikKICAgICAgICAgICAgaWYgc2VsZi5UZWxlZ3JhbVNlc3Npb25zQ291bnQgYW5kIG11bHRpcGxlOgogICAgICAgICAgICAgICAgd2l0aCBvcGVuKG9zLnBhdGguam9pbihzYXZlVG9EaXIsICdJbmZvLnR4dCcpLCAndycpIGFzIGZpbGU6CiAgICAgICAgICAgICAgICAgICAgZmlsZS53cml0ZSgnTXVsdGlwbGUgVGVsZWdyYW0gaW5zdGFsbGF0aW9ucyBhcmUgZm91bmQsIHNvIHRoZSBmaWxlcyBmb3IgZWFjaCBvZiB0aGVtIGFyZSBwdXQgaW4gZGlmZmVyZW50IFByb2ZpbGVzJykKCiAgICBARXJyb3JzLkNhdGNoCiAgICBkZWYgU3RlYWxEaXNjb3JkVG9rZW5zKHNlbGYpIC0+IE5vbmU6CiAgICAgICAgaWYgU2V0dGluZ3MuQ2FwdHVyZURpc2NvcmRUb2tlbnM6CiAgICAgICAgICAgIExvZ2dlci5pbmZvKCdTdGVhbGluZyBkaXNjb3JkIHRva2VucycpCiAgICAgICAgICAgIG91dHB1dCA9IGxpc3QoKQogICAgICAgICAgICBzYXZlVG9EaXIgPSBvcy5wYXRoLmpvaW4oc2VsZi5UZW1wRm9sZGVyLCAnTWVzc2VuZ2VyJywgJ0Rpc2NvcmQnKQogICAgICAgICAgICBhY2NvdW50cyA9IERpc2NvcmQuR2V0VG9rZW5zKCkKICAgICAgICAgICAgaWYgYWNjb3VudHM6CiAgICAgICAgICAgICAgICBmb3IgaXRlbSBpbiBhY2NvdW50czoKICAgICAgICAgICAgICAgICAgICBVU0VSTkFNRSwgVVNFUklELCBNRkEsIEVNQUlMLCBQSE9ORSwgVkVSSUZJRUQsIE5JVFJPLCBCSUxMSU5HLCBUT0tFTiwgR0lGVFMgPSBpdGVtLnZhbHVlcygpCiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LmFwcGVuZCgnVXNlcm5hbWU6IHt9XG5Vc2VyIElEOiB7fVxuTUZBIGVuYWJsZWQ6IHt9XG5FbWFpbDoge31cblBob25lOiB7fVxuVmVyaWZpZWQ6IHt9XG5OaXRybzoge31cbkJpbGxpbmcgTWV0aG9kKHMpOiB7fVxuXG5Ub2tlbjoge31cblxue30nLmZvcm1hdChVU0VSTkFNRSwgVVNFUklELCAnWWVzJyBpZiBNRkEgZWxzZSAnTm8nLCBFTUFJTCwgUEhPTkUsICdZZXMnIGlmIFZFUklGSUVEIGVsc2UgJ05vJywgTklUUk8sIEJJTExJTkcsIFRPS0VOLCBHSUZUUykuc3RyaXAoKSkKICAgICAgICAgICAgICAgIG9zLm1ha2VkaXJzKG9zLnBhdGguam9pbihzZWxmLlRlbXBGb2xkZXIsICdNZXNzZW5nZXInLCAnRGlzY29yZCcpLCBleGlzdF9vaz1UcnVlKQogICAgICAgICAgICAgICAgd2l0aCBvcGVuKG9zLnBhdGguam9pbihzYXZlVG9EaXIsICdEaXNjb3JkIFRva2Vucy50eHQnKSwgJ3cnLCBlbmNvZGluZz0ndXRmLTgnLCBlcnJvcnM9J2lnbm9yZScpIGFzIGZpbGU6CiAgICAgICAgICAgICAgICAgICAgZmlsZS53cml0ZShzZWxmLlNlcGFyYXRvci5sc3RyaXAoKSArIHNlbGYuU2VwYXJhdG9yLmpvaW4ob3V0cHV0KSkKICAgICAgICAgICAgICAgIHNlbGYuRGlzY29yZFRva2Vuc0NvdW50ICs9IGxlbihhY2NvdW50cykKICAgICAgICBpZiBTZXR0aW5ncy5EaXNjb3JkSW5qZWN0aW9uIGFuZCAobm90IFV0aWxpdHkuSXNJblN0YXJ0dXAoKSk6CiAgICAgICAgICAgIHBhdGhzID0gRGlzY29yZC5JbmplY3RKcygpCiAgICAgICAgICAgIGlmIHBhdGhzIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgTG9nZ2VyLmluZm8oJ0luamVjdGluZyBiYWNrZG9vciBpbnRvIGRpc2NvcmQnKQogICAgICAgICAgICAgICAgZm9yIGRpciBpbiBwYXRoczoKICAgICAgICAgICAgICAgICAgICBhcHBuYW1lID0gb3MucGF0aC5iYXNlbmFtZShkaXIpCiAgICAgICAgICAgICAgICAgICAgVXRpbGl0eS5UYXNrS2lsbChhcHBuYW1lKQogICAgICAgICAgICAgICAgICAgIGZvciByb290LCBfLCBmaWxlcyBpbiBvcy53YWxrKGRpcik6CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBmaWxlIGluIGZpbGVzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZmlsZS5sb3dlcigpID09IGFwcG5hbWUubG93ZXIoKSArICcuZXhlJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZXBhdGggPSBvcy5wYXRoLmRpcm5hbWUob3MucGF0aC5yZWFscGF0aChvcy5wYXRoLmpvaW4ocm9vdCwgZmlsZSkpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVwZGF0ZUVYRSA9IG9zLnBhdGguam9pbihkaXIsICdVcGRhdGUuZXhlJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEaXNjb3JkRVhFID0gb3MucGF0aC5qb2luKGZpbGVwYXRoLCAne30uZXhlJy5mb3JtYXQoYXBwbmFtZSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VicHJvY2Vzcy5Qb3BlbihbVXBkYXRlRVhFLCAnLS1wcm9jZXNzU3RhcnQnLCBEaXNjb3JkRVhFXSwgc2hlbGw9VHJ1ZSwgY3JlYXRpb25mbGFncz1zdWJwcm9jZXNzLkNSRUFURV9ORVdfQ09OU09MRSB8IHN1YnByb2Nlc3MuU1dfSElERSkKCiAgICBkZWYgQ3JlYXRlQXJjaGl2ZShzZWxmKSAtPiB0dXBsZVtzdHIsIHN0cl06CiAgICAgICAgTG9nZ2VyLmluZm8oJ0NyZWF0aW5nIGFyY2hpdmUnKQogICAgICAgIHJhclBhdGggPSBvcy5wYXRoLmpvaW4oc3lzLl9NRUlQQVNTLCAncmFyLmV4ZScpCiAgICAgICAgaWYgVXRpbGl0eS5HZXRTZWxmKClbMV0gb3Igb3MucGF0aC5pc2ZpbGUocmFyUGF0aCk6CiAgICAgICAgICAgIHJhclBhdGggPSBvcy5wYXRoLmpvaW4oc3lzLl9NRUlQQVNTLCAncmFyLmV4ZScpCiAgICAgICAgICAgIGlmIG9zLnBhdGguaXNmaWxlKHJhclBhdGgpOgogICAgICAgICAgICAgICAgcGFzc3dvcmQgPSBTZXR0aW5ncy5BcmNoaXZlUGFzc3dvcmQgb3IgJ2JsYW5rMTIzJwogICAgICAgICAgICAgICAgcHJvY2VzcyA9IHN1YnByb2Nlc3MucnVuKCd7fSBhIC1yIC1ocCJ7fSIgInt9IiAqJy5mb3JtYXQocmFyUGF0aCwgcGFzc3dvcmQsIHNlbGYuQXJjaGl2ZVBhdGgpLCBjYXB0dXJlX291dHB1dD1UcnVlLCBzaGVsbD1UcnVlLCBjd2Q9c2VsZi5UZW1wRm9sZGVyKQogICAgICAgICAgICAgICAgaWYgcHJvY2Vzcy5yZXR1cm5jb2RlID09IDA6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdyYXInCiAgICAgICAgc2h1dGlsLm1ha2VfYXJjaGl2ZShzZWxmLkFyY2hpdmVQYXRoLnJzcGxpdCgnLicsIDEpWzBdLCAnemlwJywgc2VsZi5UZW1wRm9sZGVyKQogICAgICAgIHJldHVybiAnemlwJwoKICAgIGRlZiBVcGxvYWRUb0V4dGVybmFsU2VydmljZShzZWxmLCBwYXRoLCBmaWxlbmFtZT1Ob25lKSAtPiBzdHIgfCBOb25lOgogICAgICAgIGlmIG9zLnBhdGguaXNmaWxlKHBhdGgpOgogICAgICAgICAgICBMb2dnZXIuaW5mbygnVXBsb2FkaW5nICVzIHRvIGdvZmlsZScgJSAoZmlsZW5hbWUgb3IgJ2ZpbGUnKSkKICAgICAgICAgICAgd2l0aCBvcGVuKHBhdGgsICdyYicpIGFzIGZpbGU6CiAgICAgICAgICAgICAgICBmaWxlQnl0ZXMgPSBmaWxlLnJlYWQoKQogICAgICAgICAgICBpZiBmaWxlbmFtZSBpcyBOb25lOgogICAgICAgICAgICAgICAgZmlsZW5hbWUgPSBvcy5wYXRoLmJhc2VuYW1lKHBhdGgpCiAgICAgICAgICAgIGh0dHAgPSBQb29sTWFuYWdlcihjZXJ0X3JlcXM9J0NFUlRfTk9ORScpCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHNlcnZlciA9IGpzb24ubG9hZHMoaHR0cC5yZXF1ZXN0KCdHRVQnLCAnaHR0cHM6Ly9hcGkuZ29maWxlLmlvL2dldFNlcnZlcicpLmRhdGEuZGVjb2RlKGVycm9ycz0naWdub3JlJykpWydkYXRhJ11bJ3NlcnZlciddCiAgICAgICAgICAgICAgICBpZiBzZXJ2ZXI6CiAgICAgICAgICAgICAgICAgICAgdXJsID0ganNvbi5sb2FkcyhodHRwLnJlcXVlc3QoJ1BPU1QnLCAnaHR0cHM6Ly97fS5nb2ZpbGUuaW8vdXBsb2FkRmlsZScuZm9ybWF0KHNlcnZlciksIGZpZWxkcz17J2ZpbGUnOiAoZmlsZW5hbWUsIGZpbGVCeXRlcyl9KS5kYXRhLmRlY29kZShlcnJvcnM9J2lnbm9yZScpKVsnZGF0YSddWydkb3dubG9hZFBhZ2UnXQogICAgICAgICAgICAgICAgICAgIGlmIHVybDoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVybAogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIExvZ2dlci5lcnJvcignRmFpbGVkIHRvIHVwbG9hZCB0byBnb2ZpbGUsIHRyeWluZyB0byB1cGxvYWQgdG8gYW5vbmZpbGVzJykKICAgICAgICAgICAgICAgICAgICB1cmwgPSBqc29uLmxvYWRzKGh0dHAucmVxdWVzdCgnUE9TVCcsICdodHRwczovL2FwaS5hbm9uZmlsZXMuY29tL3VwbG9hZCcsIGZpZWxkcz17J2ZpbGUnOiAoZmlsZW5hbWUsIGZpbGVCeXRlcyl9KS5kYXRhLmRlY29kZShlcnJvcnM9J2lnbm9yZScpKVsnZGF0YSddWydmaWxlJ11bJ3VybCddWydzaG9ydCddCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVybAogICAgICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICAgICAgICAgICAgICBMb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byB1cGxvYWQgdG8gYW5vbmZpbGVzJykKICAgICAgICAgICAgICAgICAgICByZXR1cm4gTm9uZQoKICAgIGRlZiBTZW5kRGF0YShzZWxmKSAtPiBOb25lOgogICAgICAgIExvZ2dlci5pbmZvKCdTZW5kaW5nIGRhdGEgdG8gQzInKQogICAgICAgIGV4dGVudGlvbiA9IHNlbGYuQ3JlYXRlQXJjaGl2ZSgpCiAgICAgICAgaWYgbm90IG9zLnBhdGguaXNmaWxlKHNlbGYuQXJjaGl2ZVBhdGgpOgogICAgICAgICAgICByYWlzZSBGaWxlTm90Rm91bmRFcnJvcignRmFpbGVkIHRvIGNyZWF0ZSBhcmNoaXZlJykKICAgICAgICBmaWxlbmFtZSA9ICdCbGFuay0lcy4lcycgJSAob3MuZ2V0bG9naW4oKSwgZXh0ZW50aW9uKQogICAgICAgIGNvbXB1dGVyTmFtZSA9IG9zLmdldGVudignY29tcHV0ZXJuYW1lJykgb3IgJ1VuYWJsZSB0byBnZXQgY29tcHV0ZXIgbmFtZScKICAgICAgICBjb21wdXRlck9TID0gc3VicHJvY2Vzcy5ydW4oJ3dtaWMgb3MgZ2V0IENhcHRpb24nLCBjYXB0dXJlX291dHB1dD1UcnVlLCBzaGVsbD1UcnVlKS5zdGRvdXQuZGVjb2RlKGVycm9ycz0naWdub3JlJykuc3RyaXAoKS5zcGxpdGxpbmVzKCkKICAgICAgICBjb21wdXRlck9TID0gY29tcHV0ZXJPU1syXS5zdHJpcCgpIGlmIGxlbihjb21wdXRlck9TKSA+PSAyIGVsc2UgJ1VuYWJsZSB0byBkZXRlY3QgT1MnCiAgICAgICAgdG90YWxNZW1vcnkgPSBzdWJwcm9jZXNzLnJ1bignd21pYyBjb21wdXRlcnN5c3RlbSBnZXQgdG90YWxwaHlzaWNhbG1lbW9yeScsIGNhcHR1cmVfb3V0cHV0PVRydWUsIHNoZWxsPVRydWUpLnN0ZG91dC5kZWNvZGUoZXJyb3JzPSdpZ25vcmUnKS5zdHJpcCgpLnNwbGl0KCkKICAgICAgICB0b3RhbE1lbW9yeSA9IHN0cihpbnQoaW50KHRvdGFsTWVtb3J5WzFdKSAvIDEwMDAwMDAwMDApKSArICcgR0InIGlmIGxlbih0b3RhbE1lbW9yeSkgPj0gMSBlbHNlICdVbmFibGUgdG8gZGV0ZWN0IHRvdGFsIG1lbW9yeScKICAgICAgICB1dWlkID0gc3VicHJvY2Vzcy5ydW4oJ3dtaWMgY3Nwcm9kdWN0IGdldCB1dWlkJywgY2FwdHVyZV9vdXRwdXQ9VHJ1ZSwgc2hlbGw9VHJ1ZSkuc3Rkb3V0LmRlY29kZShlcnJvcnM9J2lnbm9yZScpLnN0cmlwKCkuc3BsaXQoKQogICAgICAgIHV1aWQgPSB1dWlkWzFdLnN0cmlwKCkgaWYgbGVuKHV1aWQpID49IDEgZWxzZSAnVW5hYmxlIHRvIGRldGVjdCBVVUlEJwogICAgICAgIGNwdSA9IHN1YnByb2Nlc3MucnVuKCJwb3dlcnNoZWxsIEdldC1JdGVtUHJvcGVydHlWYWx1ZSAtUGF0aCAnSEtMTTpTeXN0ZW1cXEN1cnJlbnRDb250cm9sU2V0XFxDb250cm9sXFxTZXNzaW9uIE1hbmFnZXJcXEVudmlyb25tZW50JyAtTmFtZSBQUk9DRVNTT1JfSURFTlRJRklFUiIsIGNhcHR1cmVfb3V0cHV0PVRydWUsIHNoZWxsPVRydWUpLnN0ZG91dC5kZWNvZGUoZXJyb3JzPSdpZ25vcmUnKS5zdHJpcCgpIG9yICdVbmFibGUgdG8gZGV0ZWN0IENQVScKICAgICAgICBncHUgPSBzdWJwcm9jZXNzLnJ1bignd21pYyBwYXRoIHdpbjMyX1ZpZGVvQ29udHJvbGxlciBnZXQgbmFtZScsIGNhcHR1cmVfb3V0cHV0PVRydWUsIHNoZWxsPVRydWUpLnN0ZG91dC5kZWNvZGUoZXJyb3JzPSdpZ25vcmUnKS5zcGxpdGxpbmVzKCkKICAgICAgICBncHUgPSBncHVbMl0uc3RyaXAoKSBpZiBsZW4oZ3B1KSA+PSAyIGVsc2UgJ1VuYWJsZSB0byBkZXRlY3QgR1BVJwogICAgICAgIHByb2R1Y3RLZXkgPSBzdWJwcm9jZXNzLnJ1bigicG93ZXJzaGVsbCBHZXQtSXRlbVByb3BlcnR5VmFsdWUgLVBhdGggJ0hLTE06U09GVFdBUkVcXE1pY3Jvc29mdFxcV2luZG93cyBOVFxcQ3VycmVudFZlcnNpb25cXFNvZnR3YXJlUHJvdGVjdGlvblBsYXRmb3JtJyAtTmFtZSBCYWNrdXBQcm9kdWN0S2V5RGVmYXVsdCIsIGNhcHR1cmVfb3V0cHV0PVRydWUsIHNoZWxsPVRydWUpLnN0ZG91dC5kZWNvZGUoZXJyb3JzPSdpZ25vcmUnKS5zdHJpcCgpIG9yICdVbmFibGUgdG8gZ2V0IHByb2R1Y3Qga2V5JwogICAgICAgIGh0dHAgPSBQb29sTWFuYWdlcihjZXJ0X3JlcXM9J0NFUlRfTk9ORScpCiAgICAgICAgdHJ5OgogICAgICAgICAgICByOiBkaWN0ID0ganNvbi5sb2FkcyhodHRwLnJlcXVlc3QoJ0dFVCcsICdodHRwOi8vaXAtYXBpLmNvbS9qc29uLz9maWVsZHM9MjI1NTQ1JykuZGF0YS5kZWNvZGUoZXJyb3JzPSdpZ25vcmUnKSkKICAgICAgICAgICAgaWYgci5nZXQoJ3N0YXR1cycpICE9ICdzdWNjZXNzJzoKICAgICAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbignRmFpbGVkJykKICAgICAgICAgICAgZGF0YSA9IGYiXG5JUDoge3JbJ3F1ZXJ5J119XG5SZWdpb246IHtyWydyZWdpb25OYW1lJ119XG5Db3VudHJ5OiB7clsnY291bnRyeSddfVxuVGltZXpvbmU6IHtyWyd0aW1lem9uZSddfVxuXG57J0NlbGx1bGFyIE5ldHdvcms6Jy5sanVzdCgyMCl9IHsoY2hyKDk5ODkpIGlmIHJbJ21vYmlsZSddIGVsc2UgY2hyKDEwMDYyKSl9XG57J1Byb3h5L1ZQTjonLmxqdXN0KDIwKX0geyhjaHIoOTk4OSkgaWYgclsncHJveHknXSBlbHNlIGNocigxMDA2MikpfSIKICAgICAgICAgICAgaWYgbGVuKHJbJ3JldmVyc2UnXSkgIT0gMDoKICAgICAgICAgICAgICAgIGRhdGEgKz0gZiJcblJldmVyc2UgRE5TOiB7clsncmV2ZXJzZSddfSIKICAgICAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgICAgICBpcGluZm8gPSAnKFVuYWJsZSB0byBnZXQgSVAgaW5mbyknCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaXBpbmZvID0gZGF0YQogICAgICAgIHN5c3RlbV9pbmZvID0gZidDb21wdXRlciBOYW1lOiB7Y29tcHV0ZXJOYW1lfVxuQ29tcHV0ZXIgT1M6IHtjb21wdXRlck9TfVxuVG90YWwgTWVtb3J5OiB7dG90YWxNZW1vcnl9XG5VVUlEOiB7dXVpZH1cbkNQVToge2NwdX1cbkdQVToge2dwdX1cblByb2R1Y3QgS2V5OiB7cHJvZHVjdEtleX0nCiAgICAgICAgY29sbGVjdGlvbiA9IHsnRGlzY29yZCBBY2NvdW50cyc6IHNlbGYuRGlzY29yZFRva2Vuc0NvdW50LCAnUGFzc3dvcmRzJzogc2VsZi5QYXNzd29yZHNDb3VudCwgJ0Nvb2tpZXMnOiBsZW4oc2VsZi5Db29raWVzKSwgJ0hpc3RvcnknOiBzZWxmLkhpc3RvcnlDb3VudCwgJ0F1dG9maWxscyc6IHNlbGYuQXV0b2ZpbGxDb3VudCwgJ1JvYmxveCBDb29raWVzJzogc2VsZi5Sb2Jsb3hDb29raWVzQ291bnQsICdUZWxlZ3JhbSBTZXNzaW9ucyc6IHNlbGYuVGVsZWdyYW1TZXNzaW9uc0NvdW50LCAnQ29tbW9uIEZpbGVzJzogc2VsZi5Db21tb25GaWxlc0NvdW50LCAnV2FsbGV0cyc6IHNlbGYuV2FsbGV0c0NvdW50LCAnV2lmaSBQYXNzd29yZHMnOiBzZWxmLldpZmlQYXNzd29yZHNDb3VudCwgJ1dlYmNhbSc6IHNlbGYuV2ViY2FtUGljdHVyZXNDb3VudCwgJ01pbmVjcmFmdCBTZXNzaW9ucyc6IHNlbGYuTWluZWNyYWZ0U2Vzc2lvbnMsICdFcGljIFNlc3Npb24nOiAnWWVzJyBpZiBzZWxmLkVwaWNTdG9sZW4gZWxzZSAnTm8nLCAnU3RlYW0gU2Vzc2lvbic6ICdZZXMnIGlmIHNlbGYuU3RlYW1TdG9sZW4gZWxzZSAnTm8nLCAnVXBsYXkgU2Vzc2lvbic6ICdZZXMnIGlmIHNlbGYuVXBsYXlTdG9sZW4gZWxzZSAnTm8nLCAnR3Jvd3RvcGlhIFNlc3Npb24nOiAnWWVzJyBpZiBzZWxmLkdyb3d0b3BpYVN0b2xlbiBlbHNlICdObycsICdTY3JlZW5zaG90JzogJ1llcycgaWYgc2VsZi5TY3JlZW5zaG90VGFrZW4gZWxzZSAnTm8nLCAnU3lzdGVtIEluZm8nOiAnWWVzJyBpZiBzZWxmLlN5c3RlbUluZm9TdG9sZW4gZWxzZSAnTm8nfQogICAgICAgIGdyYWJiZWRJbmZvID0gJ1xuJy5qb2luKFtrZXkgKyAnIDogJyArIHN0cih2YWx1ZSkgZm9yIGtleSwgdmFsdWUgaW4gY29sbGVjdGlvbi5pdGVtcygpXSkKICAgICAgICBtYXRjaCBTZXR0aW5ncy5DMlswXToKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaW1hZ2VfdXJsID0gJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9CbGFuay1jL0JsYW5rLUdyYWJiZXIvbWFpbi8uZ2l0aHViL3dvcmtmbG93cy9pbWFnZS5wbmcnCiAgICAgICAgICAgICAgICBwYXlsb2FkID0geydjb250ZW50JzogJ3x8QGV2ZXJ5b25lfHwnIGlmIFNldHRpbmdzLlBpbmdNZSBlbHNlICcnLCAnZW1iZWRzJzogW3sndGl0bGUnOiAnQmxhbmsgR3JhYmJlcicsICdkZXNjcmlwdGlvbic6IGYnKipfX1N5c3RlbSBJbmZvX19cbmBgYGF1dG9ob3RrZXlcbntzeXN0ZW1faW5mb31gYGBcbl9fSVAgSW5mb19fYGBgcHJvbG9nXG57aXBpbmZvfWBgYFxuX19HcmFiYmVkIEluZm9fX2BgYGpzXG57Z3JhYmJlZEluZm99YGBgKionLCAndXJsJzogJ2h0dHBzOi8vZ2l0aHViLmNvbS9CbGFuay1jL0JsYW5rLUdyYWJiZXInLCAnY29sb3InOiAzNDMwMywgJ2Zvb3Rlcic6IHsndGV4dCc6ICdHcmFiYmVkIGJ5IEJsYW5rIEdyYWJiZXIgfCBodHRwczovL2dpdGh1Yi5jb20vQmxhbmstYy9CbGFuay1HcmFiYmVyJ30sICd0aHVtYm5haWwnOiB7J3VybCc6IGltYWdlX3VybH19XSwgJ3VzZXJuYW1lJzogJ0JsYW5rIEdyYWJiZXInLCAnYXZhdGFyX3VybCc6IGltYWdlX3VybH0KICAgICAgICAgICAgICAgIGlmIG9zLnBhdGguZ2V0c2l6ZShzZWxmLkFyY2hpdmVQYXRoKSAvICgxMDI0ICogMTAyNCkgPiAyMDoKICAgICAgICAgICAgICAgICAgICB1cmwgPSBzZWxmLlVwbG9hZFRvRXh0ZXJuYWxTZXJ2aWNlKHNlbGYuQXJjaGl2ZVBhdGgsIGZpbGVuYW1lKQogICAgICAgICAgICAgICAgICAgIGlmIHVybCBpcyBOb25lOgogICAgICAgICAgICAgICAgICAgICAgICByYWlzZSBFeGNlcHRpb24oJ0ZhaWxlZCB0byB1cGxvYWQgdG8gZXh0ZXJuYWwgc2VydmljZScpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHVybCA9IE5vbmUKICAgICAgICAgICAgICAgIGZpZWxkcyA9IGRpY3QoKQogICAgICAgICAgICAgICAgaWYgdXJsOgogICAgICAgICAgICAgICAgICAgIHBheWxvYWRbJ2NvbnRlbnQnXSArPSAnIHwgQXJjaGl2ZSA6ICVzJyAlIHVybAogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBmaWVsZHNbJ2ZpbGUnXSA9IChmaWxlbmFtZSwgb3BlbihzZWxmLkFyY2hpdmVQYXRoLCAncmInKS5yZWFkKCkpCiAgICAgICAgICAgICAgICBmaWVsZHNbJ3BheWxvYWRfanNvbiddID0ganNvbi5kdW1wcyhwYXlsb2FkKS5lbmNvZGUoKQogICAgICAgICAgICAgICAgaHR0cC5yZXF1ZXN0KCdQT1NUJywgU2V0dGluZ3MuQzJbMV0sIGZpZWxkcz1maWVsZHMpCiAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgIHBheWxvYWQgPSB7J2NhcHRpb24nOiBmJzxiPkJsYW5rIEdyYWJiZXI8L2I+IGdvdCBhIG5ldyB2aWN0aW06IDxiPntvcy5nZXRsb2dpbigpfTwvYj5cblxuPGI+SVAgSW5mbzwvYj5cbjxjb2RlPntpcGluZm99PC9jb2RlPlxuXG48Yj5TeXN0ZW0gSW5mbzwvYj5cbjxjb2RlPntzeXN0ZW1faW5mb308L2NvZGU+XG5cbjxiPkdyYWJiZWQgSW5mbzwvYj5cbjxjb2RlPntncmFiYmVkSW5mb308L2NvZGU+Jy5zdHJpcCgpLCAncGFyc2VfbW9kZSc6ICdIVE1MJ30KICAgICAgICAgICAgICAgIGlmIG9zLnBhdGguZ2V0c2l6ZShzZWxmLkFyY2hpdmVQYXRoKSAvICgxMDI0ICogMTAyNCkgPiA0MDoKICAgICAgICAgICAgICAgICAgICB1cmwgPSBzZWxmLlVwbG9hZFRvRXh0ZXJuYWxTZXJ2aWNlKHNlbGYuQXJjaGl2ZVBhdGgsIGZpbGVuYW1lKQogICAgICAgICAgICAgICAgICAgIGlmIHVybCBpcyBOb25lOgogICAgICAgICAgICAgICAgICAgICAgICByYWlzZSBFeGNlcHRpb24oJ0ZhaWxlZCB0byB1cGxvYWQgdG8gZXh0ZXJuYWwgc2VydmljZScpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHVybCA9IE5vbmUKICAgICAgICAgICAgICAgIGZpZWxkcyA9IGRpY3QoKQogICAgICAgICAgICAgICAgaWYgdXJsOgogICAgICAgICAgICAgICAgICAgIHBheWxvYWRbJ3RleHQnXSA9IHBheWxvYWRbJ2NhcHRpb24nXSArICdcblxuQXJjaGl2ZSA6ICVzJyAlIHVybAogICAgICAgICAgICAgICAgICAgIG1ldGhvZCA9ICdzZW5kTWVzc2FnZScKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgZmllbGRzWydkb2N1bWVudCddID0gKGZpbGVuYW1lLCBvcGVuKHNlbGYuQXJjaGl2ZVBhdGgsICdyYicpLnJlYWQoKSkKICAgICAgICAgICAgICAgICAgICBtZXRob2QgPSAnc2VuZERvY3VtZW50JwogICAgICAgICAgICAgICAgdG9rZW4sIGNoYXRfaWQgPSBTZXR0aW5ncy5DMlsxXS5zcGxpdCgnJCcpCiAgICAgICAgICAgICAgICBmaWVsZHMudXBkYXRlKHBheWxvYWQpCiAgICAgICAgICAgICAgICBmaWVsZHMudXBkYXRlKHsnY2hhdF9pZCc6IGNoYXRfaWR9KQogICAgICAgICAgICAgICAgaHR0cC5yZXF1ZXN0KCdQT1NUJywgJ2h0dHBzOi8vYXBpLnRlbGVncmFtLm9yZy9ib3Qlcy8lcycgJSAodG9rZW4sIG1ldGhvZCksIGZpZWxkcz1maWVsZHMpCmlmIG9zLm5hbWUgPT0gJ250JzoKICAgIExvZ2dlci5pbmZvKCdQcm9jZXNzIHN0YXJ0ZWQnKQogICAgaWYgU2V0dGluZ3MuSGlkZUNvbnNvbGU6CiAgICAgICAgU3lzY2FsbHMuSGlkZUNvbnNvbGUoKQogICAgaWYgbm90IFV0aWxpdHkuSXNBZG1pbigpOgogICAgICAgIExvZ2dlci53YXJuaW5nKCdBZG1pbiBwcml2aWxlZ2VzIG5vdCBhdmFpbGFibGUnKQogICAgICAgIGlmIFV0aWxpdHkuR2V0U2VsZigpWzFdOgogICAgICAgICAgICBpZiBub3QgJy0tbm91YWNieXBhc3MnIGluIHN5cy5hcmd2IGFuZCBTZXR0aW5ncy5VYWNCeXBhc3M6CiAgICAgICAgICAgICAgICBMb2dnZXIuaW5mbygnVHJ5aW5nIHRvIGJ5cGFzcyBVQUMgKEFwcGxpY2F0aW9uIHdpbGwgcmVzdGFydCknKQogICAgICAgICAgICAgICAgaWYgVXRpbGl0eS5VQUNieXBhc3MoKToKICAgICAgICAgICAgICAgICAgICBvcy5fZXhpdCgwKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBMb2dnZXIud2FybmluZygnRmFpbGVkIHRvIGJ5cGFzcyBVQUMnKQogICAgICAgICAgICAgICAgICAgIGlmIG5vdCBVdGlsaXR5LklzSW5TdGFydHVwKHN5cy5leGVjdXRhYmxlKToKICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oJ1Nob3dpbmcgVUFDIHByb21wdCcpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIFV0aWxpdHkuVUFDUHJvbXB0KHN5cy5leGVjdXRhYmxlKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9zLl9leGl0KDApCiAgICAgICAgICAgIGlmIG5vdCBVdGlsaXR5LklzSW5TdGFydHVwKCkgYW5kIChub3QgU2V0dGluZ3MuVWFjQnlwYXNzKToKICAgICAgICAgICAgICAgIExvZ2dlci5pbmZvKCdTaG93aW5nIFVBQyBwcm9tcHQgdG8gdXNlciAoQXBwbGljYXRpb24gd2lsbCByZXN0YXJ0KScpCiAgICAgICAgICAgICAgICBpZiBVdGlsaXR5LlVBQ1Byb21wdChzeXMuZXhlY3V0YWJsZSk6CiAgICAgICAgICAgICAgICAgICAgb3MuX2V4aXQoMCkKICAgIExvZ2dlci5pbmZvKCdUcnlpbmcgdG8gY3JlYXRlIG11dGV4JykKICAgIGlmIG5vdCBTeXNjYWxscy5DcmVhdGVNdXRleChTZXR0aW5ncy5NdXRleCk6CiAgICAgICAgTG9nZ2VyLmluZm8oJ011dGV4IGFscmVhZHkgZXhpc3RzLCBleGl0aW5nJykKICAgICAgICBvcy5fZXhpdCgwKQogICAgaWYgVXRpbGl0eS5HZXRTZWxmKClbMV06CiAgICAgICAgTG9nZ2VyLmluZm8oJ1RyeWluZyB0byBleGNsdWRlIHRoZSBmaWxlIGZyb20gV2luZG93cyBkZWZlbmRlcicpCiAgICAgICAgVXRpbGl0eS5FeGNsdWRlRnJvbURlZmVuZGVyKCkKICAgIExvZ2dlci5pbmZvKCdUcnlpbmcgdG8gZGlzYWJsZSBkZWZlbmRlcicpCiAgICBVdGlsaXR5LkRpc2FibGVEZWZlbmRlcigpCiAgICBpZiBVdGlsaXR5LkdldFNlbGYoKVsxXSBhbmQgKFNldHRpbmdzLlJ1bkJvdW5kT25TdGFydHVwIG9yIG5vdCBVdGlsaXR5LklzSW5TdGFydHVwKCkpIGFuZCBvcy5wYXRoLmlzZmlsZSgoYm91bmRGaWxlU3JjIDo9IG9zLnBhdGguam9pbihzeXMuX01FSVBBU1MsICdib3VuZC5ibGFuaycpKSk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBMb2dnZXIuaW5mbygnVHJ5aW5nIHRvIGV4dHJhY3QgYm91bmQgZmlsZScpCiAgICAgICAgICAgIGlmIG9zLnBhdGguaXNmaWxlKChib3VuZEZpbGVEc3QgOj0gb3MucGF0aC5qb2luKG9zLmdldGVudigndGVtcCcpLCAnYm91bmQuZXhlJykpKToKICAgICAgICAgICAgICAgIExvZ2dlci5pbmZvKCdPbGQgYm91bmQgZmlsZSBmb3VuZCwgcmVtb3ZpbmcgaXQnKQogICAgICAgICAgICAgICAgb3MucmVtb3ZlKGJvdW5kRmlsZURzdCkKICAgICAgICAgICAgd2l0aCBvcGVuKGJvdW5kRmlsZVNyYywgJ3JiJykgYXMgZmlsZToKICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBmaWxlLnJlYWQoKQogICAgICAgICAgICBkZWNyeXB0ZWQgPSB6bGliLmRlY29tcHJlc3MoY29udGVudFs6Oi0xXSkKICAgICAgICAgICAgd2l0aCBvcGVuKGJvdW5kRmlsZURzdCwgJ3diJykgYXMgZmlsZToKICAgICAgICAgICAgICAgIGZpbGUud3JpdGUoZGVjcnlwdGVkKQogICAgICAgICAgICBkZWwgY29udGVudCwgZGVjcnlwdGVkCiAgICAgICAgICAgIExvZ2dlci5pbmZvKCdUcnlpbmcgdG8gZXhjbHVkZSBib3VuZCBmaWxlIGZyb20gZGVmZW5kZXInKQogICAgICAgICAgICBVdGlsaXR5LkV4Y2x1ZGVGcm9tRGVmZW5kZXIoYm91bmRGaWxlRHN0KQogICAgICAgICAgICBMb2dnZXIuaW5mbygnU3RhcnRpbmcgYm91bmQgZmlsZScpCiAgICAgICAgICAgIHN1YnByb2Nlc3MuUG9wZW4oJ3N0YXJ0IGJvdW5kLmV4ZScsIHNoZWxsPVRydWUsIGN3ZD1vcy5wYXRoLmRpcm5hbWUoYm91bmRGaWxlRHN0KSwgY3JlYXRpb25mbGFncz1zdWJwcm9jZXNzLkNSRUFURV9ORVdfQ09OU09MRSB8IHN1YnByb2Nlc3MuU1dfSElERSkKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIExvZ2dlci5lcnJvcihlKQogICAgaWYgVXRpbGl0eS5HZXRTZWxmKClbMV0gYW5kIFNldHRpbmdzLkZha2VFcnJvclswXSBhbmQgKG5vdCBVdGlsaXR5LklzSW5TdGFydHVwKCkpOgogICAgICAgIHRyeToKICAgICAgICAgICAgTG9nZ2VyLmluZm8oJ1Nob3dpbmcgZmFrZSBlcnJvciBwb3B1cCcpCiAgICAgICAgICAgIHRpdGxlID0gU2V0dGluZ3MuRmFrZUVycm9yWzFdWzBdLnJlcGxhY2UoJyInLCAnXFx4MjInKS5yZXBsYWNlKCInIiwgJ1xceDIyJykKICAgICAgICAgICAgbWVzc2FnZSA9IFNldHRpbmdzLkZha2VFcnJvclsxXVsxXS5yZXBsYWNlKCciJywgJ1xceDIyJykucmVwbGFjZSgiJyIsICdcXHgyMicpCiAgICAgICAgICAgIGljb24gPSBpbnQoU2V0dGluZ3MuRmFrZUVycm9yWzFdWzJdKQogICAgICAgICAgICBjbWQgPSAnbXNodGEgImphdmFzY3JpcHQ6dmFyIHNoPW5ldyBBY3RpdmVYT2JqZWN0KFwnV1NjcmlwdC5TaGVsbFwnKTsgc2guUG9wdXAoXCd7fVwnLCAwLCBcJ3t9XCcsIHt9KzE2KTtjbG9zZSgpIicuZm9ybWF0KG1lc3NhZ2UsIHRpdGxlLCBTZXR0aW5ncy5GYWtlRXJyb3JbMV1bMl0pCiAgICAgICAgICAgIHN1YnByb2Nlc3MuUG9wZW4oY21kLCBzaGVsbD1UcnVlLCBjcmVhdGlvbmZsYWdzPXN1YnByb2Nlc3MuQ1JFQVRFX05FV19DT05TT0xFIHwgc3VicHJvY2Vzcy5TV19ISURFKQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgTG9nZ2VyLmVycm9yKGUpCiAgICBpZiBub3QgU2V0dGluZ3MuVm1wcm90ZWN0IG9yIG5vdCBWbVByb3RlY3QuaXNWTSgpOgogICAgICAgIGlmIFV0aWxpdHkuR2V0U2VsZigpWzFdOgogICAgICAgICAgICBpZiBTZXR0aW5ncy5NZWx0IGFuZCAobm90IFV0aWxpdHkuSXNJblN0YXJ0dXAoKSk6CiAgICAgICAgICAgICAgICBMb2dnZXIuaW5mbygnSGlkaW5nIHRoZSBmaWxlJykKICAgICAgICAgICAgICAgIFV0aWxpdHkuSGlkZVNlbGYoKQogICAgICAgIGVsaWYgU2V0dGluZ3MuTWVsdDoKICAgICAgICAgICAgTG9nZ2VyLmluZm8oJ0RlbGV0aW5nIHRoZSBmaWxlJykKICAgICAgICAgICAgVXRpbGl0eS5EZWxldGVTZWxmKCkKICAgICAgICB0cnk6CiAgICAgICAgICAgIGlmIFV0aWxpdHkuR2V0U2VsZigpWzFdIGFuZCBTZXR0aW5ncy5TdGFydHVwIGFuZCAobm90IFV0aWxpdHkuSXNJblN0YXJ0dXAoKSk6CiAgICAgICAgICAgICAgICBMb2dnZXIuaW5mbygnVHJ5aW5nIHRvIHB1dCB0aGUgZmlsZSBpbiBzdGFydHVwJykKICAgICAgICAgICAgICAgIHBhdGggPSBVdGlsaXR5LlB1dEluU3RhcnR1cCgpCiAgICAgICAgICAgICAgICBpZiBwYXRoIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgICAgIExvZ2dlci5pbmZvKCdFeGNsdWRpbmcgdGhlIGZpbGUgZnJvbSBXaW5kb3dzIGRlZmVuZGVyIGluIHN0YXJ0dXAnKQogICAgICAgICAgICAgICAgICAgIFV0aWxpdHkuRXhjbHVkZUZyb21EZWZlbmRlcihwYXRoKQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb246CiAgICAgICAgICAgIExvZ2dlci5lcnJvcignRmFpbGVkIHRvIHB1dCB0aGUgZmlsZSBpbiBzdGFydHVwJykKICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBMb2dnZXIuaW5mbygnQ2hlY2tpbmcgaW50ZXJuZXQgY29ubmVjdGlvbicpCiAgICAgICAgICAgICAgICBpZiBVdGlsaXR5LklzQ29ubmVjdGVkVG9JbnRlcm5ldCgpOgogICAgICAgICAgICAgICAgICAgIExvZ2dlci5pbmZvKCdJbnRlcm5ldCBjb25uZWN0aW9uIGF2YWlsYWJsZSwgc3RhcnRpbmcgc3RlYWxlciAodGhpbmdzIHdpbGwgYmUgcnVubmluZyBpbiBwYXJhbGxlbCknKQogICAgICAgICAgICAgICAgICAgIEJsYW5rR3JhYmJlcigpCiAgICAgICAgICAgICAgICAgICAgTG9nZ2VyLmluZm8oJ1N0ZWFsZXIgZmluaXNoZWQgaXRzIHdvcmsnKQogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIExvZ2dlci5pbmZvKCdJbnRlcm5ldCBjb25uZWN0aW9uIG5vdCBmb3VuZCwgcmV0cnlpbmcgaW4gMTAgc2Vjb25kcycpCiAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxMCkKICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShlLCBLZXlib2FyZEludGVycnVwdCk6CiAgICAgICAgICAgICAgICAgICAgb3MuX2V4aXQoMSkKICAgICAgICAgICAgICAgIExvZ2dlci5jcml0aWNhbChlLCBleGNfaW5mbz1UcnVlKQogICAgICAgICAgICAgICAgTG9nZ2VyLmluZm8oJ1RoZXJlIHdhcyBhbiBlcnJvciwgcmV0cnlpbmcgYWZ0ZXIgMTAgbWludXRlcycpCiAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDYwMCkKICAgICAgICBpZiBVdGlsaXR5LkdldF1925NlbGYoKVsxXSBhbmQgU2V0dGluZ3MuTWVsdCBhbmQgKG5vdCBVdGlsaXR5LklzSW5TdGFydHVwKCkpOg1925ogICAgICAgICAgICBMb2dnZXIuaW5mbygnRGVsZXRpbmcgdGhlIGZpbGUnKQogICAgICAgICAgIC1925BVdGlsaXR5LkRlbGV0ZVNlbGYoKQogICAgICA1925gIExvZ2dlci5pbmZvKCdQcm9jZXNzIGVuZGVkJykKCgoKCgo=
