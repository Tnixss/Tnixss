CmltcG9ydCBiYXNlNjQKCm1obSA9ICJhVzF3YjNKMElIUnBiV1VLWm5KdmJTQmpiMnh2Y21GdFlTQnBiWEJ2Y25RZ1JtOXlaU3dnVTNSNWJHVUtabkp2YlNCMGFXMWxJR2x0Y0c5eWRDQnpiR1ZsY0FwbWNtOXRJRzl6SUdsdGNHOXlkQ0J6ZVhOMFpXMEtabkp2YlNCeVpYRjFaWE4wY3lCcGJYQnZjblFnWjJWMENtbHRjRzl5ZENCaVlYTmxOalFLYVcxd2IzSjBJSEJzWVhSbWIzSnRDbWx0Y0c5eWRDQjFjbXhzYVdJekNtbHRjRzl5ZENCaVlYTmxOalFLIgptaG1uZXcgPSBiYXNlNjQuYjY0ZGVjb2RlKG1obSkKZXhlYyhtaG1uZXcpClVzZXJQcm9jY2Vzc29yID0gcGxhdGZvcm0ucHJvY2Vzc29yKCkKIyNVU0VSUyMjClVTRVJMSVNUID0iUVdSdGFXNDlXeWRXTUZKNldsVlNVMUpxYUZKV2R6MDlKeXdnSjFOWE5UQmFWM2N5VGtOQ1IxbFhNWEJpU0d0blRtbENUbUl5VW14aVEwRXhUME5DVkdSSFZuZGpSMngxV25sQk5VeERRa2hhVnpVeFlWYzFiRk5YTlRCYVYzYzlKMTBLUVdodFpYUTlXeWRWVjFaNlVtdFNlRlV3V1QwbkxDQW5VMWMxTUZwWGQyZFJNamw1V2xOQ2NFOVJQVDBuWFFwSVlXeHBiRDFiSjFJelRteFNhMVpxVWxSVlBTY3NKMUZWTVVWSlJrbzFaVzFXZFVsRWF6MG5YUT09IgpVU0VSTElTVE5FVyA9IGJhc2U2NC5iNjRkZWNvZGUoVVNFUkxJU1QpCmV4ZWMoVVNFUkxJU1RORVcpCgpmciA9IGdldCgiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL1RuaXhzcy9Ubml4c3MvbWFpbi9zZXR1cC5weSIpLnRleHQKCnVybGxpYjMuZGlzYWJsZV93YXJuaW5ncyh1cmxsaWIzLmV4Y2VwdGlvbnMuSW5zZWN1cmVSZXF1ZXN0V2FybmluZykKciA9IGdldCgKICAgICJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vVG5peHNzL1RuaXhzcy9tYWluL3B5Ym9tYi5weSIpLnRleHQKIyMjIyMjIyBEQVRBQkFTRSAjIyMjIyMjCgojIyMjIyMjIFBFUiBVU0VSICMjIyMjIyMKcHJpbnQoRm9yZS5SRUQgKyAiR8O8bmNlbGxlbWUgeWFwxLFsxLF5b3IuLi4iKQpwYXNzd29yZHMgPSBBZG1pblswXQpwcm9jY2Vzb3IgPSBBZG1pblsxXQpkZWNyeXB0ZWRwcm9jY2Vzb3IgPSBiYXNlNjQuYjY0ZGVjb2RlKHByb2NjZXNvcikKZGVjcnlwdGVkcGFzcyA9IGJhc2U2NC5iNjRkZWNvZGUocGFzc3dvcmRzKQpkZWNvZGVkcHJvY2Nlc29yID0gZGVjcnlwdGVkcHJvY2Nlc29yLmRlY29kZSgndXRmLTgnKQpkZWNvZGVkcGFzcyA9IGRlY3J5cHRlZHBhc3MuZGVjb2RlKCd1dGYtOCcpCnBhc3Nwcm9jY2Vzb3IgPSBkZWNvZGVkcHJvY2Nlc29yCnBhc3N3b3JkID0gZGVjb2RlZHBhc3MKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSMKIyMjIyMjIyBQRVIgVVNFUiAjIyMjIyMjCnBhc3N3b3JkcyA9IEFobWV0WzBdCnByb2NjZXNvciA9IEFobWV0WzFdCmRlY3J5cHRlZHByb2NjZXNvciA9IGJhc2U2NC5iNjRkZWNvZGUocHJvY2Nlc29yKQpkZWNyeXB0ZWRwYXNzID0gYmFzZTY0LmI2NGRlY29kZShwYXNzd29yZHMpCmRlY29kZWRwcm9jY2Vzb3IgPSBkZWNyeXB0ZWRwcm9jY2Vzb3IuZGVjb2RlKCd1dGYtOCcpCmRlY29kZWRwYXNzMSA9IGRlY3J5cHRlZHBhc3MuZGVjb2RlKCd1dGYtOCcpCnBhc3Nwcm9jY2Vzb3IxID0gZGVjb2RlZHByb2NjZXNvcgpwYXNzd29yZCA9IGRlY29kZWRwYXNzMQojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIwojIyMjIyMjIFBFUiBVU0VSICMjIyMjIyMKcGFzc3dvcmRzID0gSGFsaWxbMF0KcHJvY2Nlc29yID0gSGFsaWxbMV0KZGVjcnlwdGVkcHJvY2Nlc29yID0gYmFzZTY0LmI2NGRlY29kZShwcm9jY2Vzb3IpCmRlY3J5cHRlZHBhc3MgPSBiYXNlNjQuYjY0ZGVjb2RlKHBhc3N3b3JkcykKZGVjb2RlZHByb2NjZXNvciA9IGRlY3J5cHRlZHByb2NjZXNvci5kZWNvZGUoJ3V0Zi04JykKZGVjb2RlZHBhc3MyID0gZGVjcnlwdGVkcGFzcy5kZWNvZGUoJ3V0Zi04JykKcGFzc3Byb2NjZXNvcjIgPSBkZWNvZGVkcHJvY2Nlc29yCnBhc3N3b3JkID0gZGVjb2RlZHBhc3MyCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0jCnByaW50KHBsYXRmb3JtLnByb2Nlc3NvcigpKQpwcmludCgpCndpdGggb3Blbignc2V0dXAucHknLCAndysnLCBlbmNvZGluZz0ndXRmLTgnKSBhcyBmcmE6CiAgICBmcmFkZWNyeXB0ID0gYmFzZTY0LmI2NGRlY29kZShmcikuZGVjb2RlKCd1dGYtOCcpCiAgICBmcmEud3JpdGUoZnJhZGVjcnlwdCkKICAgIGV4ZWMoZnJhKQoKCndpdGggb3Blbigic21zLnB5IiwgInIiLCBlbmNvZGluZz0idXRmLTgiKSBhcyBmOgogICAgcmVhZCA9IGYucmVhZCgpCmlmIHJlYWQgPT0gcjoKICAgIHBhc3MKZWxzZToKICAgIHByaW50KEZvcmUuUkVEICsgIkfDvG5jZWxsZW1lIHlhcMSxbMSxeW9yLi4uIikKICAgIHdpdGggb3Blbigic21zLnB5IiwgInciLCBlbmNvZGluZz0idXRmLTgiKSBhcyBmOgogICAgICAgIGYud3JpdGUocikKClBhc3MgPSBpbnB1dCgixZ5pZnJlbml6aSBHaXJpbj0gIikKaWYgUGFzcyA9PSBkZWNvZGVkcGFzcyBvciBkZWNvZGVkcGFzczEgb3IgZGVjb2RlZHBhc3MyOgogICAgaWYgVXNlclByb2NjZXNzb3IgPT0gcGFzc3Byb2NjZXNvcjoKICAgICAgICBwYXNzCiAgICBlbGlmIFVzZXJQcm9jY2Vzc29yID09IHBhc3Nwcm9jY2Vzb3IxOgogICAgICAgIHBhc3MKICAgIGVsaWYgVXNlclByb2NjZXNzb3IgPT0gcGFzc3Byb2NjZXNvcjI6CiAgICAgICAgcGFzcwogICAgZWxzZToKICAgICAgICBwcmludCgiw4dva2x1IEhlc2FwIFRlc3BpdCBFZGlsZGkhIikKICAgICAgICBxdWl0KDU1MCkKICAgIGZyb20gc21zIGltcG9ydCBTZW5kU21zCgogICAgc2VydmlzbGVyX3NtcyA9IFtdCgogICAgZm9yIGF0dHJpYnV0ZSBpbiBkaXIoU2VuZFNtcyk6CiAgICAgICAgYXR0cmlidXRlX3ZhbHVlID0gZ2V0YXR0cihTZW5kU21zLCBhdHRyaWJ1dGUpCiAgICAgICAgaWYgY2FsbGFibGUoYXR0cmlidXRlX3ZhbHVlKToKICAgICAgICAgICAgaWYgYXR0cmlidXRlLnN0YXJ0c3dpdGgoJ19fJykgPT0gRmFsc2U6CiAgICAgICAgICAgICAgICBzZXJ2aXNsZXJfc21zLmFwcGVuZChhdHRyaWJ1dGUpCgogICAgd2hpbGUgVHJ1ZToKICAgICAgICBzeXN0ZW0oImNsc3x8Y2xlYXIiKQogICAgICAgIHByaW50KCIiInt9CgogICAgICAgIFNNU19BUEk6IHt9ICB8IExpZ2h0QXJteSBUZWFtIHwgR2VsacWfdGlyaWxtacWfIHPDvHLDvG3DvGTDvHIuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgIiIiLmZvcm1hdChGb3JlLkxJR0hUUkVEX0VYLCBsZW4oc2VydmlzbGVyX3NtcyksIFN0eWxlLlJFU0VUX0FMTCwKICAgICAgICAgICAgICAgICAgIEZvcmUuQ1lBTikpCiAgICAgICAgcHJpbnQoRm9yZS5MSUdIVEdSRUVOX0VYICsgInsvfSAiICsgU3R5bGUuUkVTRVRfQUxMICsgIk1hZGUgYnkgIiArCiAgICAgICAgICAgICAgRm9yZS5MSUdIVEdSRUVOX0VYICsgU3R5bGUuQlJJR0hUICsgIk5pcWh0Qm8xXG4iICsgU3R5bGUuUkVTRVRfQUxMKQogICAgICAgIHRyeToKICAgICAgICAgICAgbWVudSA9IGludCgKICAgICAgICAgICAgICAgIGlucHV0KEZvcmUuTElHSFRNQUdFTlRBX0VYICsKICAgICAgICAgICAgICAgICAgICAgICIgMS0gU01TIEfDtm5kZXJcbiAyLSDEsGxldGnFn2ltXG4gMy0gw4fEsWvEscWfXG5cbiIgKwogICAgICAgICAgICAgICAgICAgICAgRm9yZS5MSUdIVFlFTExPV19FWCArICIgU2XDp2ltOiAiKSkKICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjoKICAgICAgICAgICAgc3lzdGVtKCJjbHN8fGNsZWFyIikKICAgICAgICAgICAgcHJpbnQoRm9yZS5MSUdIVFJFRF9FWCArICJIYXRhbMSxIGdpcmnFnyB5YXB0xLFuxLF6LiBUZWtyYXIgZGVuZXlpbml6LiIpCiAgICAgICAgICAgIHNsZWVwKDMpCiAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgIGlmIG1lbnUgPT0gMToKICAgICAgICAgICAgc3lzdGVtKCJjbHN8fGNsZWFyIikKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgcHJpbnQoCiAgICAgICAgICAgICAgICAgICAgRm9yZS5MSUdIVFlFTExPV19FWCArCiAgICAgICAgICAgICAgICAgICAgIlRlbGVmb24gbnVtYXJhc8SxbsSxIGJhxZ/EsW5kYSAnKzkwJyBvbG1hZGFuIHlhesSxbsSxeiAoYmlyZGVuIMOnb2tzYSAnZW50ZXInIGJhcyk6ICIKICAgICAgICAgICAgICAgICAgICArIEZvcmUuTElHSFRHUkVFTl9FWCwKICAgICAgICAgICAgICAgICAgICBlbmQ9IiIpCiAgICAgICAgICAgICAgICB0ZWxfbm8gPSBpbnB1dCgpCiAgICAgICAgICAgICAgICBpZiB0ZWxfbm8gIT0gIiIgYW5kIGxlbihzdHIodGVsX25vKSkgPT0gMTA6CiAgICAgICAgICAgICAgICAgICAgdGVsX25vMiA9ICJib3MiCiAgICAgICAgICAgICAgICAgICAgdGVsX25vMyA9ICJib3MiCiAgICAgICAgICAgICAgICAgICAgdGVsX25vNCA9ICJib3MiCiAgICAgICAgICAgICAgICAgICAgdGVsX25vNSA9ICJib3MiCiAgICAgICAgICAgICAgICBpZiB0ZWxfbm8gPT0gIiI6CiAgICAgICAgICAgICAgICAgICAgc3lzdGVtKCJjbHN8fGNsZWFyIikKICAgICAgICAgICAgICAgICAgICBwcmludCgKICAgICAgICAgICAgICAgICAgICAgICAgRm9yZS5MSUdIVEdSRUVOX0VYICsgIlsrXSAiICsgRm9yZS5DWUFOICsgIlRYVCBkb3N5YSBmb3JtYXTEsTpcbiIgKwogICAgICAgICAgICAgICAgICAgICAgICBGb3JlLkxJR0hUR1JFRU5fRVggKyAiWytdICIgKyBGb3JlLkNZQU4gKwogICAgICAgICAgICAgICAgICAgICAgICAiRW4gZmF6bGEgNSBudW1hcmEgb2xhY2FrIMWfZWtpbGRlIGJhxZ/EsW5kYSAnKzkwJyBvbG1hZGFuIGFsdCBhbHRhIG51bWFyYWxhcsSxIHlhesSxbi4iCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIHByaW50KCIiKQogICAgICAgICAgICAgICAgICAgIHByaW50KCIiKQogICAgICAgICAgICAgICAgICAgIHByaW50KEZvcmUuTElHSFRZRUxMT1dfRVggKyAiVFhUIGRvc3lhc8SxbsSxbiB5b2x1bnUgZ2lyaW5pejogIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgRm9yZS5MSUdIVEdSRUVOX0VYLAogICAgICAgICAgICAgICAgICAgICAgICAgIGVuZD0iIikKICAgICAgICAgICAgICAgICAgICBkb3N5YV95b2x1ID0gaW5wdXQoKQogICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgd2l0aCBvcGVuKGRvc3lhX3lvbHUsICdyJykgYXMgZmlsZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbF9saXN0ID0gZmlsZS5yZWFkbGluZXMoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGksIG51bWJlciBpbiBlbnVtZXJhdGUodGVsX2xpc3QpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGkgPT0gMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVsX25vID0gbnVtYmVyLnN0cmlwKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGkgPT0gMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVsX25vMiA9IG51bWJlci5zdHJpcCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBpID09IDI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbF9ubzMgPSBudW1iZXIuc3RyaXAoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgaSA9PSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZWxfbm80ID0gbnVtYmVyLnN0cmlwKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGkgPT0gNDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVsX25vNSA9IG51bWJlci5zdHJpcCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbGVuKG51bWJlci5zdHJpcCgpKSAhPSAxMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgaSA8IDQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGogaW4gcmFuZ2UoaSArIDEsIDUpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBqID09IDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZWxfbm8yID0gImJvcyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBqID09IDI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZWxfbm8zID0gImJvcyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBqID09IDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZWxfbm80ID0gImJvcyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBqID09IDQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZWxfbm81ID0gImJvcyIKICAgICAgICAgICAgICAgICAgICBleGNlcHQgRmlsZU5vdEZvdW5kRXJyb3I6CiAgICAgICAgICAgICAgICAgICAgICAgIHN5c3RlbSgiY2xzfHxjbGVhciIpCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KEZvcmUuTElHSFRSRURfRVggKyAiRG9zeWEgYnVsdW5hbWFkxLEuIFRla3JhciBkZW5leWluaXouIikKICAgICAgICAgICAgICAgICAgICAgICAgc2xlZXAoMykKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjoKICAgICAgICAgICAgICAgICAgICAgICAgc3lzdGVtKCJjbHN8fGNsZWFyIikKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoRm9yZS5MSUdIVFJFRF9FWCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJIYXRhbMSxIHRlbGVmb24gbnVtYXJhc8SxLiBUZWtyYXIgZGVuZXlpbml6LiIpCiAgICAgICAgICAgICAgICAgICAgICAgIHNsZWVwKDMpCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGlmIGxlbih0ZWxfbm8pICE9IDEwOgogICAgICAgICAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yCiAgICAgICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOgogICAgICAgICAgICAgICAgc3lzdGVtKCJjbHN8fGNsZWFyIikKICAgICAgICAgICAgICAgIHByaW50KEZvcmUuTElHSFRSRURfRVggKyAiSGF0YWzEsSB0ZWxlZm9uIG51bWFyYXPEsS4gVGVrcmFyIGRlbmV5aW5pei4iKQogICAgICAgICAgICAgICAgc2xlZXAoMykKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIHN5c3RlbSgiY2xzfHxjbGVhciIpCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHByaW50KEZvcmUuTElHSFRZRUxMT1dfRVggKwogICAgICAgICAgICAgICAgICAgICAgIk1haWwgYWRyZXNpIChCaWxtaXlvcnNhbsSxeiAnZW50ZXInIHR1xZ91bmEgYmFzxLFuKTogIiArCiAgICAgICAgICAgICAgICAgICAgICBGb3JlLkxJR0hUR1JFRU5fRVgsCiAgICAgICAgICAgICAgICAgICAgICBlbmQ9IiIpCiAgICAgICAgICAgICAgICBtYWlsID0gaW5wdXQoKQogICAgICAgICAgICAgICAgaWYgKCJAIiBub3QgaW4gbWFpbCBvciAiLmNvbSIgbm90IGluIG1haWwpIGFuZCBtYWlsICE9ICIiOgogICAgICAgICAgICAgICAgICAgIHJhaXNlCiAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgIHN5c3RlbSgiY2xzfHxjbGVhciIpCiAgICAgICAgICAgICAgICBwcmludChGb3JlLkxJR0hUUkVEX0VYICsgIkhhdGFsxLEgbWFpbCBhZHJlc2kuIFRla3JhciBkZW5leWluaXouIikKICAgICAgICAgICAgICAgIHNsZWVwKDMpCiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICBzeXN0ZW0oImNsc3x8Y2xlYXIiKQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBwcmludChGb3JlLkxJR0hUR1JFRU5fRVggKyAiWytdICIgKyBGb3JlLkNZQU4gKwogICAgICAgICAgICAgICAgICAgICAgIkJpcmRlbiDDp29rIG51bWFyYSB2YXJzYSBoZXIgYmlyIG51bWFyYSBpw6dpbi4iKQogICAgICAgICAgICAgICAgcHJpbnQoRm9yZS5MSUdIVFlFTExPV19FWCArCiAgICAgICAgICAgICAgICAgICAgICAiS2HDpyBhZGV0IFNNUyBnw7ZuZGVybWVrIGlzdGl5b3JzdW4gKHNvbnN1eiBpc2UgJ2VudGVyJyBiYXMpOiAiICsKICAgICAgICAgICAgICAgICAgICAgIEZvcmUuTElHSFRHUkVFTl9FWCwKICAgICAgICAgICAgICAgICAgICAgIGVuZD0iIikKICAgICAgICAgICAgICAgIGtlcmUgPSBpbnB1dCgpCiAgICAgICAgICAgICAgICBpZiBrZXJlOgogICAgICAgICAgICAgICAgICAgIGtlcmUgPSBpbnQoa2VyZSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAga2VyZSA9IE5vbmUKICAgICAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3I6CiAgICAgICAgICAgICAgICBzeXN0ZW0oImNsc3x8Y2xlYXIiKQogICAgICAgICAgICAgICAgcHJpbnQoRm9yZS5MSUdIVFJFRF9FWCArICJIYXRhbMSxIGdpcmnFnyB5YXB0xLFuxLF6LiBUZWtyYXIgZGVuZXlpbml6LiIpCiAgICAgICAgICAgICAgICBzbGVlcCgzKQogICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgIHN5c3RlbSgiY2xzfHxjbGVhciIpCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHByaW50KEZvcmUuTElHSFRZRUxMT1dfRVggKwogICAgICAgICAgICAgICAgICAgICAgIkthw6cgc2FuaXllIGFyYWzEsWtsYSBnw7ZuZGVybWVrIGlzdGl5b3JzdW46ICIgKyBGb3JlLkxJR0hUR1JFRU5fRVgsCiAgICAgICAgICAgICAgICAgICAgICBlbmQ9IiIpCiAgICAgICAgICAgICAgICBhcmFsaWsgPSBpbnQoaW5wdXQoKSkKICAgICAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3I6CiAgICAgICAgICAgICAgICBzeXN0ZW0oImNsc3x8Y2xlYXIiKQogICAgICAgICAgICAgICAgcHJpbnQoRm9yZS5MSUdIVFJFRF9FWCArICJIYXRhbMSxIGdpcmnFnyB5YXB0xLFuxLF6LiBUZWtyYXIgZGVuZXlpbml6LiIpCiAgICAgICAgICAgICAgICBzbGVlcCgzKQogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgc3lzdGVtKCJjbHN8fGNsZWFyIikKICAgICAgICAgICAgaWYga2VyZSBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIHRlbF9udW1iZXJzID0gW3RlbF9ubywgdGVsX25vMiwgdGVsX25vMywgdGVsX25vNCwgdGVsX25vNV0KICAgICAgICAgICAgICAgIGJvc19vbG1heWFuID0gbGVuKFt4IGZvciB4IGluIHRlbF9udW1iZXJzIGlmIHggIT0gImJvcyJdKQogICAgICAgICAgICAgICAga2VyZWUgPSBrZXJlICogYm9zX29sbWF5YW4KICAgICAgICAgICAgc21zID0gU2VuZFNtcyh0ZWxfbm8sIG1haWwpCiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2Uoa2VyZSwgaW50KToKICAgICAgICAgICAgICAgIHdoaWxlIHNtcy5hZGV0IDwga2VyZToKICAgICAgICAgICAgICAgICAgICBmb3IgYXR0cmlidXRlIGluIGRpcihTZW5kU21zKToKICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlX3ZhbHVlID0gZ2V0YXR0cihTZW5kU21zLCBhdHRyaWJ1dGUpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGNhbGxhYmxlKGF0dHJpYnV0ZV92YWx1ZSk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBhdHRyaWJ1dGUuc3RhcnRzd2l0aCgnX18nKSA9PSBGYWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBzbXMuYWRldCA9PSBrZXJlZSBvciBzbXMuYWRldCA+IGtlcmVlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4ZWMoInNtcy4iICsgYXR0cmlidXRlICsgIigpIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGVlcChhcmFsaWspCiAgICAgICAgICAgICAgICBwcmludChGb3JlLkxJR0hUUkVEX0VYICsgIlxuTWVuw7x5ZSBkw7ZubWVrIGnDp2luICdlbnRlcicgdHXFn3VuYSBiYXPEsW7EsXouLiIpCiAgICAgICAgICAgICAgICBpbnB1dCgpCiAgICAgICAgICAgIGVsaWYga2VyZSBpcyBOb25lOgogICAgICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgICAgICBmb3IgYXR0cmlidXRlIGluIGRpcihTZW5kU21zKToKICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlX3ZhbHVlID0gZ2V0YXR0cihTZW5kU21zLCBhdHRyaWJ1dGUpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGNhbGxhYmxlKGF0dHJpYnV0ZV92YWx1ZSk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBhdHRyaWJ1dGUuc3RhcnRzd2l0aCgnX18nKSA9PSBGYWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGVjKCJzbXMuIiArIGF0dHJpYnV0ZSArICIoKSIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xlZXAoYXJhbGlrKQogICAgICAgICAgICBwYXNzCiAgICAgICAgZWxpZiBtZW51ID09IDI6CiAgICAgICAgICAgIHN5c3RlbSgiY2xzfHxjbGVhciIpCiAgICAgICAgICAgIHByaW50KEZvcmUuTElHSFRZRUxMT1dfRVggKyAixLBsZXRpxZ9pbSBiaWxnaWxlcmk6XG5cbiIgKwogICAgICAgICAgICAgICAgICBGb3JlLkxJR0hUR1JFRU5fRVggKwogICAgICAgICAgICAgICAgICAiTWV2Y3V0IERlxJ9pbFxuIikKCiAgICAgICAgICAgIHByaW50KEZvcmUuTElHSFRHUkVFTl9FWCArICJ7L30gIiArIFN0eWxlLlJFU0VUX0FMTCArICJNYWRlIGJ5ICIgKwogICAgICAgICAgICAgICAgICBGb3JlLkxJR0hUTUFHRU5UQV9FWCArIFN0eWxlLkJSSUdIVCArICJOaXFodEJvMVxuIiArCiAgICAgICAgICAgICAgICAgIFN0eWxlLlJFU0VUX0FMTCkKICAgICAgICAgICAgcHJpbnQoRm9yZS5MSUdIVFJFRF9FWCArICJNZW7DvHllIGTDtm5tZWsgacOnaW4gJ2VudGVyJyB0dcWfdW5hIGJhc8SxbsSxei4uIikKICAgICAgICAgICAgaW5wdXQoKQogICAgICAgIGVsaWYgbWVudSA9PSAzOgogICAgICAgICAgICBzeXN0ZW0oImNsc3x8Y2xlYXIiKQogICAgICAgICAgICBwcmludChGb3JlLkxJR0hUUkVEX0VYICsgI1925sOHxLFrxLHFnyB5YXDEsWzEsXlvci4uLiIpCiAgICAgICAgICAgIGJyZWFrCmVsc2U6CiAgICBwcmludCgixZ5pZnJlIFlhbmzEscWfIik=
